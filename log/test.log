# Logfile created on Thu Apr 10 22:36:22 +0930 2008StubController: missing default helper path stub_helper
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001344)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000845)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000757)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000772)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001526)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.001343)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.003921)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::File Indexes (0.026539)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::File Indexes (0.002413)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::File Load (0.001986)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mEarth::File Load (0.001458)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;35;1mSQL (0.003169)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Directory Indexes (0.004625)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Directory Indexes (0.001903)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.002137)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002264)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mPK and serial sequence (0.005147)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'files'::regclass
[0m
  [4;35;1mEarth::File Create (0.001708)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(3, E'c', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001168)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mEarth::File Delete all (0.002119)[0m   [0mDELETE FROM files WHERE ("id" IN (2)) [0m
  [4;36;1mSQL (0.001394)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000634)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001394)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001547)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mPK and serial sequence (0.006211)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'directories'::regclass
[0m
  [4;35;1mEarth::Directory Create (0.001616)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.001153)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.049938)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001606)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001526)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.003358)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000625)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001574)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001842)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001275)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001360)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001481)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'fiddle', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/fiddle', -1, 0)[0m
  [4;35;1mSQL (0.000896)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004071)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001478)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001422)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001426)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001509)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001573)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.003129)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 2 AND 9) [0m
  [4;36;1mEarth::Directory Update (0.002130)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 9 THEN 8 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 9 THEN 8 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 9) [0m
  [4;35;1mEarth::Directory Load (0.001596)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.000873)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000622)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001658)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001288)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001325)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001327)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001434)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001511)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001615)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.001922)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 1 AND 10) [0m
  [4;36;1mEarth::Directory Update (0.001506)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 10 THEN 10 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 10 THEN 10 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 10) [0m
  [4;35;1mEarth::Directory Load (0.001615)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001433)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001455)[0m   [0mSELECT * FROM directories [0m
  [4;36;1mEarth::File Load (0.001730)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 5) [0m
  [4;35;1mEarth::File Load (0.001866)[0m   [0mSELECT * FROM files WHERE (files."id" = 8) [0m
  [4;36;1mEarth::File Load (0.001412)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 9) [0m
  [4;35;1mEarth::File Load (0.001391)[0m   [0mSELECT * FROM files WHERE (files."id" = 10) [0m
  [4;36;1mEarth::File Load (0.001391)[0m   [0;1mSELECT * FROM files [0m
  [4;35;1mSQL (0.000782)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000598)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001434)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001578)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001726)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001684)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;35;1mEarth::Directory Load (0.001488)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;36;1mEarth::Directory Load (0.001268)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;35;1mSQL (0.000777)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000573)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.005261)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002074)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001354)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001566)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.002470)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/twiddle') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001371)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;36;1mEarth::Directory Load (0.001547)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001739)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/boo') LIMIT 1[0m
  [4;36;1mSQL (0.000793)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000590)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002607)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001470)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001786)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001351)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001500)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001298)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 6) [0m
  [4;36;1mSQL (0.000969)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000583)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002671)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003101)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000964)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.044508)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mEarth::Directory Load (0.001335)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002287)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001417)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002346)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001421)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::File Load (0.002634)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001425)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::File Load (0.002250)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 5) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 5) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002864)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001369)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mEarth::File Load (0.002407)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000867)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000607)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001481)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001382)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001379)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001585)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;36;1mEarth::Directory Load (0.001547)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Directory Load (0.003087)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.000778)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000767)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001520)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001332)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001364)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mSQL (0.000837)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000584)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001634)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000753)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000595)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.004412)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001531)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mEarth::File Load (0.001770)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mSQL (0.000738)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001529)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001361)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001649)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001334)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mSQL (0.000957)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000723)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001493)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001411)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001549)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;35;1mSQL (0.001067)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003859)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mSQL (0.003102)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Server Indexes (0.004290)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Server Indexes (0.002226)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Server Load (0.002234)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Create (0.001453)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/a/root/directory', 1, 'f', NULL, 1, -2, 0, NULL, E'/a/root/directory', -1, 0)[0m
  [4;36;1mSQL (0.000979)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.006608)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.002521)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000586)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001954)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 1, -2, 0, NULL, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000940)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004164)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.000783)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000578)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001371)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002641)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001494)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002686)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001479)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002252)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001381)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002370)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mSQL (0.000992)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000602)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.004061)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001318)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Server Load (0.001238)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mSQL (0.000724)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000613)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001593)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Create (0.001525)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;36;1mSQL (0.002331)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003009)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Update (0.001847)[0m   [0;1mUPDATE directories SET "level" = 3, "modified" = NULL, "server_id" = 1, "count" = 0, "name" = E'another', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo/bar/another', "parent_id" = 2 WHERE id = 13[0m
  [4;35;1mEarth::Directory Load (0.001652)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001435)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 13) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001766)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001399)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.001057)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000751)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001445)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000791)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000565)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.001521)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001341)[0m   [0mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;36;1mEarth::File Load (0.001814)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;35;1mEarth::File Load (0.001488)[0m   [0mSELECT * FROM files WHERE (files."id" = 4) [0m
  [4;36;1mEarth::File Load (0.001716)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001393)[0m   [0mSELECT * FROM files WHERE (files."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001360)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002589)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001910)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002363)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000784)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000593)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001731)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000951)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000582)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001422)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001468)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001586)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001752)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'wibble', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/wibble', -1, 0)[0m
  [4;35;1mSQL (0.001291)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003089)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001378)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Update (0.002103)[0m   [0;1mUPDATE directories SET "level" = 1, "modified" = '1970-01-01 00:00:00.000000', "server_id" = 1, "count" = 0, "name" = E'name', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo', "parent_id" = NULL WHERE id = 1[0m
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001463)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001394)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001564)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002196)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001733)[0m   [0;1mUPDATE directories SET bytes = bytes + 3, blocks = blocks + 2, count = count + 2 WHERE (id in (1)) [0m
  [4;35;1mEarth::Directory Load (0.001461)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000826)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000629)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001912)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000589)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000872)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000784)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000791)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000882)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000760)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001225)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000843)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000856)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000770)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000728)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000753)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001114)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000782)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000751)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002643)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.000000)[0m   [0mPGError: ERROR: invalid byte sequence for encoding "UTF8": 0xa9
HINT: This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding".
: INSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'©', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.003542)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000720)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001583)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.003060)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001347)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mSQL (0.001036)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000713)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.001497)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mSQL (0.001062)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000800)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000865)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000700)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000780)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000715)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000779)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000677)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001379)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000710)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001000)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000683)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000804)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000743)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000856)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001051)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000839)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000689)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000783)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000689)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000768)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000731)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001280)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.002464)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000901)[0m   [0;1mROLLBACK[0m
allow_concurrency=true
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74a63cc @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.065531)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.002567)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.004315)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.002011)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.003153)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.002143)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.002893)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.003410)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.006763)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.003700)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.007058)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.005213)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.008782)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.001976)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003655)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.010764)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno1', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno1', -1, 0)[0m
  [4;35;1mEarth::File Load (0.005524)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.004537)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mSQL (0.004838)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Update (0.008362)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001952)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.004974)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.002707)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.004745)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000685)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001736)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.003555)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno2', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno2', -1, 0)[0m
  [4;35;1mEarth::File Load (0.007400)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.003724)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mSQL (0.002266)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Update (0.004925)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.002080)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003312)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.005477)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001956)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.004796)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.003521)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.004440)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.002568)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.008321)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Create (0.002817)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno3', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno3', -1, 0)[0m
  [4;36;1mEarth::Directory Load (0.002135)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.001808)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002731)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::File Load (0.002935)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.014577)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.001636)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.003295)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.002483)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.004610)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.001232)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001532)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001534)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno4', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno4', -1, 0)[0m
  [4;36;1mSQL (0.007843)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::File Load (0.006041)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Update (0.005480)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.002334)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.003365)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.001520)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002607)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.002276)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.001281)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001441)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001558)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno5', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno5', -1, 0)[0m
  [4;35;1mEarth::File Load (0.004770)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002547)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mSQL (0.001818)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Update (0.004654)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001529)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.002402)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.004538)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.003097)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000673)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001633)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.002705)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno6', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno6', -1, 0)[0m
  [4;36;1mEarth::File Load (0.010294)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.003725)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mSQL (0.002294)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.005677)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Update (0.004636)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.005236)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002453)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.003720)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000677)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001712)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.003976)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mEarth::Directory Create (0.005741)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno7', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno7', -1, 0)[0m
  [4;36;1mSQL (0.002995)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.002231)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mSQL (0.007540)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Update (0.004255)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.005433)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.001968)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002044)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000683)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001392)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.010805)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Create (0.003275)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno8', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno8', -1, 0)[0m
  [4;35;1mSQL (0.003525)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mSQL (0.002108)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Update (0.005772)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001937)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.004719)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002925)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.002119)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000690)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001610)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.006577)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno9', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno9', -1, 0)[0m
  [4;35;1mEarth::File Load (0.004185)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.003639)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mSQL (0.002135)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Update (0.005706)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001478)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001733)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000689)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001772)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001834)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno10', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno10', -1, 0)[0m
  [4;36;1mSQL (0.001192)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003103)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001604)[0m   [0;1mCOMMIT[0m
allow_concurrency=false
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74a63cc @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001083)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000741)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.000833)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000926)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.001497)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000670)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000732)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000617)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000629)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000546)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000858)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000539)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.002445)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000769)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000638)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001502)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001965)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Directory Load (0.001259)[0m   [0;1mSELECT * FROM directories [0m
  [4;35;1mEarth::Directory Load (0.001352)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001536)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002620)[0m   [0mSELECT * FROM files [0m
  [4;36;1mSQL (0.000798)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000779)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001255)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001520)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003246)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001282)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001459)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002595)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001323)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001266)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.005858)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mSQL (0.000818)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000632)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001702)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002311)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = '2008-04-10 13:08:06.090869' WHERE "id" = 1[0m
  [4;35;1mSQL (0.001946)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001007)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001518)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000890)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000565)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.002690)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mSQL (0.000710)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000837)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001212)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001350)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002345)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001289)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001182)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002374)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001275)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001240)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002287)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000759)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000592)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001514)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001684)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Server Load (0.001436)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mPK and serial sequence (0.005121)[0m   [0m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'servers'::regclass
[0m
  [4;36;1mEarth::Server Create (0.001360)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001302)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.000832)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000570)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001496)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002924)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001434)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.002850)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001438)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::Directory Load (0.001466)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;36;1mEarth::Directory Load (0.002325)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) ORDER BY lft[0m
  [4;35;1mSQL (0.001026)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000723)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001386)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001790)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.002659)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001805)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001305)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000960)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001602)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 5, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001125)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005164)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 5 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001516)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 8) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06661)
  [4;35;1mEarth::File Load (0.001367)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 8) ORDER BY name[0m
Creating file with name file1 (0.00805)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03807)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.119318s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001500)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001572)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:06.393401', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 5[0m
  [4;36;1mEarth::Directory Load (0.001531)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001680)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001680)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001333)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.003858)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001636)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 8) [0m
  [4;36;1mSQL (0.001321)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000625)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001369)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002507)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001835)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001659)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001647)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001392)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002776)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 6, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001061)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003840)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 6 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002145)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06545)
  [4;36;1mEarth::File Load (0.001419)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
Creating file with name file1 (0.00660)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04079)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120011s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001594)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001574)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:06.591119', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001477)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001935)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03617)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00904)
checking for update on file file1
checking for update on file file2
Updating directory with name dir1 (0.01672)
Update cycle took 0.070461s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001600)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001840)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:06.673917', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001406)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001436)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001609)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001781)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 10) and rgt > (select rgt from directories where id = 10) and directories.server_id = 6) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.001914)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (10)) [0m
  [4;36;1mEarth::Directory Load (0.001576)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;35;1mEarth::File Load (0.002796)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002672)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002453)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001397)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001653)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001658)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001427)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001481)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mEarth::Directory Load (0.001410)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;36;1mEarth::Directory Load (0.002306)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mSQL (0.000905)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000669)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.004016)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001555)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001689)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001534)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001230)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001029)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002779)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 7, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000955)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003698)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 7 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001811)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06622)
  [4;35;1mEarth::File Load (0.001630)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
Creating file with name file1 (0.00624)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03832)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.118934s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002426)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001534)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:06.907369', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001420)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001488)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03801)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00684)
checking for update on file file1
Updating file with name file1 (0.00351)
checking for update on file file2
Updating directory with name dir1 (0.01502)
Update cycle took 0.075084s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001540)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001494)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:06.993363', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.003807)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 12) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001788)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001399)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001968)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 12) and rgt > (select rgt from directories where id = 12) and directories.server_id = 7) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001816)[0m   [0;1mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (12)) [0m
  [4;35;1mEarth::Directory Load (0.001465)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;36;1mEarth::File Load (0.002977)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002651)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002441)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001602)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001794)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001823)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001793)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001422)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001658)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;35;1mEarth::Directory Load (0.001452)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mSQL (0.000888)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000673)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001511)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001638)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001371)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001491)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001250)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000930)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001487)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 8, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001013)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.006433)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 8 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001427)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06569)
  [4;36;1mEarth::File Load (0.001435)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
Creating file with name file1 (0.00720)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04307)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.122128s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001544)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001690)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:07.234749', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.002425)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 14) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002820)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 15) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001507)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001885)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;35;1mEarth::File Load (0.002486)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002793)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002537)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001572)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001687)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 14) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.33041)
  [4;36;1mEarth::File Load (0.001516)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.16195)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.502977s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001648)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002709)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:07.782976', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001879)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001943)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001740)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;36;1mSQL (0.000913)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001056)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001804)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001598)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001847)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001510)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001255)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001037)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.004809)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 9, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000979)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003725)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 9 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001467)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.07098)
  [4;36;1mEarth::File Load (0.001350)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
Creating file with name file1 (0.00698)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03942)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.123614s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001599)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001959)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:07.976099', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001637)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002434)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001772)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002432)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.004547)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002652)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001616)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001550)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.04462)
  [4;36;1mEarth::File Load (0.002089)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.06366)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00886)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.130637s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001634)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001476)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:08.148418', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001942)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001862)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001467)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::Directory Load (0.003966)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002797)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001630)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001829)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.002703)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001599)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001406)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001452)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001373)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001415)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001980)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001398)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::File Load (0.002384)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002210)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002339)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001735)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001498)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.003984)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04553)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file1 (0.00813)
checking for update on file sub-file1
Updating directory with name subdir (0.01413)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.01052)
Update cycle took 0.096514s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001848)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001921)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:08.343698', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::File Load (0.001748)[0m   [0;1mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001673)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;36;1mEarth::Directory Load (0.001713)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001855)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002174)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;35;1mEarth::File Load (0.001614)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001410)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001421)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001584)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001451)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002737)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002836)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002384)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002559)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001540)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001907)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001626)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002394)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001687)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001763)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002525)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001417)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001464)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.002712)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.13692)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file2 (0.00665)
Creating file with name sub-file3 (0.00734)
checking for update on file sub-file1
checking for update on file sub-file2
checking for update on file sub-file3
Updating directory with name subdir (0.01436)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00801)
Update cycle took 0.191529s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001574)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001512)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:08.649650', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::Directory Load (0.001642)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001734)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001570)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::Directory Load (0.002206)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001571)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001533)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001411)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.004649)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002280)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002270)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mSQL (0.001223)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000722)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001668)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001985)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001496)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001813)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001524)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000931)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001541)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 10, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001338)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003858)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 10 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002208)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 20) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04575)
  [4;36;1mEarth::File Load (0.001776)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
Creating file with name file1 (0.00630)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03062)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.090747s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001726)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001848)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:08.831891', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 10[0m
  [4;35;1mEarth::Directory Load (0.001460)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 20) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001421)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001817)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001522)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mEarth::File Load (0.002472)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002545)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002409)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001809)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001728)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001880)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001384)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mSQL (0.001947)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000638)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001609)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001810)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001189)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001454)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001265)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000945)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001663)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 11, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001994)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005172)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 11 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001898)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 22) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06601)
  [4;35;1mEarth::File Load (0.001418)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
Creating file with name file1 (0.00603)
Creating file with name .an_invisible_file (0.00610)
checking for update on file file1
checking for update on file .an_invisible_file
Updating directory with name /home/ssurfer/earth/test_data (0.04588)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.130428s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001604)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001640)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.061402', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 11[0m
  [4;36;1mEarth::Directory Load (0.001564)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 22) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001390)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 23) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001661)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001648)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 22) [0m
  [4;36;1mEarth::File Load (0.002403)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002254)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002434)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001937)[0m   [0mSELECT * FROM files WHERE (files."name" = E'.an_invisible_file') LIMIT 1[0m
  [4;36;1mSQL (0.000840)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000664)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001384)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001915)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001184)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001695)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001576)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000915)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001435)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 12, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000982)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004702)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 12 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001541)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'random') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001502)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'random', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000942)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001660)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data_2', 13, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data_2', -1, 0)[0m
  [4;35;1mSQL (0.000902)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003937)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 13 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002206)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001551)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001420)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.01027)
Update cycle took 0.0152s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001720)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001847)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.189232', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::File Load (0.001272)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
  [4;35;1mEarth::Directory Update (0.001819)[0m   [0mUPDATE directories SET "level" = 1, "modified" = '2008-04-10 13:08:08.000000', "server_id" = 13, "count" = 0, "name" = E'/home/ssurfer/earth/test_data_2', "bytes" = 0, "cache_valid" = 't', "blocks" = 0, "path" = E'/home/ssurfer/earth/test_data_2', "parent_id" = NULL WHERE id = 25[0m
  [4;36;1mEarth::Directory Load (0.001370)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 25) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001738)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001808)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/jfcbwr
create directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
  [4;35;1mEarth::Directory Load (0.001365)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001541)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001781)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003539s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001615)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001480)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.229686', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.002269)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001994)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
delete directory /home/ssurfer/earth/test_data_2/jfcbwr
  [4;36;1mEarth::Directory Load (0.001685)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001343)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001300)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00322s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001773)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001523)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.256411', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.003504)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001825)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
  [4;35;1mEarth::Directory Load (0.001386)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001370)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001267)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003502s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001543)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001516)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.284283', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001543)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001843)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy/kmwmyjs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
  [4;36;1mEarth::Directory Load (0.001366)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001367)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001641)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003885s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001723)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001481)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.312461', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001414)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002105)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/hzfnsu/fwfj
  [4;35;1mEarth::Directory Load (0.001394)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001501)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001626)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004552s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001554)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.004017)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.341526', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001425)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002363)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam
  [4;36;1mEarth::Directory Load (0.001591)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001392)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001777)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003943s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001968)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001537)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.371254', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001557)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002057)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam/hehs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn/mfrctyqjdft
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl
  [4;35;1mEarth::Directory Load (0.001389)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001375)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001355)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003133s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001526)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001551)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.400850', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001489)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.003616)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001361)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001373)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001445)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003232s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.003974)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001741)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.431353', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001589)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002245)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001399)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001343)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001529)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003384s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001579)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001567)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.458327', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001347)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001843)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vfqakcktrzt
create directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/mon/drmzomkci
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/qy
  [4;36;1mEarth::Directory Load (0.001775)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001494)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001268)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003402s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002841)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001605)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.487093', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001367)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001947)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
delete directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/lcifqeg
  [4;35;1mEarth::Directory Load (0.001389)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001394)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001348)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.005831s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002503)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.077286)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.519605', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001396)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002146)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/ni
  [4;36;1mEarth::Directory Load (0.001395)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001487)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001988)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004486s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001823)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003328)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.630858', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002305)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002069)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo
  [4;35;1mEarth::Directory Load (0.001547)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001373)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001316)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003118s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001544)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.116316)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.661297', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001590)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002421)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001511)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003503s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001598)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001960)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.802826', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001348)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001806)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
delete directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/zdri
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz
create directory /home/ssurfer/earth/test_data_2/qd
create directory /home/ssurfer/earth/test_data_2/qg
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;35;1mEarth::Directory Load (0.001433)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001752)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.002121)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003816s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001695)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002521)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.832173', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001377)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001905)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw
  [4;36;1mEarth::Directory Load (0.001451)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001370)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001302)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003074s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001558)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001531)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.862108', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001613)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001929)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt
  [4;35;1mEarth::Directory Load (0.002287)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001629)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001416)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004466s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001613)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001749)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.892212', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001546)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001898)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh
  [4;36;1mEarth::Directory Load (0.001357)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001347)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001311)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003264s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002140)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001655)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.920701', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001442)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002175)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl
  [4;35;1mEarth::Directory Load (0.001449)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001384)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001297)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003002s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001715)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001648)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:09.953210', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001335)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002231)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy
  [4;36;1mEarth::Directory Load (0.001354)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001386)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:38:09 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001397)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003089s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001823)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001994)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:10.003116', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001816)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001974)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs
  [4;35;1mEarth::Directory Load (0.001448)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001364)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are ["pmhklgudtco", "zdri", "qg", "qd"]
  [4;35;1mEarth::Directory Load (0.001332)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco (0.60783)
Creating directory /home/ssurfer/earth/test_data_2/zdri (0.31041)
Creating directory /home/ssurfer/earth/test_data_2/qg (0.35272)
Creating directory /home/ssurfer/earth/test_data_2/qd (0.05213)
  [4;36;1mEarth::File Load (0.001393)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.01944)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
Update cycle took 1.366817s, remaining_count is -30
  [4;35;1mEarth::Server Load (0.001574)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001764)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:11.397701', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001522)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001921)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
delete directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;35;1mEarth::Directory Load (0.001631)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001768)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> changed less than 1 second ago (Thu Apr 10 22:38:11 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001571)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001683)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
  [4;36;1mEarth::File Load (0.002918)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 46) ORDER BY name[0m
Removing directory with name cphtotfvky (0.01667)
Removing directory with name ijypcsh (0.01714)
Removing directory with name giwyfoumn (0.25682)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.001995)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001659)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
  [4;36;1mEarth::Directory Load (0.001712)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs -> not changed
  [4;35;1mEarth::Directory Load (0.001637)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku -> not changed
  [4;36;1mEarth::Directory Load (0.001483)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;35;1mEarth::Directory Load (0.001669)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001498)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;35;1mEarth::Directory Load (0.004040)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> changed less than 1 second ago (Thu Apr 10 22:38:11 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001903)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001456)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
  [4;36;1mEarth::File Load (0.001529)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 36) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001675)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001553)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001971)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001854)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001836)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001560)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;35;1mEarth::Directory Load (0.001628)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 38) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;36;1mEarth::Directory Load (0.002371)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 39) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001448)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
Update cycle took 0.405345s, remaining_count is -22
  [4;36;1mEarth::Server Load (0.001686)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001686)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:11.833669', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001561)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001942)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001473)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.004023)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001390)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.001884)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.006356)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.001570)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001590)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001874)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001516)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;36;1mEarth::Directory Load (0.001762)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 38) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;35;1mEarth::Directory Load (0.001387)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 39) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;36;1mEarth::Directory Load (0.001551)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;35;1mEarth::Directory Load (0.001513)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001513)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:38:11 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001532)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001933)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
  [4;35;1mEarth::File Load (0.001645)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 30) ORDER BY name[0m
Removing directory with name ndyzxpku (0.01878)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;36;1mEarth::Directory Load (0.001592)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;35;1mEarth::Directory Load (0.001508)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001418)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> changed less than 1 second ago (Thu Apr 10 22:38:11 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001538)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001550)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
  [4;35;1mEarth::File Load (0.001389)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 36) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> changed less than 1 second ago (Thu Apr 10 22:38:11 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001576)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001449)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
  [4;36;1mEarth::File Load (0.001372)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 46) ORDER BY name[0m
Update cycle took 0.128228s, remaining_count is -21
  [4;35;1mEarth::Server Load (0.001653)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001840)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:11.989194', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001430)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001984)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
  [4;35;1mEarth::Directory Load (0.001407)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001594)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001661)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001412)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed, subdirectories are ["aqzgshlcxr"]
  [4;35;1mEarth::Directory Load (0.001528)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
  [4;36;1mEarth::File Load (0.001381)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 37) ORDER BY name[0m
Removing directory with name jsrjcmsqwjd (0.02580)
Updating directory with name zdri (0.01025)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001613)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.001565)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001588)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001712)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.002479)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001852)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
  [4;35;1mEarth::File Load (0.001385)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 45) ORDER BY name[0m
Removing directory with name obwqvl (0.02029)
Updating directory with name qg (0.00766)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed, subdirectories are ["nfyunk", "iwnfcjzj", "tfz"]
  [4;36;1mEarth::Directory Load (0.001641)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk (0.04750)
  [4;35;1mEarth::File Load (0.001354)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Updating directory with name pmhklgudtco (0.01985)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed, subdirectories are ["ong", "ztbugyeahps"]
  [4;36;1mEarth::Directory Load (0.001737)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps (0.05504)
  [4;35;1mEarth::File Load (0.001357)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 27) ORDER BY name[0m
Updating directory with name iwnfcjzj (0.03166)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001442)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["fplptb", "ojhl", "nyzmaakac"]
  [4;35;1mEarth::Directory Load (0.001649)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb (0.04558)
  [4;36;1mEarth::File Load (0.001384)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 29) ORDER BY name[0m
Removing directory with name sudzbs (0.01750)
Updating directory with name tfz (0.01746)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;35;1mEarth::Directory Load (0.001597)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;36;1mEarth::Directory Load (0.001481)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;35;1mEarth::Directory Load (0.001475)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001604)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
  [4;35;1mEarth::File Load (0.001381)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 35) ORDER BY name[0m
Removing directory with name avki (0.01305)
Updating directory with name nyzmaakac (0.00759)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
Update cycle took 0.4244s, remaining_count is -19
  [4;36;1mEarth::Server Load (0.001815)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001676)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:12.440231', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.002489)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002157)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.003996)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001674)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.002452)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001487)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.002072)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001922)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.001762)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001637)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001587)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001623)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001568)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.001690)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001809)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001444)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> not changed
  [4;36;1mEarth::Directory Load (0.001449)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 57) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
  [4;35;1mEarth::Directory Load (0.001920)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;36;1mEarth::Directory Load (0.001588)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;35;1mEarth::Directory Load (0.001624)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001405)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;35;1mEarth::Directory Load (0.001680)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001799)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;35;1mEarth::Directory Load (0.002696)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
Update cycle took 0.083147s, remaining_count is -19
  [4;36;1mEarth::Server Load (0.001721)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001631)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:12.549931', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001421)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002018)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd/zvci
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw
  [4;36;1mEarth::Directory Load (0.001362)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001404)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001649)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001611)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.001502)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001954)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001606)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001577)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001872)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001903)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001441)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001533)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001546)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.003803)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001442)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 57) [0m
  [4;35;1mEarth::File Load (0.001586)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 57) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002841)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;35;1mEarth::Directory Load (0.001587)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001717)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;35;1mEarth::Directory Load (0.001490)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;36;1mEarth::Directory Load (0.001433)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001430)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;36;1mEarth::Directory Load (0.001649)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
Update cycle took 0.086245s, remaining_count is -19
  [4;35;1mEarth::Server Load (0.002015)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002141)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:12.663329', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001838)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002759)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql
  [4;35;1mEarth::Directory Load (0.001376)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001412)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001792)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001475)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001869)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.004271)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001698)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001543)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001569)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001480)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001736)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001528)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001577)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001754)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001421)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 57) [0m
  [4;36;1mEarth::File Load (0.001443)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 57) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001624)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001583)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001436)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001411)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;35;1mEarth::Directory Load (0.001430)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001477)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;35;1mEarth::Directory Load (0.002185)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
Update cycle took 0.086095s, remaining_count is -19
  [4;36;1mEarth::Server Load (0.001840)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001671)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:12.778934', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.002660)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.004438)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
  [4;36;1mEarth::Directory Load (0.001382)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001419)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001602)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001646)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.001483)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001548)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001721)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001523)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001627)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001540)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001427)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001549)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001562)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001637)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001442)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 57) [0m
  [4;35;1mEarth::File Load (0.001372)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 57) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002110)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001798)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001665)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001626)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;36;1mEarth::Directory Load (0.002539)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001447)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;36;1mEarth::Directory Load (0.001429)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
Update cycle took 0.085828s, remaining_count is -19
  [4;35;1mEarth::Server Load (0.002046)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001683)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:12.896109', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001469)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002457)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001358)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001831)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001462)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.002049)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001716)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.002509)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001559)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001517)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001438)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.003976)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001589)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001885)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001500)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 57) [0m
  [4;36;1mEarth::File Load (0.001362)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 57) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001554)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001623)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001628)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed less than 1 second ago (Thu Apr 10 22:38:12 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001662)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;35;1mEarth::Directory Load (0.001445)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001394)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;35;1mEarth::Directory Load (0.001456)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
Update cycle took 0.085625s, remaining_count is -19
  [4;36;1mEarth::Server Load (0.001591)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001834)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:13.005580', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001378)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001817)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht
  [4;36;1mEarth::Directory Load (0.001594)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001860)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001776)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001535)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.004073)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001514)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed, subdirectories are ["cpezt", "mvyqqkn"]
  [4;36;1mEarth::Directory Load (0.001757)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
Creating directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt (0.05203)
  [4;35;1mEarth::File Load (0.001914)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 41) ORDER BY name[0m
Updating directory with name nzlhf (0.01286)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.002066)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001745)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.002516)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001774)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed, subdirectories are ["nfyunk", "iwnfcjzj", "lopftqw", "tfz"]
  [4;36;1mEarth::Directory Load (0.001918)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw (0.04891)
  [4;35;1mEarth::File Load (0.001601)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Updating directory with name pmhklgudtco (0.02141)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;36;1mEarth::Directory Load (0.001537)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["fplptb", "ojhl", "nyzmaakac"]
  [4;35;1mEarth::Directory Load (0.002012)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
  [4;36;1mEarth::File Load (0.001349)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 29) ORDER BY name[0m
Updating directory with name tfz (0.01915)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001800)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed, subdirectories are ["rwxclpevl", "mbvbwuw", "hahmrbpuujs"]
  [4;35;1mEarth::Directory Load (0.001662)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw (0.09659)
  [4;36;1mEarth::File Load (0.001402)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 32) ORDER BY name[0m
Updating directory with name ojhl (0.01652)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed, subdirectories are ["bkht", "mumvun"]
  [4;35;1mEarth::Directory Load (0.001543)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht (0.05819)
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun (0.13494)
  [4;36;1mEarth::File Load (0.002512)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
Updating directory with name rwxclpevl (0.01627)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed, subdirectories are ["df", "orajhnqhctx"]
  [4;35;1mEarth::Directory Load (0.001600)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df (0.05185)
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx (0.10036)
  [4;36;1mEarth::File Load (0.001397)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 34) ORDER BY name[0m
Updating directory with name hahmrbpuujs (0.01372)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed, subdirectories are ["ong"]
  [4;35;1mEarth::Directory Load (0.002338)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
  [4;36;1mEarth::File Load (0.001352)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 27) ORDER BY name[0m
Removing directory with name ztbugyeahps (0.01878)
Updating directory with name iwnfcjzj (0.01131)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001972)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
Update cycle took 1.000207s, remaining_count is -29
  [4;36;1mEarth::Server Load (0.001716)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002736)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:14.031309', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001649)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.004472)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.001720)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000694)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001442)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002536)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001471)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001665)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001545)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001001)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002717)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 14, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000967)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003921)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 14 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001599)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'late_cache') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001247)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'late_cache', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000885)[0m   [0mSELECT currval('servers_id_seq')[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.00247)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Update cycle took 0.005779s, remaining_count is -1
  [4;36;1mEarth::Directory Create (0.001862)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 15, 'f', NULL, 1, -4, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000985)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.004207)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'dir1', 15, 'f', NULL, 2, -3, 0, 71, E'/home/ssurfer/earth/test_data/dir1', -2, 0)[0m
  [4;35;1mSQL (0.001017)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004805)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END) WHERE (directories.server_id = 15 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001451)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 71) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating file with name file1 (0.00740)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.02961)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file1 (0.00756)
checking for update on file file1
Updating directory with name dir1 (0.01424)
Update cycle took 0.063607s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002120)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001807)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:14.208515', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 14[0m
  [4;36;1mEarth::Directory Load (0.001941)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 70) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001443)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 70) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001470)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 70) [0m
  [4;35;1mEarth::File Load (0.002839)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 70) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 70) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002334)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 70) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 70) AND directories.server_id = 14) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002238)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 70) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 70) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mSQL (0.000849)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000617)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001358)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001932)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001240)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001942)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001529)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001104)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001491)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 16, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000919)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.006822)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 16 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001460)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 73) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04462)
  [4;36;1mEarth::File Load (0.001441)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 73) ORDER BY name[0m
Creating file with name file1 (0.00731)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03197)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.090983s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.002049)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.004329)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:14.379728', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 16[0m
  [4;35;1mEarth::Directory Load (0.001390)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 73) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001360)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 74) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001533)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 73) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001564)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 73) [0m
  [4;35;1mEarth::File Load (0.002635)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 73) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 73) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002680)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 73) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 73) AND directories.server_id = 16) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002576)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 73) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 73) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002034)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001894)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001877)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001875)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 73) [0m
  [4;35;1mSQL (0.001999)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000630)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001404)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001743)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001352)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001523)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001236)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001211)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001485)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 17, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001005)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003828)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 17 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001478)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 75) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir2b", "dir1", "dir2a"]
Creating directory /home/ssurfer/earth/test_data/dir2b (0.03474)
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06567)
Creating directory /home/ssurfer/earth/test_data/dir2a (0.03275)
  [4;35;1mEarth::File Load (0.001374)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 75) ORDER BY name[0m
Creating file with name file1 (0.00648)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.07264)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2b -> changed less than 1 second ago (Thu Apr 10 22:38:14 +0930 2008)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2a -> changed less than 1 second ago (Thu Apr 10 22:38:14 +0930 2008)
Update cycle took 0.219847s, remaining_count is -3
  [4;36;1mEarth::Server Load (0.001891)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001894)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:14.703121', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001663)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 75) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 4
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.003971)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 75) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir2b (0.00930)
Removing directory with name dir2a (0.02146)
Updating directory with name /home/ssurfer/earth/test_data (0.03681)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.076878s, remaining_count is 2
  [4;36;1mEarth::Server Load (0.001674)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001758)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:14.791829', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001645)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 75) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003729)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 77) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002024)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 75) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001455)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 75) [0m
  [4;36;1mEarth::File Load (0.002501)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 75) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 75) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002293)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 75) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 75) AND directories.server_id = 17) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002324)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 75) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 75) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001575)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002001)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001829)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001356)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001439)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 77) [0m
  [4;36;1mEarth::Directory Load (0.001882)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 75) [0m
  [4;35;1mSQL (0.000974)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000658)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001396)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001940)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001265)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001618)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001267)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001360)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001717)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 18, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.002306)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.007206)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 18 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001452)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 79) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06440)
  [4;35;1mEarth::File Load (0.001605)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 79) ORDER BY name[0m
Creating file with name file1 (0.01017)
Creating file with name file1b (0.00623)
Creating file with name file1a (0.00671)
checking for update on file file1
checking for update on file file1b
checking for update on file file1a
Updating directory with name /home/ssurfer/earth/test_data (0.04441)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.139178s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002366)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001492)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:15.037419', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001592)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 79) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001860)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 79) ORDER BY name[0m
checking for update on file file1
Removing file with name file1a (0.00506)
Removing file with name file1b (0.00233)
Updating directory with name /home/ssurfer/earth/test_data (0.23171)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.247482s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001820)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001786)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:15.296077', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001579)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002248)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001847)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001388)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001437)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 80) [0m
  [4;35;1mEarth::Directory Load (0.001437)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 79) [0m
  [4;36;1mSQL (0.000902)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000667)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001505)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001806)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001202)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001577)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001266)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000905)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001446)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 19, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001168)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.006153)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 19 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001592)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 81) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "dir_a"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06886)
Creating directory /home/ssurfer/earth/test_data/dir_a (0.49870)
  [4;36;1mEarth::File Load (0.001382)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 81) ORDER BY name[0m
Creating file with name file1 (0.00913)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.06069)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d -> not changed
Update cycle took 0.647754s, remaining_count is -9
  [4;35;1mEarth::Server Load (0.001810)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002166)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:16.283996', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;35;1mEarth::Directory Load (0.002841)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002678)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002238)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001921)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001852)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001964)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002258)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002202)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002220)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001853)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.088866)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001489)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 81) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 10
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001468)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 81) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir_a (0.12302)
Updating directory with name /home/ssurfer/earth/test_data (0.04274)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.172148s, remaining_count is 8
  [4;36;1mEarth::Server Load (0.001638)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001610)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:16.617043', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;36;1mSQL (0.000961)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000965)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001489)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002620)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001429)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001676)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002043)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000929)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001789)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 20, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000949)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003627)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 20 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001463)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 91) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.07340)
  [4;36;1mEarth::File Load (0.001355)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 91) ORDER BY name[0m
Creating file with name file1 (0.00625)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04013)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.126339s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001536)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001557)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:16.800640', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001444)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 91) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001459)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 91) ORDER BY name[0m
Removing file with name file1 (0.00273)
Removing directory with name dir1 (0.00910)
Updating directory with name /home/ssurfer/earth/test_data (0.00727)
Update cycle took 0.024399s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.001609)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001461)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:16.840470', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001400)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 91) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002553)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 91) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001734)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 91) [0m
  [4;36;1mEarth::File Load (0.002912)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 91) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 91) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002375)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 91) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 91) AND directories.server_id = 20) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002830)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 91) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 91) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001568)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001851)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001321)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.000856)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000698)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001444)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.004942)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001198)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001479)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001266)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000934)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001710)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 21, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000944)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003997)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 21 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001442)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 93) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.03470)
  [4;36;1mEarth::File Load (0.001577)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 93) ORDER BY name[0m
Creating file with name file1 (0.00657)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03301)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are ["dir2"]
Creating directory /home/ssurfer/earth/test_data/dir1/dir2 (0.06649)
Creating file with name file1 (0.00634)
checking for update on file file1
Updating directory with name dir1 (0.01825)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1/dir2 -> not changed
Update cycle took 0.174321s, remaining_count is -2
  [4;35;1mEarth::Server Load (0.001543)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001590)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:17.102658', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001414)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 93) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001477)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 93) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir1 (0.01090)
Updating directory with name /home/ssurfer/earth/test_data (0.01931)
Update cycle took 0.035966s, remaining_count is 2
  [4;35;1mEarth::Server Load (0.001587)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001564)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:17.152363', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001697)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 93) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001447)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 93) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001493)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 93) [0m
  [4;36;1mEarth::File Load (0.002464)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 93) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 93) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002870)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 93) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 93) AND directories.server_id = 21) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002554)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 93) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 93) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001636)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001912)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001472)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001359)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 93) [0m
  [4;35;1mSQL (0.000892)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000733)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001669)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.002411)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001266)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001989)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001277)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000912)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001683)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 22, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000945)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004118)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 22 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001640)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 96) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06658)
  [4;35;1mEarth::File Load (0.001517)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 96) ORDER BY name[0m
Creating file with name file1 (0.00632)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03818)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.117122s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001652)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001693)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:17.361522', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 96) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001405)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 96) ORDER BY name[0m
Removing file with name file1 (0.00221)
Removing directory with name dir1 (0.00845)
Update cycle took 0.018356s, remaining_count is 1
  [4;36;1mEarth::Server Load (0.001528)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001469)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:08:17.392606', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001424)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 96) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001346)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 96) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002322)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 96) and rgt > (select rgt from directories where id = 96) and directories.server_id = 22) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.001841)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -2 WHERE (id in (96)) [0m
  [4;36;1mEarth::Directory Load (0.001482)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 96) [0m
  [4;35;1mEarth::File Load (0.002638)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 96) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 96) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002216)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 96) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 96) AND directories.server_id = 22) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002343)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 96) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 96) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001861)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::File Load (0.001248)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.000868)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000647)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000896)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004916)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mSQL (0.001812)[0m   [0;1mDELETE FROM servers[0m
  [4;35;1mSQL (0.001879)[0m   [0mDELETE FROM file_metadata_strings[0m
  [4;36;1mSQL (0.000969)[0m   [0;1mDELETE FROM files[0m
  [4;35;1mSQL (0.351718)[0m   [0mDELETE FROM directories[0m
  [4;36;1mSQL (0.002072)[0m   [0;1mDELETE FROM plugin_descriptors[0m
  [4;35;1mSQL (0.001463)[0m   [0mDELETE FROM metadata_strings[0m
  [4;36;1mSQL (0.002085)[0m   [0;1mDELETE FROM metadata_attributes[0m
  [4;35;1mSQL (0.001227)[0m   [0mDELETE FROM schema_info[0m
  [4;36;1mEarth::Server Create (0.001358)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'duck.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001127)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Server Create (0.001567)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'rincewind.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000901)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.001072)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000729)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000699)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000565)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000671)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000563)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000987)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000591)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000937)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000766)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000928)[0m   [0;1mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001425)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000813)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000725)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000636)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001606)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000493)[0m   [0mBEGIN[0m


Processing BrowserController#index (for 0.0.0.0 at 2008-04-10 22:38:22) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"browser"}
Redirected to http://test.host/browser/show
Completed in 0.00761 (131 reqs/sec) | DB: 0.00570 (74%) | 302 Found [http://test.host/]
  [4;36;1mSQL (0.000830)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000727)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001168)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000582)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:38:22) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo"]}
  [4;36;1mSQL (0.005021)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Server Indexes (0.005100)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Server Indexes (0.002338)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Server Load (0.002614)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.002825)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Directory Indexes (0.004320)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Directory Indexes (0.001983)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Directory Load (0.001908)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003776)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 1) [0m
  [4;35;1mSQL (0.002296)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::File Indexes (0.004030)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::File Indexes (0.001950)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001937)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::File Load (0.003045)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000836)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004072)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;36;1mSQL (0.002447)[0m   [0;1m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;35;1mEarth::Directory Load (0.003344)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002588)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02722)
Completed in 0.64499 (1 reqs/sec) | Rendering: 0.54258 (84%) | DB: 0.05974 (9%) | 200 OK [http://test.host/browser/show/sboard/foo]
  [4;35;1mEarth::Directory Load (0.002111)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001870)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.003017)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001107)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000909)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:38:22) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser"}
  [4;36;1mEarth::Server Load (0.001818)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.002249)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003779)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.005260)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003165)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02958)
Completed in 0.12341 (8 reqs/sec) | Rendering: 0.08742 (70%) | DB: 0.02529 (20%) | 200 OK [http://test.host/browser/show]
  [4;36;1mSQL (0.000978)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000645)[0m   [0mBEGIN[0m


Processing BrowserController#flat (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"action"=>"flat", "controller"=>"browser"}
  [4;36;1mSQL (0.000995)[0m   [0;1mSHOW max_identifier_length[0m
  [4;35;1mSQL (0.002379)[0m   [0mSELECT count(*) AS count_all FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') [0m
  [4;36;1mEarth::File Load (0.002966)[0m   [0;1mSELECT files.name as name, files.directory_id as directory_id, files.modified as modified, files.bytes as bytes, files.uid as uid FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') ORDER BY bytes desc LIMIT 25 OFFSET 0[0m
Rendering template within layouts/application
Rendering browser/flat
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Server Load (0.001478)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001877)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.002280)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Server Load (0.003708)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002076)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 5) and rgt > (select rgt from directories where id = 5) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001659)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001906)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Load (0.001753)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001894)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Server Load (0.001215)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mEarth::Directory Load (0.001685)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002337)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002863)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002615)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03438)
Completed in 0.19678 (5 reqs/sec) | Rendering: 0.15421 (78%) | DB: 0.03868 (19%) | 200 OK [http://test.host/browser/flat]
  [4;36;1mSQL (0.000908)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000635)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001542)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001978)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002631)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01474)
Completed in 0.21908 (4 reqs/sec) | Rendering: 0.20558 (93%) | DB: 0.00769 (3%) | 200 OK [http://test.host/browser/show/sboard]
  [4;35;1mEarth::Server Load (0.001518)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mSQL (0.000985)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000638)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001680)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002412)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001853)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001838)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.003613)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering browser/show
  [4;35;1mEarth::File Load (0.001918)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 2) ORDER BY name[0m
Completed in 0.03673 (27 reqs/sec) | Rendering: 0.01054 (28%) | DB: 0.01645 (44%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;36;1mEarth::Directory Load (0.001626)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.001480)[0m   [0mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001510)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002426)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001291)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000626)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001526)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001825)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001555)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001597)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.002821)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Sending data earth_report.csv
Completed in 0.02396 (41 reqs/sec) | Rendering: 0.00015 (0%) | DB: 0.01828 (76%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;35;1mEarth::Directory Load (0.001378)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000788)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000654)[0m   [0mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph"}
Rendering template within layouts/application
Rendering graph/index
  [4;36;1mEarth::Server Load (0.002047)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.003700)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002350)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002634)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003426)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03645)
Completed in 0.07447 (13 reqs/sec) | Rendering: 0.05297 (71%) | DB: 0.01698 (22%) | 200 OK [http://test.host/graph]
  [4;35;1mSQL (0.000920)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000670)[0m   [0;1mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;35;1mEarth::Server Load (0.001892)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002265)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
Rendering template within layouts/application
Rendering graph/index
  [4;35;1mEarth::Directory Load (0.002268)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 4) and rgt > (select rgt from directories where id = 4) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002416)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02615)
Completed in 0.06182 (16 reqs/sec) | Rendering: 0.04828 (78%) | DB: 0.01043 (16%) | 200 OK [http://test.host/graph/sboard/foo/bar/twiddle/frob]
  [4;35;1mSQL (0.001714)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000700)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"filter_filename"=>"*.zip", "action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001605)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001934)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002705)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002606)[0m   [0;1mSELECT * FROM files WHERE (files.name LIKE E'%.zip') AND (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
Rendering graph/directory.rxml
Completed in 0.10418 (9 reqs/sec) | Rendering: 0.07624 (73%) | DB: 0.01126 (10%) | 200 OK [http://test.host/graph/show/sboard/foo?filter_filename=%2A.zip]
  [4;35;1mSQL (0.000800)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000595)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:38:23) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001692)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001719)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002056)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002257)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
  [4;35;1mEarth::Directory Load (0.001573)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.13454 (7 reqs/sec) | Rendering: 0.10621 (78%) | DB: 0.01069 (7%) | 200 OK [http://test.host/graph/show/sboard/foo]
  [4;36;1mSQL (0.000830)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000595)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph"}
  [4;36;1mEarth::Server Load (0.001221)[0m   [0;1mSELECT * FROM servers [0m
Rendering graph/servers.rxml
  [4;35;1mEarth::Directory Load (0.001708)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002627)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002344)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002422)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.08104 (12 reqs/sec) | Rendering: 0.06873 (84%) | DB: 0.01175 (14%) | 200 OK [http://test.host/graph/show]
  [4;35;1mSQL (0.000774)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000799)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard"}
  [4;35;1mEarth::Server Load (0.001530)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001792)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.002126)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002101)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 1 AND lft >= 0 AND rgt <= 11)) [0m
  [4;35;1mEarth::Directory Load (0.002970)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (5)) [0m
Rendering graph/directory.rxml
Completed in 0.10715 (9 reqs/sec) | Rendering: 0.07669 (71%) | DB: 0.01209 (11%) | 200 OK [http://test.host/graph/show/sboard]
  [4;36;1mSQL (0.000789)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000564)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;36;1mEarth::Server Load (0.001557)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003065)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002213)[0m   [0;1mSELECT * FROM directories WHERE (directories.level <= 9 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 4)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 4))) ORDER BY directories.lft[0m
  [4;35;1mEarth::File Load (0.002235)[0m   [0mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 8 AND server_id = 1 AND lft >= 4 AND rgt <= 7)) [0m
  [4;36;1mEarth::Directory Load (0.002657)[0m   [0;1mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
  [4;35;1mEarth::Directory Load (0.001518)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
Completed in 0.06500 (15 reqs/sec) | Rendering: 0.03788 (58%) | DB: 0.01460 (22%) | 200 OK [http://test.host/graph/show/sboard/foo/bar/twiddle/frob]
  [4;36;1mSQL (0.000843)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000572)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001792)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"server3"}
  [4;35;1mEarth::Server Load (0.001601)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'server3') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001533)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.005137)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 3 AND (directories.lft > (SELECT lft FROM directories WHERE id = 7)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 7))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003455)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 3 AND lft >= 0 AND rgt <= 3)) [0m
  [4;35;1mEarth::Directory Load (0.001409)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.05931 (16 reqs/sec) | Rendering: 0.03379 (56%) | DB: 0.01634 (27%) | 200 OK [http://test.host/graph/show/server3]
  [4;36;1mSQL (0.000779)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000624)[0m   [0mBEGIN[0m


Processing ServersController#edit (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"edit", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001743)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/edit
Completed in 0.04451 (22 reqs/sec) | Rendering: 0.03585 (80%) | DB: 0.00315 (7%) | 200 OK [http://test.host/servers/edit/sboard]
  [4;35;1mSQL (0.001093)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000835)[0m   [0;1mBEGIN[0m


Processing ServersController#index (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"servers"}
  [4;35;1mEarth::Server Load (0.001169)[0m   [0mSELECT * FROM servers [0m
Rendering template within layouts/servers
Rendering servers/index
  [4;36;1mEarth::Directory Load (0.001633)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002488)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002557)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002372)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.06131 (16 reqs/sec) | Rendering: 0.04838 (78%) | DB: 0.01215 (19%) | 200 OK [http://test.host/servers]
  [4;36;1mSQL (0.001373)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000624)[0m   [0mBEGIN[0m


Processing ServersController#show (for 0.0.0.0 at 2008-04-10 22:38:24) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001839)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/show
  [4;35;1mEarth::Directory Load (0.001559)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mSQL (0.002422)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;35;1mEarth::Directory Load (0.001680)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002716)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002352)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (directories.server_id = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
Completed in 0.07278 (13 reqs/sec) | Rendering: 0.05766 (79%) | DB: 0.01456 (20%) | 200 OK [http://test.host/servers/show/sboard]
  [4;35;1mSQL (0.001039)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000953)[0m   [0;1mBEGIN[0m


Processing ServersController#update (for 0.0.0.0 at 2008-04-10 22:38:24) [PUT]
  Session ID: 
  Parameters: {"action"=>"update", "id"=>"1", "controller"=>"servers", "server"=>{}}
  [4;35;1mEarth::Server Load (0.001351)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Server Update (0.001999)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 1[0m
Redirected to http://test.host/servers/show/sboard
Completed in 0.01107 (90 reqs/sec) | DB: 0.00534 (48%) | 302 Found [http://test.host/servers/1?]
  [4;35;1mSQL (0.000932)[0m   [0mROLLBACK[0m
StubController: missing default helper path stub_helper
StubController: missing default helper path stub_helper
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.003236)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.002147)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.002954)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.002509)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.005015)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.001671)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.004225)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::File Indexes (0.005390)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::File Indexes (0.002739)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::File Load (0.001841)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mEarth::File Load (0.001627)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;35;1mSQL (0.002387)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Directory Indexes (0.004320)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Directory Indexes (0.002035)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001931)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002334)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mPK and serial sequence (0.005216)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'files'::regclass
[0m
  [4;35;1mEarth::File Create (0.004033)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(3, E'c', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001745)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mEarth::File Delete all (0.002170)[0m   [0mDELETE FROM files WHERE ("id" IN (2)) [0m
  [4;36;1mSQL (0.001201)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001012)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001629)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001369)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mPK and serial sequence (0.004909)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'directories'::regclass
[0m
  [4;35;1mEarth::Directory Create (0.001735)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.001026)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004549)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001405)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001491)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.001014)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000945)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001319)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001300)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001673)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001696)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'fiddle', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/fiddle', -1, 0)[0m
  [4;35;1mSQL (0.000968)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002668)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001519)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001651)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001630)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001596)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001290)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.002481)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.002511)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 2 AND 9) [0m
  [4;36;1mEarth::Directory Update (0.002161)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 9 THEN 8 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 9 THEN 8 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 9) [0m
  [4;35;1mEarth::Directory Load (0.001537)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.000977)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000628)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001763)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001423)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001403)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001811)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001710)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001440)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.006225)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 1 AND 10) [0m
  [4;36;1mEarth::Directory Update (0.001596)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 10 THEN 10 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 10 THEN 10 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 10) [0m
  [4;35;1mEarth::Directory Load (0.001478)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001757)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001415)[0m   [0mSELECT * FROM directories [0m
  [4;36;1mEarth::File Load (0.001547)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 5) [0m
  [4;35;1mEarth::File Load (0.001556)[0m   [0mSELECT * FROM files WHERE (files."id" = 8) [0m
  [4;36;1mEarth::File Load (0.001447)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 9) [0m
  [4;35;1mEarth::File Load (0.001505)[0m   [0mSELECT * FROM files WHERE (files."id" = 10) [0m
  [4;36;1mEarth::File Load (0.001168)[0m   [0;1mSELECT * FROM files [0m
  [4;35;1mSQL (0.001050)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000606)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001408)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001348)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001307)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;35;1mEarth::Directory Load (0.001317)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;36;1mEarth::Directory Load (0.001466)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;35;1mSQL (0.000790)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000606)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.002957)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.003195)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001394)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001768)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001358)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.002102)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/twiddle') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001506)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;36;1mEarth::Directory Load (0.001594)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001707)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/boo') LIMIT 1[0m
  [4;36;1mSQL (0.000718)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000591)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002486)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001993)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001881)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001485)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001517)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001501)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 6) [0m
  [4;36;1mSQL (0.000939)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000627)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002777)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002940)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000938)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004603)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mEarth::Directory Load (0.001713)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.003239)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001617)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.004108)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.003506)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::File Load (0.002254)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001414)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::File Load (0.002326)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 5) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 5) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001911)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002304)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001517)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mEarth::File Load (0.002588)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000832)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000600)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001430)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001612)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001484)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001355)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;36;1mEarth::Directory Load (0.001343)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Directory Load (0.003724)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.000788)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000598)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001314)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001568)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001530)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mSQL (0.000759)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000674)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001288)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000943)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000588)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002536)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001817)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mEarth::File Load (0.002745)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mSQL (0.001101)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000622)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001352)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001314)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001521)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mSQL (0.000790)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000580)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001314)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001341)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001588)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;35;1mSQL (0.001115)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002842)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mSQL (0.004016)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Server Indexes (0.003951)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Server Indexes (0.002707)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Server Load (0.002147)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Create (0.003923)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/a/root/directory', 1, 'f', NULL, 1, -2, 0, NULL, E'/a/root/directory', -1, 0)[0m
  [4;36;1mSQL (0.000989)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004030)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001021)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000595)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001330)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001515)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 1, -2, 0, NULL, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000866)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003452)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.000810)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000681)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002535)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002296)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001736)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002504)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002626)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001674)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.003472)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mSQL (0.000765)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000616)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001679)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001331)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Server Load (0.001252)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mSQL (0.003563)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000661)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001352)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001396)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Create (0.001472)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;36;1mSQL (0.000954)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003065)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Update (0.001858)[0m   [0;1mUPDATE directories SET "level" = 3, "modified" = NULL, "server_id" = 1, "count" = 0, "name" = E'another', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo/bar/another', "parent_id" = 2 WHERE id = 13[0m
  [4;35;1mEarth::Directory Load (0.002514)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001453)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 13) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001535)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001791)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.000819)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000593)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001707)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000763)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000583)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.001668)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001503)[0m   [0mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;36;1mEarth::File Load (0.001725)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;35;1mEarth::File Load (0.001594)[0m   [0mSELECT * FROM files WHERE (files."id" = 4) [0m
  [4;36;1mEarth::File Load (0.001373)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001426)[0m   [0mSELECT * FROM files WHERE (files."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.002478)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002381)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001585)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002806)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000728)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000576)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001308)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000768)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000742)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.002523)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001664)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001357)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001760)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'wibble', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/wibble', -1, 0)[0m
  [4;35;1mSQL (0.001435)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002840)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001499)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Update (0.001880)[0m   [0;1mUPDATE directories SET "level" = 1, "modified" = '1970-01-01 00:00:00.000000', "server_id" = 1, "count" = 0, "name" = E'name', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo', "parent_id" = NULL WHERE id = 1[0m
  [4;35;1mEarth::Directory Load (0.001415)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001776)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001377)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001529)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002392)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001689)[0m   [0;1mUPDATE directories SET bytes = bytes + 3, blocks = blocks + 2, count = count + 2 WHERE (id in (1)) [0m
  [4;35;1mEarth::Directory Load (0.001459)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000825)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000653)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000973)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000619)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001748)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000786)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000957)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000747)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000820)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000724)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000760)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000861)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000756)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000684)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000756)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000734)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000780)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000729)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.003051)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.000000)[0m   [0mPGError: ERROR: invalid byte sequence for encoding "UTF8": 0xa9
HINT: This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding".
: INSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'©', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.003495)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000693)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001968)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.001784)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.002435)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mSQL (0.001291)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000714)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.001719)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mSQL (0.001038)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.002827)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000870)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000735)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001061)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001133)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000815)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000687)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000843)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001050)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000801)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000944)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000935)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000689)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000780)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000743)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.002919)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000655)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000736)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000571)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001024)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000570)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000925)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000654)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000588)[0m   [0;1mROLLBACK[0m
allow_concurrency=true
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74550e4 @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001824)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.005754)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000871)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000771)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000953)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001491)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000502)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.003451)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.017679)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000877)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000846)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001713)[0m   [0;1mSELECT version()[0m
  [4;35;1mEarth::Directory Load (0.003484)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.011425)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.001185)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.010536)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.003258)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.004328)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.007066)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.004323)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno1', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno1', -1, 0)[0m
  [4;35;1mEarth::File Load (0.005426)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.005113)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mSQL (0.003543)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.008611)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001567)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Update (0.017455)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::File Load (0.002917)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000801)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000576)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001856)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002227)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000856)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000624)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002222)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002722)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.064074)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.002473)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.002535)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.006152)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000701)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002936)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002307)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Create (0.007130)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno2', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno2', -1, 0)[0m
  [4;35;1mSQL (0.005091)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.002804)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mSQL (0.003754)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001348)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Update (0.007646)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.002702)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001502)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.005248)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.003721)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001948)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.004511)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.003108)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.008531)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.003285)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno3', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno3', -1, 0)[0m
  [4;35;1mSQL (0.002603)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002692)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001812)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001475)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.005768)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002396)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.005859)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.004801)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003977)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002356)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Create (0.003801)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno4', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno4', -1, 0)[0m
  [4;36;1mSQL (0.000955)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002626)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::File Load (0.003777)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.005467)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.003850)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.002576)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.002851)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.001348)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002497)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.003660)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001542)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno5', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno5', -1, 0)[0m
  [4;35;1mSQL (0.000869)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004644)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::File Load (0.003175)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002233)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.003733)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002666)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000669)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001366)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001442)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno6', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno6', -1, 0)[0m
  [4;36;1mSQL (0.001952)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003054)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001618)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001492)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000720)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001829)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001493)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno7', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno7', -1, 0)[0m
  [4;35;1mSQL (0.000923)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002835)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001468)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001559)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000657)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001368)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001517)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno8', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno8', -1, 0)[0m
  [4;36;1mSQL (0.001067)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003108)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001600)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001640)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000674)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001599)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001484)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno9', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno9', -1, 0)[0m
  [4;35;1mSQL (0.000870)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002535)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001374)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002118)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.002000)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001636)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001512)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno10', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno10', -1, 0)[0m
  [4;36;1mSQL (0.001349)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002671)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001319)[0m   [0;1mCOMMIT[0m
allow_concurrency=false
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74550e4 @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001058)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000733)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.003347)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000681)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.001962)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000684)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000747)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000598)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000681)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000620)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000697)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000566)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.002829)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.001625)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000589)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001480)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001828)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Directory Load (0.001282)[0m   [0;1mSELECT * FROM directories [0m
  [4;35;1mEarth::Directory Load (0.001920)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001335)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001388)[0m   [0mSELECT * FROM files [0m
  [4;36;1mSQL (0.001012)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000635)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001335)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001366)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003551)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001436)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001415)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002444)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.002817)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001441)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003614)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mSQL (0.000912)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001297)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001688)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003902)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = '2008-04-10 13:10:57.031776' WHERE "id" = 1[0m
  [4;35;1mSQL (0.000787)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000578)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001475)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000906)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000738)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.002717)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mSQL (0.000697)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000697)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.002430)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001242)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002426)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001575)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001382)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002972)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001215)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.002376)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002785)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000761)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000584)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001511)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001859)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Server Load (0.001768)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mPK and serial sequence (0.006311)[0m   [0m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'servers'::regclass
[0m
  [4;36;1mEarth::Server Create (0.001336)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.002745)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.000845)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000584)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001513)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001746)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001758)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001935)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001685)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::Directory Load (0.001759)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;36;1mEarth::Directory Load (0.001882)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) ORDER BY lft[0m
  [4;35;1mSQL (0.003656)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000721)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001392)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001827)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.002751)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001639)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001634)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000933)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001925)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 5, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000965)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004788)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 5 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.002067)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 8) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06807)
  [4;35;1mEarth::File Load (0.001758)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 8) ORDER BY name[0m
Creating file with name file1 (0.00635)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03774)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.118802s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002992)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.004053)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:57.319864', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 5[0m
  [4;36;1mEarth::Directory Load (0.001440)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001900)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001721)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001368)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001612)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001430)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 8) [0m
  [4;36;1mSQL (0.001307)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000671)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001354)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001807)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001347)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.002010)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001235)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000930)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001423)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 6, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.002242)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003865)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 6 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001899)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06495)
  [4;36;1mEarth::File Load (0.001460)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
Creating file with name file1 (0.00789)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04175)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120965s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.002585)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001542)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:57.520077', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001801)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001947)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03635)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00635)
checking for update on file file1
checking for update on file file2
Updating directory with name dir1 (0.01374)
Update cycle took 0.067308s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001794)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001974)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:57.598839', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001474)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002324)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001401)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001979)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 10) and rgt > (select rgt from directories where id = 10) and directories.server_id = 6) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.003387)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (10)) [0m
  [4;36;1mEarth::Directory Load (0.001571)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;35;1mEarth::File Load (0.002793)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002851)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002672)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002253)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002032)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002121)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001700)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001915)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mEarth::Directory Load (0.002466)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;36;1mEarth::Directory Load (0.003855)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mSQL (0.001541)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000825)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001694)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001584)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001226)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001524)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001247)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001145)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002583)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 7, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001222)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003952)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 7 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.002617)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06839)
  [4;35;1mEarth::File Load (0.001426)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
Creating file with name file1 (0.00613)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03799)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.11863s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.004506)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001664)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:57.836955', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001400)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001547)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03682)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00610)
checking for update on file file1
Updating file with name file1 (0.00389)
checking for update on file file2
Updating directory with name dir1 (0.01829)
Update cycle took 0.073896s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002898)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001725)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:57.923591', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001534)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 12) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001581)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001422)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001814)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 12) and rgt > (select rgt from directories where id = 12) and directories.server_id = 7) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001999)[0m   [0;1mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (12)) [0m
  [4;35;1mEarth::Directory Load (0.001495)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;36;1mEarth::File Load (0.002687)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002668)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003410)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001524)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002920)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001682)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001821)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001571)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001651)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;35;1mEarth::Directory Load (0.001414)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mSQL (0.001247)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000691)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001426)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002280)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001220)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.002291)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001257)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001293)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001734)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 8, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000942)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003706)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 8 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001463)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06695)
  [4;36;1mEarth::File Load (0.001585)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
Creating file with name file1 (0.00754)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03855)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.119318s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.002836)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001625)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:58.159465', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001384)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 14) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001653)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 15) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.004725)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002044)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;35;1mEarth::File Load (0.002683)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002294)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002596)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001684)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.002245)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 14) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.42375)
  [4;36;1mEarth::File Load (0.001543)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04524)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.480588s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001583)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001507)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:58.681064', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001812)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001880)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001485)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;36;1mSQL (0.003393)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000685)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001894)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001466)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001886)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001803)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002115)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000999)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002793)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 9, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001568)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004402)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 9 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001919)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06652)
  [4;36;1mEarth::File Load (0.001651)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
Creating file with name file1 (0.00629)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04106)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120185s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001582)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001810)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:58.878071', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001351)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001510)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001610)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001803)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002759)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002502)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.003394)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001705)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001830)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.04688)
  [4;36;1mEarth::File Load (0.001839)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04481)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00742)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.112431s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001825)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001765)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:59.028218', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.002783)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001738)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001591)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::Directory Load (0.001657)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001918)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002444)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001824)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001531)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001539)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001283)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.002058)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001582)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001918)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001369)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::File Load (0.002399)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002798)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002280)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003495)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001464)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.001422)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04646)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file1 (0.00642)
checking for update on file sub-file1
Updating directory with name subdir (0.01505)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.01080)
Update cycle took 0.097497s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001959)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001725)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:59.223332', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::File Load (0.002041)[0m   [0;1mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001475)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;36;1mEarth::Directory Load (0.003061)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001856)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001438)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;35;1mEarth::File Load (0.001781)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001409)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001843)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002623)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001480)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001392)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002802)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002378)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.003159)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002881)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001739)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001664)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.003224)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.003756)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002014)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003164)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001421)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001993)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.002186)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04813)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file2 (0.00660)
Creating file with name sub-file3 (0.00575)
checking for update on file sub-file1
checking for update on file sub-file2
checking for update on file sub-file3
Updating directory with name subdir (0.01533)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00791)
Update cycle took 0.099323s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002133)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001999)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:59.435807', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::Directory Load (0.001542)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001472)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001836)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::Directory Load (0.001396)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002214)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001461)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001371)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002585)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.005135)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002692)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mSQL (0.001367)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000879)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001862)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001727)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001661)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.002045)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001246)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001100)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002826)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 10, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001155)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004784)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 10 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001752)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 20) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04693)
  [4;36;1mEarth::File Load (0.002043)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
Creating file with name file1 (0.00778)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03148)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.09301s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001514)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001628)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:10:59.620891', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 10[0m
  [4;35;1mEarth::Directory Load (0.001725)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 20) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001388)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001442)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001842)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mEarth::File Load (0.005050)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002876)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002376)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001860)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001713)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001976)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001422)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mSQL (0.001045)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000641)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001360)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001504)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001346)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001837)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001766)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000898)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002047)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 11, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001100)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005584)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 11 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001747)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 22) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.25358)
  [4;35;1mEarth::File Load (0.001387)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
Creating file with name file1 (0.00724)
Creating file with name .an_invisible_file (0.00600)
checking for update on file file1
checking for update on file .an_invisible_file
Updating directory with name /home/ssurfer/earth/test_data (0.04899)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.323444s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001734)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001502)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.044746', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 11[0m
  [4;36;1mEarth::Directory Load (0.001636)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 22) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001574)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 23) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002741)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001437)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 22) [0m
  [4;36;1mEarth::File Load (0.002752)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002280)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002230)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001635)[0m   [0mSELECT * FROM files WHERE (files."name" = E'.an_invisible_file') LIMIT 1[0m
  [4;36;1mSQL (0.000871)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000631)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001545)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001874)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001183)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001675)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001198)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000906)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001462)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 12, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000984)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.005343)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 12 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001683)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'random') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001395)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'random', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001190)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002138)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data_2', 13, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data_2', -1, 0)[0m
  [4;35;1mSQL (0.000920)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004104)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 13 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002166)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001528)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001485)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.00821)
Update cycle took 0.013165s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001854)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002022)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.167242', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::File Load (0.001327)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
  [4;35;1mEarth::Directory Update (0.004309)[0m   [0mUPDATE directories SET "level" = 1, "modified" = '2008-04-10 13:10:59.000000', "server_id" = 13, "count" = 0, "name" = E'/home/ssurfer/earth/test_data_2', "bytes" = 0, "cache_valid" = 't', "blocks" = 0, "path" = E'/home/ssurfer/earth/test_data_2', "parent_id" = NULL WHERE id = 25[0m
  [4;36;1mEarth::Directory Load (0.001498)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 25) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001669)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001857)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/jfcbwr
create directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
  [4;35;1mEarth::Directory Load (0.001349)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001341)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001365)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002972s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002560)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001460)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.209817', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001404)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002115)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
delete directory /home/ssurfer/earth/test_data_2/jfcbwr
  [4;36;1mEarth::Directory Load (0.001377)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001329)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001595)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003126s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002057)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002515)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.235709', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002024)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001919)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
  [4;35;1mEarth::Directory Load (0.001405)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001479)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.002532)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004059s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.004030)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001716)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.264946', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001671)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002238)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy/kmwmyjs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
  [4;36;1mEarth::Directory Load (0.001351)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001834)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001315)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003363s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001547)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001477)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.292707', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001394)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002173)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/hzfnsu/fwfj
  [4;35;1mEarth::Directory Load (0.002373)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001325)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001861)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003804s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001552)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001534)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.321957', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001351)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001811)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam
  [4;36;1mEarth::Directory Load (0.001519)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001487)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.003766)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.005458s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001715)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001863)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.352687', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001336)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002023)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam/hehs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn/mfrctyqjdft
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl
  [4;35;1mEarth::Directory Load (0.001490)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001726)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001601)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003319s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001653)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001844)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.382430', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001472)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001829)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001337)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001306)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003104s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001919)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002571)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.408039', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001772)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002119)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001559)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001387)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001278)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003029s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.004518)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001774)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.436611', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001596)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002103)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vfqakcktrzt
create directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/mon/drmzomkci
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/qy
  [4;36;1mEarth::Directory Load (0.001772)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002194)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001272)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003198s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001608)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001535)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.465813', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001360)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002621)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
delete directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/lcifqeg
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001638)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.002541)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004289s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002198)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001524)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.496716', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001433)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002117)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/ni
  [4;36;1mEarth::Directory Load (0.004873)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001371)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001291)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00305s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001515)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001507)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.529125', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002048)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001835)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo
  [4;35;1mEarth::Directory Load (0.001336)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001487)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001325)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003308s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002014)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002511)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.556030', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001600)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002176)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
  [4;36;1mEarth::Directory Load (0.001535)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001422)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001589)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00343s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002552)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002013)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.582919', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001360)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001986)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
delete directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/zdri
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz
create directory /home/ssurfer/earth/test_data_2/qd
create directory /home/ssurfer/earth/test_data_2/qg
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;35;1mEarth::Directory Load (0.003783)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002165)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001276)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003334s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001529)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001562)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.613783', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.003031)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001833)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw
  [4;36;1mEarth::Directory Load (0.001601)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001416)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002496)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004224s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.003194)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001598)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.644659', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001582)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002559)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt
  [4;35;1mEarth::Directory Load (0.002099)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001322)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001313)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003419s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001584)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001536)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.672837', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001546)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.004513)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh
  [4;36;1mEarth::Directory Load (0.001607)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001345)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001305)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.0031s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001799)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002676)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.703933', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001387)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002370)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl
  [4;35;1mEarth::Directory Load (0.001732)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001326)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.062701)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.064537s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002143)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001580)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.800616', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.002269)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002072)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy
  [4;36;1mEarth::Directory Load (0.001442)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001525)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001672)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003411s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001529)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001707)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.830463', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001694)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001830)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs
  [4;35;1mEarth::Directory Load (0.001361)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001791)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001307)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003633s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001538)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001891)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.860948', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001355)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001833)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
delete directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;36;1mEarth::Directory Load (0.001771)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001362)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001269)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003043s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002140)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001819)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.896466', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001434)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002312)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
  [4;35;1mEarth::Directory Load (0.002291)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001696)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001307)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003286s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001522)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001577)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.925530', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001368)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002269)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
  [4;36;1mEarth::Directory Load (0.002652)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001729)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001320)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.005414s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001963)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002813)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.963141', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001666)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002123)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001883)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001421)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:00 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003275s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001986)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001726)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:00.991173', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001600)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002159)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd/zvci
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw
  [4;36;1mEarth::Directory Load (0.001772)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001532)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are ["pmhklgudtco", "zdri", "qg", "qd"]
  [4;36;1mEarth::Directory Load (0.001721)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco (0.82142)
Creating directory /home/ssurfer/earth/test_data_2/zdri (0.24945)
Creating directory /home/ssurfer/earth/test_data_2/qg (0.05391)
Creating directory /home/ssurfer/earth/test_data_2/qd (0.05541)
  [4;35;1mEarth::File Load (0.001333)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.02122)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd/zvci -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
Update cycle took 1.219811s, remaining_count is -23
  [4;36;1mEarth::Server Load (0.001907)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001724)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:02.239123', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001614)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002927)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql
  [4;36;1mEarth::Directory Load (0.001391)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001465)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001755)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001719)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;36;1mEarth::Directory Load (0.001776)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["fplptb", "ojhl", "nyzmaakac"]
  [4;35;1mEarth::Directory Load (0.001643)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
  [4;36;1mEarth::File Load (0.001491)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 31) ORDER BY name[0m
Removing directory with name rfwvd (0.01593)
Updating directory with name tfz (0.01866)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001425)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:41:02 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001595)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed, subdirectories are ["df", "zwvglrwnp"]
  [4;35;1mEarth::Directory Load (0.001492)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp (0.05824)
  [4;36;1mEarth::File Load (0.001605)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 35) ORDER BY name[0m
Updating directory with name hahmrbpuujs (0.01854)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
  [4;35;1mEarth::Directory Load (0.001666)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed, subdirectories are ["mumvun"]
  [4;36;1mEarth::Directory Load (0.001620)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun (0.09003)
  [4;35;1mEarth::File Load (0.001353)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 34) ORDER BY name[0m
Updating directory with name rwxclpevl (0.14669)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;36;1mEarth::Directory Load (0.001570)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
  [4;35;1mEarth::Directory Load (0.002176)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001977)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001598)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;36;1mEarth::Directory Load (0.001468)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001591)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001551)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001596)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
  [4;36;1mEarth::Directory Load (0.001433)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.002539)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001580)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001463)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
Update cycle took 0.455054s, remaining_count is -24
  [4;35;1mEarth::Server Load (0.001730)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002164)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:02.723635', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001891)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001893)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
  [4;35;1mEarth::Directory Load (0.001580)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001659)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.002368)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001613)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001543)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.002965)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.002794)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
  [4;36;1mEarth::Directory Load (0.002474)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001587)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001452)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001470)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001596)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.001954)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
  [4;36;1mEarth::Directory Load (0.001371)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;35;1mEarth::Directory Load (0.001562)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001391)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;35;1mEarth::Directory Load (0.001501)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
  [4;36;1mEarth::Directory Load (0.002040)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001515)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:41:02 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001922)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:41:02 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001838)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001519)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
  [4;36;1mEarth::File Load (0.051392)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 49) ORDER BY name[0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
  [4;35;1mEarth::Directory Load (0.001702)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001574)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001700)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 50) [0m
  [4;36;1mEarth::File Load (0.001584)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 50) ORDER BY name[0m
Removing directory with name dotzlmrvuy (0.01661)
Updating directory with name mumvun (0.00921)
Update cycle took 0.333724s, remaining_count is -23
  [4;35;1mEarth::Server Load (0.001763)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001884)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:03.085932', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001433)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002211)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001633)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001766)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001730)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001580)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.003994)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001751)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
  [4;36;1mEarth::Directory Load (0.001407)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001601)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001536)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001514)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001480)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.002107)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
  [4;36;1mEarth::Directory Load (0.002577)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;35;1mEarth::Directory Load (0.001460)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;35;1mEarth::Directory Load (0.001653)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
  [4;36;1mEarth::Directory Load (0.002299)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;35;1mEarth::Directory Load (0.001947)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed, subdirectories are ["rwxclpevl", "mbvbwuw", "hahmrbpuujs"]
  [4;36;1mEarth::Directory Load (0.001574)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw (0.09424)
  [4;35;1mEarth::File Load (0.001815)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
Updating directory with name ojhl (0.01847)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001907)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> not changed
  [4;35;1mEarth::Directory Load (0.002441)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 50) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed, subdirectories are ["df"]
  [4;36;1mEarth::Directory Load (0.002179)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
  [4;35;1mEarth::File Load (0.001393)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 35) ORDER BY name[0m
Removing directory with name zwvglrwnp (0.01347)
Updating directory with name hahmrbpuujs (0.01157)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
  [4;36;1mEarth::Directory Load (0.001415)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001752)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
Update cycle took 0.245716s, remaining_count is -24
  [4;36;1mEarth::Server Load (0.002773)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001881)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:03.359180', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001392)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.004654)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht
  [4;36;1mEarth::Directory Load (0.004418)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001668)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001849)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001614)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.001740)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001925)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.001618)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
  [4;35;1mEarth::Directory Load (0.002528)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001885)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001867)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001828)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001473)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;36;1mEarth::Directory Load (0.001526)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
  [4;35;1mEarth::Directory Load (0.001611)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001889)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001608)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;36;1mEarth::Directory Load (0.001391)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
  [4;35;1mEarth::Directory Load (0.001555)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;36;1mEarth::Directory Load (0.001426)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;35;1mEarth::Directory Load (0.002102)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed less than 1 second ago (Thu Apr 10 22:41:03 +0930 2008)
  [4;36;1mEarth::Directory Load (0.003904)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> changed less than 1 second ago (Thu Apr 10 22:41:03 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001413)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 50) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw -> not changed
  [4;36;1mEarth::Directory Load (0.001589)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql -> not changed
  [4;35;1mEarth::Directory Load (0.001931)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:41:03 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001465)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
  [4;35;1mEarth::Directory Load (0.001402)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001969)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
Update cycle took 0.101104s, remaining_count is -24
  [4;35;1mEarth::Server Load (0.002013)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002202)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:03.491646', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001502)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001891)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mSQL (0.002271)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000903)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001924)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.003842)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001388)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001944)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001955)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001083)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002997)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 14, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001005)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.006491)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 14 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Server Load (0.001954)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'late_cache') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.002394)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'late_cache', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001063)[0m   [0;1mSELECT currval('servers_id_seq')[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.00258)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Update cycle took 0.005368s, remaining_count is -1
  [4;35;1mEarth::Directory Create (0.002356)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 15, 'f', NULL, 1, -4, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001197)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002331)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'dir1', 15, 'f', NULL, 2, -3, 0, 55, E'/home/ssurfer/earth/test_data/dir1', -2, 0)[0m
  [4;36;1mSQL (0.001068)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004331)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END) WHERE (directories.server_id = 15 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001852)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 55) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating file with name file1 (0.00700)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.02919)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file1 (0.00685)
checking for update on file file1
Updating directory with name dir1 (0.01532)
Update cycle took 0.065479s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001866)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001805)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:03.664998', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 14[0m
  [4;35;1mEarth::Directory Load (0.001437)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 54) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002085)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 54) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001542)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 54) [0m
  [4;36;1mEarth::File Load (0.002745)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 54) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 54) AND directories.server_id = 14) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002406)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 54) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 54) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002302)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 54) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 54) AND directories.server_id = 14) LIMIT 1[0m
  [4;35;1mSQL (0.001212)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000618)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001640)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001585)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.002509)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001758)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001251)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001313)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.005171)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 16, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000925)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003773)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 16 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001487)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 57) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04634)
  [4;35;1mEarth::File Load (0.002026)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 57) ORDER BY name[0m
Creating file with name file1 (0.00769)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03732)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.098462s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001548)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001667)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:03.840627', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 16[0m
  [4;36;1mEarth::Directory Load (0.001613)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 57) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001423)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 58) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001925)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 57) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002447)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 57) [0m
  [4;36;1mEarth::File Load (0.002554)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 57) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 57) AND directories.server_id = 16) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002358)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 57) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 57) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002391)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 57) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 57) AND directories.server_id = 16) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001637)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001780)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001836)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001522)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001374)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 57) [0m
  [4;36;1mSQL (0.000963)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000823)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001401)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001522)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001388)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001487)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001226)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.002086)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002601)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 17, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000933)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.007151)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 17 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002147)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 59) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir2b", "dir1", "dir2a"]
Creating directory /home/ssurfer/earth/test_data/dir2b (0.09835)
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06427)
Creating directory /home/ssurfer/earth/test_data/dir2a (0.06727)
  [4;36;1mEarth::File Load (0.001931)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 59) ORDER BY name[0m
Creating file with name file1 (0.00652)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.08357)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2a -> not changed
Update cycle took 0.327695s, remaining_count is -3
  [4;35;1mEarth::Server Load (0.001612)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003249)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:04.271901', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;35;1mEarth::Directory Load (0.001629)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 59) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 4
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001470)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 59) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir2b (0.01047)
Removing directory with name dir2a (0.00911)
Updating directory with name /home/ssurfer/earth/test_data (0.03873)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.064818s, remaining_count is 2
  [4;35;1mEarth::Server Load (0.001781)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001503)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:04.350255', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;35;1mEarth::Directory Load (0.002760)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 59) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001488)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 61) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001385)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 59) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001761)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 59) [0m
  [4;35;1mEarth::File Load (0.002993)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 59) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 59) AND directories.server_id = 17) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002643)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 59) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 59) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002572)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 59) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 59) AND directories.server_id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002491)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001783)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002047)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002079)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.003799)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 61) [0m
  [4;35;1mEarth::Directory Load (0.001417)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 59) [0m
  [4;36;1mSQL (0.001248)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000964)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001722)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002036)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001870)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001485)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001621)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001273)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.003000)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 18, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000987)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003897)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 18 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001675)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 63) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06555)
  [4;36;1mEarth::File Load (0.001587)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 63) ORDER BY name[0m
Creating file with name file1 (0.00602)
Creating file with name file1b (0.10098)
Creating file with name file1a (0.10689)
checking for update on file file1
checking for update on file file1b
checking for update on file file1a
Updating directory with name /home/ssurfer/earth/test_data (0.04755)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.33392s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001635)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001526)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:04.790556', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;35;1mEarth::Directory Load (0.001415)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 63) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001791)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 63) ORDER BY name[0m
checking for update on file file1
Removing file with name file1a (0.00236)
Removing file with name file1b (0.00468)
Updating directory with name /home/ssurfer/earth/test_data (0.03448)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.049586s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001714)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002150)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:04.851584', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;35;1mEarth::Directory Load (0.002457)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001768)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002098)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001511)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001351)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 64) [0m
  [4;36;1mEarth::Directory Load (0.001837)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 63) [0m
  [4;35;1mSQL (0.000974)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000836)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001676)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.003066)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001212)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.004937)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001825)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001915)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.004028)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 19, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000952)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004331)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 19 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001541)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 65) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "dir_a"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06512)
Creating directory /home/ssurfer/earth/test_data/dir_a (0.49734)
  [4;35;1mEarth::File Load (0.002931)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 65) ORDER BY name[0m
Creating file with name file1 (0.00673)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.06365)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d -> not changed
Update cycle took 0.644111s, remaining_count is -9
  [4;36;1mEarth::Server Load (0.002331)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001567)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:05.576792', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;36;1mEarth::Directory Load (0.001805)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002442)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001858)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002305)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001768)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001907)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002112)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001769)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001843)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002171)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001802)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001945)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 65) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 10
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001489)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 65) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir_a (0.01730)
Updating directory with name /home/ssurfer/earth/test_data (0.04598)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.071369s, remaining_count is 8
  [4;35;1mEarth::Server Load (0.001715)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001784)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:05.718920', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;35;1mSQL (0.001354)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000721)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001438)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.002246)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.002016)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001736)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001369)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001221)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002380)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 20, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000969)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004935)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 20 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001623)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 75) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.25150)
  [4;35;1mEarth::File Load (0.001551)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 75) ORDER BY name[0m
Creating file with name file1 (0.00606)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03853)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.302433s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002105)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001649)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:06.077561', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;36;1mEarth::Directory Load (0.001463)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 75) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001772)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 75) ORDER BY name[0m
Removing file with name file1 (0.00284)
Removing directory with name dir1 (0.00845)
Updating directory with name /home/ssurfer/earth/test_data (0.00970)
Update cycle took 0.026851s, remaining_count is 1
  [4;36;1mEarth::Server Load (0.002587)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002859)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:06.119496', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;36;1mEarth::Directory Load (0.001630)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 75) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001536)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 75) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001533)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 75) [0m
  [4;35;1mEarth::File Load (0.003037)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 75) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 75) AND directories.server_id = 20) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002239)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 75) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 75) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002238)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 75) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 75) AND directories.server_id = 20) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001455)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001817)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002325)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mSQL (0.001078)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000645)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001381)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001966)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001381)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.004374)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001415)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000951)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001611)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 21, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000966)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004907)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 21 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001947)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 77) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.12324)
  [4;35;1mEarth::File Load (0.001636)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 77) ORDER BY name[0m
Creating file with name file1 (0.00630)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04430)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1/dir2 -> not changed
Update cycle took 0.180195s, remaining_count is -2
  [4;36;1mEarth::Server Load (0.002776)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001612)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:06.387978', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;36;1mEarth::Directory Load (0.001816)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 77) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001747)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 77) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir1 (0.01083)
Updating directory with name /home/ssurfer/earth/test_data (0.02149)
Update cycle took 0.03795s, remaining_count is 2
  [4;36;1mEarth::Server Load (0.001963)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001581)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:06.438008', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;36;1mEarth::Directory Load (0.001389)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 77) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001373)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 77) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001761)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 77) [0m
  [4;35;1mEarth::File Load (0.002723)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 77) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 77) AND directories.server_id = 21) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003320)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 77) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 77) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002339)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 77) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 77) AND directories.server_id = 21) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002111)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001376)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001758)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 77) [0m
  [4;36;1mSQL (0.001219)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000756)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001440)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001918)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001291)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001838)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001803)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000912)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002941)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 22, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.004191)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004369)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 22 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001881)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 80) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06453)
  [4;36;1mEarth::File Load (0.001615)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 80) ORDER BY name[0m
Creating file with name file1 (0.00606)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03833)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.118268s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.002264)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001506)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:06.646445', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;35;1mEarth::Directory Load (0.001390)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 80) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001495)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 80) ORDER BY name[0m
Removing file with name file1 (0.00247)
Removing directory with name dir1 (0.00881)
Update cycle took 0.017198s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.002020)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001793)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:06.675891', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;35;1mEarth::Directory Load (0.003791)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 80) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001689)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 80) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001879)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 80) and rgt > (select rgt from directories where id = 80) and directories.server_id = 22) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001802)[0m   [0;1mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -2 WHERE (id in (80)) [0m
  [4;35;1mEarth::Directory Load (0.002078)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 80) [0m
  [4;36;1mEarth::File Load (0.002371)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 80) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 80) AND directories.server_id = 22) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002617)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 80) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 80) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002260)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 80) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 80) AND directories.server_id = 22) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001418)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::File Load (0.001267)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mSQL (0.000879)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000663)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.001156)[0m   [0mSHOW search_path[0m
  [4;36;1mSQL (0.004827)[0m   [0;1m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;35;1mSQL (0.002578)[0m   [0mDELETE FROM servers[0m
  [4;36;1mSQL (0.001011)[0m   [0;1mDELETE FROM file_metadata_strings[0m
  [4;35;1mSQL (0.001071)[0m   [0mDELETE FROM files[0m
  [4;36;1mSQL (0.001567)[0m   [0;1mDELETE FROM directories[0m
  [4;35;1mSQL (0.001600)[0m   [0mDELETE FROM plugin_descriptors[0m
  [4;36;1mSQL (0.001417)[0m   [0;1mDELETE FROM metadata_strings[0m
  [4;35;1mSQL (0.001580)[0m   [0mDELETE FROM metadata_attributes[0m
  [4;36;1mSQL (0.001375)[0m   [0;1mDELETE FROM schema_info[0m
  [4;35;1mEarth::Server Create (0.002535)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'duck.local', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000993)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Server Create (0.002699)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'rincewind.local', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001274)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mSQL (0.000942)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000783)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000682)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000847)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000686)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000568)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000680)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000604)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000714)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000836)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000685)[0m   [0mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001272)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.001039)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000725)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000732)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001496)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000510)[0m   [0mBEGIN[0m


Processing BrowserController#index (for 0.0.0.0 at 2008-04-10 22:41:10) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"browser"}
Redirected to http://test.host/browser/show
Completed in 0.00981 (101 reqs/sec) | DB: 0.00577 (58%) | 302 Found [http://test.host/]
  [4;36;1mSQL (0.000916)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000577)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000925)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000584)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:10) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo"]}
  [4;36;1mSQL (0.004169)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Server Indexes (0.005514)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Server Indexes (0.002656)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Server Load (0.002796)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.003776)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Directory Indexes (0.004542)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Directory Indexes (0.001966)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Directory Load (0.001831)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001629)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 1) [0m
  [4;35;1mSQL (0.002346)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::File Indexes (0.004667)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::File Indexes (0.002175)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001917)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::File Load (0.003226)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000900)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.003972)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;36;1mSQL (0.002210)[0m   [0;1m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;35;1mEarth::Directory Load (0.002882)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002788)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02418)
Completed in 0.20075 (4 reqs/sec) | Rendering: 0.09942 (49%) | DB: 0.05896 (29%) | 200 OK [http://test.host/browser/show/sboard/foo]
  [4;35;1mEarth::Directory Load (0.001538)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001668)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002362)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001523)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001022)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser"}
  [4;36;1mEarth::Server Load (0.001299)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001482)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002698)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003538)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003622)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02251)
Completed in 0.08531 (11 reqs/sec) | Rendering: 0.05808 (68%) | DB: 0.02075 (24%) | 200 OK [http://test.host/browser/show]
  [4;36;1mSQL (0.000850)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000605)[0m   [0mBEGIN[0m


Processing BrowserController#flat (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"action"=>"flat", "controller"=>"browser"}
  [4;36;1mSQL (0.001459)[0m   [0;1mSHOW max_identifier_length[0m
  [4;35;1mSQL (0.002688)[0m   [0mSELECT count(*) AS count_all FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') [0m
  [4;36;1mEarth::File Load (0.002377)[0m   [0;1mSELECT files.name as name, files.directory_id as directory_id, files.modified as modified, files.bytes as bytes, files.uid as uid FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') ORDER BY bytes desc LIMIT 25 OFFSET 0[0m
Rendering template within layouts/application
Rendering browser/flat
  [4;35;1mEarth::Directory Load (0.001387)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Server Load (0.001416)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001868)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001498)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Server Load (0.001369)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002257)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 5) and rgt > (select rgt from directories where id = 5) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001465)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001949)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Load (0.002792)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001955)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Server Load (0.001206)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mEarth::Directory Load (0.001773)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002808)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002311)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002476)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03163)
Completed in 0.18585 (5 reqs/sec) | Rendering: 0.14597 (78%) | DB: 0.03651 (19%) | 200 OK [http://test.host/browser/flat]
  [4;36;1mSQL (0.000899)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000666)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001599)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001955)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002388)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01516)
Completed in 0.21476 (4 reqs/sec) | Rendering: 0.19863 (92%) | DB: 0.00751 (3%) | 200 OK [http://test.host/browser/show/sboard]
  [4;35;1mEarth::Server Load (0.001401)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mSQL (0.000921)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000625)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001953)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002154)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001693)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001748)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.003574)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering browser/show
  [4;35;1mEarth::File Load (0.004058)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 2) ORDER BY name[0m
Completed in 0.03782 (26 reqs/sec) | Rendering: 0.01000 (26%) | DB: 0.01813 (47%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;36;1mEarth::Directory Load (0.001595)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.001435)[0m   [0mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001368)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002814)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000825)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000623)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001880)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002102)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001814)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001473)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.002746)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Sending data earth_report.csv
Completed in 0.02290 (43 reqs/sec) | Rendering: 0.00030 (1%) | DB: 0.01868 (81%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;35;1mEarth::Directory Load (0.001364)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000843)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001090)[0m   [0mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph"}
Rendering template within layouts/application
Rendering graph/index
  [4;36;1mEarth::Server Load (0.001432)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001547)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002425)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003689)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003276)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03438)
Completed in 0.07142 (14 reqs/sec) | Rendering: 0.05234 (73%) | DB: 0.01567 (21%) | 200 OK [http://test.host/graph]
  [4;35;1mSQL (0.000849)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000628)[0m   [0;1mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;35;1mEarth::Server Load (0.001570)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001831)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
Rendering template within layouts/application
Rendering graph/index
  [4;35;1mEarth::Directory Load (0.002301)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 4) and rgt > (select rgt from directories where id = 4) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002719)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02338)
Completed in 0.06116 (16 reqs/sec) | Rendering: 0.04736 (77%) | DB: 0.00990 (16%) | 200 OK [http://test.host/graph/sboard/foo/bar/twiddle/frob]
  [4;35;1mSQL (0.000863)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000619)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"filter_filename"=>"*.zip", "action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001779)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001830)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003224)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002732)[0m   [0;1mSELECT * FROM files WHERE (files.name LIKE E'%.zip') AND (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
Rendering graph/directory.rxml
Completed in 0.10629 (9 reqs/sec) | Rendering: 0.07801 (73%) | DB: 0.01105 (10%) | 200 OK [http://test.host/graph/show/sboard/foo?filter_filename=%2A.zip]
  [4;35;1mSQL (0.000820)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000631)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:11) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001948)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001982)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002130)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003551)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
  [4;35;1mEarth::Directory Load (0.001566)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.13131 (7 reqs/sec) | Rendering: 0.10495 (79%) | DB: 0.01263 (9%) | 200 OK [http://test.host/graph/show/sboard/foo]
  [4;36;1mSQL (0.000826)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000742)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph"}
  [4;36;1mEarth::Server Load (0.001155)[0m   [0;1mSELECT * FROM servers [0m
Rendering graph/servers.rxml
  [4;35;1mEarth::Directory Load (0.001794)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002417)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002421)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002794)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.08104 (12 reqs/sec) | Rendering: 0.06864 (84%) | DB: 0.01215 (14%) | 200 OK [http://test.host/graph/show]
  [4;35;1mSQL (0.000862)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000602)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard"}
  [4;35;1mEarth::Server Load (0.001533)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001790)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.001994)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003167)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 1 AND lft >= 0 AND rgt <= 11)) [0m
  [4;35;1mEarth::Directory Load (0.001875)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (5)) [0m
Rendering graph/directory.rxml
Completed in 0.10566 (9 reqs/sec) | Rendering: 0.07497 (70%) | DB: 0.01182 (11%) | 200 OK [http://test.host/graph/show/sboard]
  [4;36;1mSQL (0.000809)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000754)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;36;1mEarth::Server Load (0.001593)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002025)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002235)[0m   [0;1mSELECT * FROM directories WHERE (directories.level <= 9 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 4)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 4))) ORDER BY directories.lft[0m
  [4;35;1mEarth::File Load (0.002090)[0m   [0mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 8 AND server_id = 1 AND lft >= 4 AND rgt <= 7)) [0m
  [4;36;1mEarth::Directory Load (0.001250)[0m   [0;1mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
  [4;35;1mEarth::Directory Load (0.001571)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
Completed in 0.06182 (16 reqs/sec) | Rendering: 0.03969 (64%) | DB: 0.01233 (19%) | 200 OK [http://test.host/graph/show/sboard/foo/bar/twiddle/frob]
  [4;36;1mSQL (0.000775)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000598)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.003425)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"server3"}
  [4;35;1mEarth::Server Load (0.002037)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'server3') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001469)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.002096)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 3 AND (directories.lft > (SELECT lft FROM directories WHERE id = 7)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 7))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003455)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 3 AND lft >= 0 AND rgt <= 3)) [0m
  [4;35;1mEarth::Directory Load (0.001215)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.05825 (17 reqs/sec) | Rendering: 0.03435 (58%) | DB: 0.01507 (25%) | 200 OK [http://test.host/graph/show/server3]
  [4;36;1mSQL (0.000784)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000897)[0m   [0mBEGIN[0m


Processing ServersController#edit (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"edit", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001771)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/edit
Completed in 0.04151 (24 reqs/sec) | Rendering: 0.03262 (78%) | DB: 0.00345 (8%) | 200 OK [http://test.host/servers/edit/sboard]
  [4;35;1mSQL (0.000941)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000602)[0m   [0;1mBEGIN[0m


Processing ServersController#index (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"servers"}
  [4;35;1mEarth::Server Load (0.001207)[0m   [0mSELECT * FROM servers [0m
Rendering template within layouts/servers
Rendering servers/index
  [4;36;1mEarth::Directory Load (0.001540)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002576)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002353)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.004085)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.05836 (17 reqs/sec) | Rendering: 0.04433 (75%) | DB: 0.01330 (22%) | 200 OK [http://test.host/servers]
  [4;36;1mSQL (0.000926)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000771)[0m   [0mBEGIN[0m


Processing ServersController#show (for 0.0.0.0 at 2008-04-10 22:41:12) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001733)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/show
  [4;35;1mEarth::Directory Load (0.001473)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mSQL (0.002071)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;35;1mEarth::Directory Load (0.001579)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002348)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002003)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (directories.server_id = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
Completed in 0.07201 (13 reqs/sec) | Rendering: 0.05763 (80%) | DB: 0.01290 (17%) | 200 OK [http://test.host/servers/show/sboard]
  [4;35;1mSQL (0.001053)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000605)[0m   [0;1mBEGIN[0m


Processing ServersController#update (for 0.0.0.0 at 2008-04-10 22:41:12) [PUT]
  Session ID: 
  Parameters: {"action"=>"update", "id"=>"1", "controller"=>"servers", "server"=>{}}
  [4;35;1mEarth::Server Load (0.001616)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Server Update (0.001961)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 1[0m
Redirected to http://test.host/servers/show/sboard
Completed in 0.00953 (104 reqs/sec) | DB: 0.00523 (54%) | 302 Found [http://test.host/servers/1?]
  [4;35;1mSQL (0.000883)[0m   [0mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001294)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000790)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.002118)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000693)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001979)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.001189)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.004325)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::File Indexes (0.005685)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::File Indexes (0.002811)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::File Load (0.002552)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mEarth::File Load (0.001611)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;35;1mSQL (0.002716)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Directory Indexes (0.004546)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Directory Indexes (0.002040)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.002029)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002272)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mPK and serial sequence (0.008569)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'files'::regclass
[0m
  [4;35;1mEarth::File Create (0.001476)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(3, E'c', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.002659)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mEarth::File Delete all (0.001909)[0m   [0mDELETE FROM files WHERE ("id" IN (2)) [0m
  [4;36;1mSQL (0.000945)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000604)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001334)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001730)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mPK and serial sequence (0.005188)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'directories'::regclass
[0m
  [4;35;1mEarth::Directory Create (0.002830)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000904)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004814)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001474)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.002373)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.000882)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000596)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001487)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001891)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.002607)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001524)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'fiddle', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/fiddle', -1, 0)[0m
  [4;35;1mSQL (0.000947)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003404)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001510)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001422)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001584)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001396)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001345)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001748)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.002312)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 2 AND 9) [0m
  [4;36;1mEarth::Directory Update (0.002070)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 9 THEN 8 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 9 THEN 8 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 9) [0m
  [4;35;1mEarth::Directory Load (0.001317)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.000851)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000627)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001526)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001317)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001396)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001355)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001448)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.005346)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001591)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.001913)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 1 AND 10) [0m
  [4;36;1mEarth::Directory Update (0.001529)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 10 THEN 10 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 10 THEN 10 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 10) [0m
  [4;35;1mEarth::Directory Load (0.001446)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001712)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001260)[0m   [0mSELECT * FROM directories [0m
  [4;36;1mEarth::File Load (0.001789)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 5) [0m
  [4;35;1mEarth::File Load (0.001577)[0m   [0mSELECT * FROM files WHERE (files."id" = 8) [0m
  [4;36;1mEarth::File Load (0.001368)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 9) [0m
  [4;35;1mEarth::File Load (0.001758)[0m   [0mSELECT * FROM files WHERE (files."id" = 10) [0m
  [4;36;1mEarth::File Load (0.001163)[0m   [0;1mSELECT * FROM files [0m
  [4;35;1mSQL (0.000811)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000627)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001418)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001301)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001275)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001497)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;35;1mEarth::Directory Load (0.001547)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;36;1mEarth::Directory Load (0.001279)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;35;1mSQL (0.000857)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000581)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001342)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002027)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001374)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.004133)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001970)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001660)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/twiddle') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001409)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;36;1mEarth::Directory Load (0.001785)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/boo') LIMIT 1[0m
  [4;36;1mSQL (0.000810)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000616)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001356)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001583)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001704)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001276)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001351)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001341)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 6) [0m
  [4;36;1mSQL (0.001265)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000617)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002664)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003262)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000989)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.006049)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mEarth::Directory Load (0.001505)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002377)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.004011)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002319)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001491)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::File Load (0.002381)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001384)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::File Load (0.002169)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 5) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 5) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001354)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.004235)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001326)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mEarth::File Load (0.002547)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000851)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000685)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001379)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001353)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001879)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001395)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;36;1mEarth::Directory Load (0.001356)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Directory Load (0.003399)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.000858)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000586)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001780)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001533)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.004795)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mSQL (0.000982)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000581)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001420)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000778)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000615)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001313)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001967)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mEarth::File Load (0.001598)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mSQL (0.000839)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000590)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001415)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001327)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001343)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mSQL (0.000815)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000638)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001317)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.002121)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;35;1mSQL (0.001150)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002812)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mSQL (0.002616)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Server Indexes (0.004097)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Server Indexes (0.002265)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Server Load (0.004249)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Create (0.001648)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/a/root/directory', 1, 'f', NULL, 1, -2, 0, NULL, E'/a/root/directory', -1, 0)[0m
  [4;36;1mSQL (0.000919)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005109)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001472)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000606)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001360)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001973)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 1, -2, 0, NULL, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000931)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003988)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.000982)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000598)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001374)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002673)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001348)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002722)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001452)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002687)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001562)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002283)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mSQL (0.000785)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000636)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001384)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001495)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Server Load (0.001546)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mSQL (0.000763)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001248)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001336)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001304)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Create (0.002902)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;36;1mSQL (0.001007)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002645)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Update (0.001994)[0m   [0;1mUPDATE directories SET "level" = 3, "modified" = NULL, "server_id" = 1, "count" = 0, "name" = E'another', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo/bar/another', "parent_id" = 2 WHERE id = 13[0m
  [4;35;1mEarth::Directory Load (0.001937)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001594)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 13) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001498)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001415)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.000863)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000647)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001390)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000914)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000611)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.001326)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001366)[0m   [0mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;36;1mEarth::File Load (0.001708)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;35;1mEarth::File Load (0.001383)[0m   [0mSELECT * FROM files WHERE (files."id" = 4) [0m
  [4;36;1mEarth::File Load (0.001430)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002722)[0m   [0mSELECT * FROM files WHERE (files."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001777)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002315)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001304)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002562)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000764)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000736)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000766)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000576)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001426)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002401)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001363)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001569)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'wibble', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/wibble', -1, 0)[0m
  [4;35;1mSQL (0.000895)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002961)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001370)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Update (0.002188)[0m   [0;1mUPDATE directories SET "level" = 1, "modified" = '1970-01-01 00:00:00.000000', "server_id" = 1, "count" = 0, "name" = E'name', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo', "parent_id" = NULL WHERE id = 1[0m
  [4;35;1mEarth::Directory Load (0.001407)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001375)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001470)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.004232)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001719)[0m   [0;1mUPDATE directories SET bytes = bytes + 3, blocks = blocks + 2, count = count + 2 WHERE (id in (1)) [0m
  [4;35;1mEarth::Directory Load (0.002118)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.002246)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000826)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000815)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000621)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000888)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000706)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000867)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000877)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000812)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000686)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000807)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000833)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000925)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000733)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000781)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000694)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000785)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000865)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001722)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.000000)[0m   [0mPGError: ERROR: invalid byte sequence for encoding "UTF8": 0xa9
HINT: This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding".
: INSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'©', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.000928)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000925)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001827)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.003311)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001119)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mSQL (0.000891)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000754)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.001562)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mSQL (0.000872)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000850)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000860)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000769)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.002541)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001235)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000826)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000697)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000816)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000690)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000813)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000738)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000791)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000938)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000861)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000709)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000779)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000886)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000857)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000695)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000790)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001155)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000821)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000699)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000786)[0m   [0;1mROLLBACK[0m
allow_concurrency=true
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74820e4 @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001311)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000772)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.000769)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000969)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.001946)[0m   [0mSELECT version()[0m
  [4;36;1mEarth::Directory Load (0.004817)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000706)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001376)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.003652)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno1', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno1', -1, 0)[0m
  [4;36;1mSQL (0.001523)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004930)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.043094)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000907)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000874)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.003746)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001565)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000501)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.003600)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.020678)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002472)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.001366)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.004767)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000845)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000891)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001346)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.015247)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001684)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno2', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno2', -1, 0)[0m
  [4;36;1mSQL (0.000911)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::File Load (0.006302)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000755)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000831)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001548)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Update (0.013655)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.002432)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001487)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.006058)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.004706)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000613)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001352)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.014590)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001454)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.004299)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno3', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno3', -1, 0)[0m
  [4;35;1mEarth::File Load (0.004566)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000784)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000888)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001359)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.011392)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003511)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001461)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::File Load (0.004184)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000932)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000558)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001600)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.012059)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000657)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001757)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.008227)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001074)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000580)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001929)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Create (0.015495)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno4', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno4', -1, 0)[0m
  [4;36;1mSQL (0.001008)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::File Load (0.002256)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000769)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000575)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001365)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Update (0.014240)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001789)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001694)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.002543)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000775)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.001237)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001351)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.011880)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001560)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001484)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno5', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno5', -1, 0)[0m
  [4;35;1mEarth::File Load (0.004485)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000753)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000543)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001356)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.011322)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002537)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001386)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::File Load (0.004648)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000794)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.009975)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000657)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001343)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001524)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno6', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno6', -1, 0)[0m
  [4;36;1mSQL (0.001874)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002778)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001597)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001548)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.001204)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001398)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001692)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno7', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno7', -1, 0)[0m
  [4;35;1mSQL (0.001074)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002553)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001428)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.002041)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000856)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001353)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001483)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno8', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno8', -1, 0)[0m
  [4;36;1mSQL (0.001885)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003070)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001433)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001490)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000662)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001368)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001952)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno9', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno9', -1, 0)[0m
  [4;35;1mSQL (0.001080)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002787)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001581)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001456)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000656)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001388)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001717)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno10', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno10', -1, 0)[0m
  [4;36;1mSQL (0.001835)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002519)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001439)[0m   [0;1mCOMMIT[0m
allow_concurrency=false
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74820e4 @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001056)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000802)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.000758)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000672)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.001837)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000667)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000916)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000582)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000658)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000572)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000991)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000515)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.002639)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.001918)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000588)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001482)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001792)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Directory Load (0.001892)[0m   [0;1mSELECT * FROM directories [0m
  [4;35;1mEarth::Directory Load (0.001983)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001500)[0m   [0mSELECT * FROM files [0m
  [4;36;1mSQL (0.000821)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000597)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001288)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.002699)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003032)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001278)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001423)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002525)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.002424)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001290)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002576)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mSQL (0.000816)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000668)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001520)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.006230)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = '2008-04-10 13:11:43.355441' WHERE "id" = 1[0m
  [4;35;1mSQL (0.000773)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000589)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001506)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000715)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000570)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001522)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mSQL (0.000696)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000603)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.003005)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001317)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002691)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001501)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001218)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002950)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001239)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001193)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002541)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.001046)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000609)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001745)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.002408)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Server Load (0.001421)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mPK and serial sequence (0.005302)[0m   [0m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'servers'::regclass
[0m
  [4;36;1mEarth::Server Create (0.001402)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001113)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.001824)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.004115)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001669)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001663)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001595)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001568)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001438)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::Directory Load (0.001628)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;36;1mEarth::Directory Load (0.001825)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) ORDER BY lft[0m
  [4;35;1mSQL (0.000820)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000625)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001403)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001815)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001443)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.002800)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001193)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000861)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001498)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 5, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.002467)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.006030)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 5 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001569)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 8) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06650)
  [4;35;1mEarth::File Load (0.001549)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 8) ORDER BY name[0m
Creating file with name file1 (0.00685)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03883)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.118278s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001947)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001521)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:43.637252', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 5[0m
  [4;36;1mEarth::Directory Load (0.001486)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001692)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001664)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001475)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001391)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001868)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 8) [0m
  [4;36;1mSQL (0.001200)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001006)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001953)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001479)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001192)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001512)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002109)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001106)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.004934)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 6, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001432)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004092)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 6 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001450)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06237)
  [4;36;1mEarth::File Load (0.001814)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
Creating file with name file1 (0.00762)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03833)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.117553s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001656)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002258)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:43.833865', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001358)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001675)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03872)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00700)
checking for update on file file1
checking for update on file file2
Updating directory with name dir1 (0.01364)
Update cycle took 0.067389s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001736)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001489)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:43.913752', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001367)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001815)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001665)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001920)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 10) and rgt > (select rgt from directories where id = 10) and directories.server_id = 6) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.001940)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (10)) [0m
  [4;36;1mEarth::Directory Load (0.001599)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;35;1mEarth::File Load (0.002410)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002399)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002435)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001396)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002104)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002164)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002715)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001612)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mEarth::Directory Load (0.002609)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;36;1mEarth::Directory Load (0.001618)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mSQL (0.000989)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001498)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001393)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001604)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001274)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001940)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001582)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001127)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001459)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 7, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000943)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003723)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 7 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001834)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06507)
  [4;35;1mEarth::File Load (0.001420)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
Creating file with name file1 (0.00599)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04289)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120331s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001553)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001501)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:44.148831', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001389)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001648)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03655)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00865)
checking for update on file file1
Updating file with name file1 (0.00438)
checking for update on file file2
Updating directory with name dir1 (0.01437)
Update cycle took 0.073056s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001587)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001455)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:44.232934', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.002399)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 12) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001794)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001588)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001884)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 12) and rgt > (select rgt from directories where id = 12) and directories.server_id = 7) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001864)[0m   [0;1mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (12)) [0m
  [4;35;1mEarth::Directory Load (0.001471)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;36;1mEarth::File Load (0.002574)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002805)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.004971)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001601)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001635)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001643)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001368)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001360)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001786)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;35;1mEarth::Directory Load (0.001363)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mSQL (0.000959)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000658)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001459)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001826)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001814)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001517)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001517)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000989)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002920)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 8, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000927)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004608)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 8 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001974)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06433)
  [4;36;1mEarth::File Load (0.001559)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
Creating file with name file1 (0.00727)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04146)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.119311s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001597)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001867)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:44.467061', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001415)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 14) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001409)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 15) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002100)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001884)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;35;1mEarth::File Load (0.004227)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002475)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002234)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001550)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001479)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 14) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.24575)
  [4;36;1mEarth::File Load (0.001644)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04827)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.305302s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001588)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001504)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:44.810378', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001811)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002035)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001796)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;36;1mSQL (0.000957)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000833)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001380)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002380)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001241)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001626)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001232)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001023)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001488)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 9, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001025)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003716)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 9 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001431)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06818)
  [4;36;1mEarth::File Load (0.001984)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
Creating file with name file1 (0.00624)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04070)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.122031s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001539)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001486)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:44.997071', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001818)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001803)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001504)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001531)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002518)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002234)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.003847)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001483)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001842)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.04774)
  [4;36;1mEarth::File Load (0.001613)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04322)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.01203)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.115475s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001540)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001498)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:45.149857', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.002026)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001697)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001425)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::Directory Load (0.001653)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001950)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002955)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001760)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001447)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001586)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001329)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001335)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001411)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001538)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001521)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001400)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::File Load (0.002272)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002351)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002238)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002079)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001560)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.001431)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04642)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file1 (0.00924)
checking for update on file sub-file1
Updating directory with name subdir (0.01380)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00895)
Update cycle took 0.094638s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001628)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001565)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:45.343096', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::File Load (0.002258)[0m   [0;1mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001455)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;36;1mEarth::Directory Load (0.001710)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001690)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;35;1mEarth::File Load (0.001573)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001917)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001410)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001522)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001610)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001842)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002429)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.005726)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002315)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001732)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001902)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001624)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002536)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001563)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001583)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002280)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001621)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001472)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.001659)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.05072)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file2 (0.00621)
Creating file with name sub-file3 (0.00609)
checking for update on file sub-file1
checking for update on file sub-file2
checking for update on file sub-file3
Updating directory with name subdir (0.01348)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00750)
Update cycle took 0.100485s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001809)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001922)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:45.551336', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::Directory Load (0.001499)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.004447)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001532)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::Directory Load (0.001729)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001602)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001406)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001804)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002479)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003536)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002438)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mSQL (0.001008)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000888)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001770)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001800)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001298)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001748)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001250)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000934)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002126)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 10, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000965)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003777)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 10 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001457)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 20) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.05007)
  [4;36;1mEarth::File Load (0.001346)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
Creating file with name file1 (0.01431)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03313)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.103481s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001720)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001501)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:45.746288', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 10[0m
  [4;35;1mEarth::Directory Load (0.001364)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 20) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001361)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001702)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001579)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mEarth::File Load (0.003428)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002436)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002468)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.003526)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.003186)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001722)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001387)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mSQL (0.001094)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000649)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001374)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001451)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001149)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.003834)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001531)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000912)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002789)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 11, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000899)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004168)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 11 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.002467)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 22) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06440)
  [4;35;1mEarth::File Load (0.001512)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
Creating file with name file1 (0.00571)
Creating file with name .an_invisible_file (0.00654)
checking for update on file file1
checking for update on file .an_invisible_file
Updating directory with name /home/ssurfer/earth/test_data (0.04242)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.12589s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001708)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001732)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:45.970555', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 11[0m
  [4;36;1mEarth::Directory Load (0.001354)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 22) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001337)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 23) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001779)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001533)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 22) [0m
  [4;36;1mEarth::File Load (0.002937)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002472)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002260)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002198)[0m   [0mSELECT * FROM files WHERE (files."name" = E'.an_invisible_file') LIMIT 1[0m
  [4;36;1mSQL (0.000864)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000636)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001601)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001395)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001388)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001484)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001932)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000898)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001547)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 12, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001147)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004507)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 12 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001725)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'random') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001478)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'random', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000894)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001898)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data_2', 13, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data_2', -1, 0)[0m
  [4;35;1mSQL (0.000883)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.008004)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 13 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002111)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001357)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.01049)
Update cycle took 0.014844s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001756)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.003079)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.096165', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::File Load (0.001318)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
  [4;35;1mEarth::Directory Update (0.001697)[0m   [0mUPDATE directories SET "level" = 1, "modified" = '2008-04-10 13:11:45.000000', "server_id" = 13, "count" = 0, "name" = E'/home/ssurfer/earth/test_data_2', "bytes" = 0, "cache_valid" = 't', "blocks" = 0, "path" = E'/home/ssurfer/earth/test_data_2', "parent_id" = NULL WHERE id = 25[0m
  [4;36;1mEarth::Directory Load (0.001312)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 25) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001561)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002222)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/jfcbwr
create directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
  [4;35;1mEarth::Directory Load (0.001702)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001539)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001727)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003293s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001710)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.003417)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.134959', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001947)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001878)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
delete directory /home/ssurfer/earth/test_data_2/jfcbwr
  [4;36;1mEarth::Directory Load (0.004116)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001354)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001266)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.0031s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002105)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001538)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.164519', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001432)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002178)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
  [4;35;1mEarth::Directory Load (0.001555)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001340)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001708)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003323s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002357)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001599)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.190610', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001341)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001837)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy/kmwmyjs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
  [4;36;1mEarth::Directory Load (0.001578)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001326)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001284)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002891s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001731)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001509)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.216709', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001769)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001990)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/hzfnsu/fwfj
  [4;35;1mEarth::Directory Load (0.005344)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002133)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001760)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003759s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001559)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001571)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.249375', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001752)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002959)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam
  [4;36;1mEarth::Directory Load (0.002416)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001416)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001315)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003014s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001723)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001572)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.277923', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001381)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002781)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam/hehs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn/mfrctyqjdft
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl
  [4;35;1mEarth::Directory Load (0.001356)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001611)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001748)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003441s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001858)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001566)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.307056', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001523)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.004308)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001942)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001575)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001493)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003163s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001550)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002803)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.334396', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001490)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002105)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001375)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001351)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001422)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003318s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001508)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001665)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.360808', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001634)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002159)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vfqakcktrzt
create directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/mon/drmzomkci
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/qy
  [4;36;1mEarth::Directory Load (0.001513)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001348)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001435)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003795s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.003068)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001571)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.390721', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001355)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001839)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
delete directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/lcifqeg
  [4;35;1mEarth::Directory Load (0.001493)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001607)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001677)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003519s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001603)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001875)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.422921', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001940)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001926)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/ni
  [4;36;1mEarth::Directory Load (0.001856)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.005976)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001447)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003257s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001590)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003318)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.458538', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001437)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002038)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo
  [4;35;1mEarth::Directory Load (0.001755)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001329)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001305)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002998s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001712)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001737)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.485668', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002046)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
  [4;36;1mEarth::Directory Load (0.001840)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001700)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001771)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003542s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001600)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002125)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.514746', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001369)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002395)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
delete directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/zdri
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz
create directory /home/ssurfer/earth/test_data_2/qd
create directory /home/ssurfer/earth/test_data_2/qg
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001456)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.003038)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.004929s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001877)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001561)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.544570', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001655)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001894)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw
  [4;36;1mEarth::Directory Load (0.001585)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002038)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001365)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003063s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001674)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002042)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.571228', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001357)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.004682)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt
  [4;35;1mEarth::Directory Load (0.002711)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001334)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001476)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003177s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001770)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001542)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.601556', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001330)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001792)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh
  [4;36;1mEarth::Directory Load (0.001431)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001491)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001808)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003463s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001546)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001698)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.630183', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002233)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001803)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl
  [4;35;1mEarth::Directory Load (0.001386)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001350)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001268)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003038s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001771)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002207)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.660212', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001532)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001958)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy
  [4;36;1mEarth::Directory Load (0.001383)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001769)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.003015)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.005962s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001730)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001602)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.694774', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001675)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001808)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs
  [4;35;1mEarth::Directory Load (0.001361)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001417)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001540)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003234s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001914)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001758)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.723832', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001447)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002282)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
delete directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;36;1mEarth::Directory Load (0.001453)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.003807)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001557)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003418s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001742)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002050)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.760005', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002400)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002060)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
  [4;35;1mEarth::Directory Load (0.001717)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001364)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001304)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003103s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001601)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001551)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.790816', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001371)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001843)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
  [4;36;1mEarth::Directory Load (0.001329)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001358)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003317s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001626)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002090)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.820094', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001404)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002008)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.003894)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.003083)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001523)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00323s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001605)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001722)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.851236', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001628)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.003327)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd/zvci
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw
  [4;36;1mEarth::Directory Load (0.001997)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001316)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001388)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003341s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001857)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001622)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.881934', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002210)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001795)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql
  [4;35;1mEarth::Directory Load (0.001719)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001409)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001989)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003954s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001558)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.004323)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.914372', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001859)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001850)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
  [4;36;1mEarth::Directory Load (0.001458)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001371)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001573)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003665s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001567)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001615)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.949394', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001464)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002077)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001806)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001357)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:41:46 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001262)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003351s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001764)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001624)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:46.976515', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001965)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001998)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht
  [4;36;1mEarth::Directory Load (0.003452)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001438)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are ["pmhklgudtco", "zdri", "qg", "qd"]
  [4;36;1mEarth::Directory Load (0.004124)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco (1.11075)
Creating directory /home/ssurfer/earth/test_data_2/zdri (0.26427)
Creating directory /home/ssurfer/earth/test_data_2/qg (0.05415)
Creating directory /home/ssurfer/earth/test_data_2/qd (0.32179)
  [4;35;1mEarth::File Load (0.001364)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.01984)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
Update cycle took 1.970535s, remaining_count is -29
  [4;36;1mEarth::Server Load (0.008035)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002146)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:48.980444', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.004168)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001947)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.001393)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000879)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.003523)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001714)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001824)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001883)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002228)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001062)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001544)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 14, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000963)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004245)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 14 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001623)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'late_cache') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001246)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'late_cache', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001403)[0m   [0mSELECT currval('servers_id_seq')[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.00249)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Update cycle took 0.00696s, remaining_count is -1
  [4;36;1mEarth::Directory Create (0.001911)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 15, 'f', NULL, 1, -4, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000936)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001548)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'dir1', 15, 'f', NULL, 2, -3, 0, 56, E'/home/ssurfer/earth/test_data/dir1', -2, 0)[0m
  [4;35;1mSQL (0.000968)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004441)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END) WHERE (directories.server_id = 15 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001749)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 56) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating file with name file1 (0.00689)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03027)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file1 (0.00623)
checking for update on file file1
Updating directory with name dir1 (0.01375)
Update cycle took 0.063577s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.005954)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001636)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:49.161895', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 14[0m
  [4;36;1mEarth::Directory Load (0.001495)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 55) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001412)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 55) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001533)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 55) [0m
  [4;35;1mEarth::File Load (0.002854)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 55) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 55) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002742)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 55) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 55) AND directories.server_id = 14) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002301)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 55) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 55) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mSQL (0.001264)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000790)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001541)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001655)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001479)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.002193)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002412)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001158)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002678)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 16, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001153)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004407)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 16 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001872)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 58) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04766)
  [4;36;1mEarth::File Load (0.002138)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 58) ORDER BY name[0m
Creating file with name file1 (0.00621)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03363)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.094488s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.003758)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001886)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:49.332060', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 16[0m
  [4;35;1mEarth::Directory Load (0.001448)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 58) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001370)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 59) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001935)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 58) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001462)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 58) [0m
  [4;35;1mEarth::File Load (0.002396)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 58) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 58) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002223)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 58) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 58) AND directories.server_id = 16) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002968)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 58) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 58) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001963)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001768)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001795)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001299)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001394)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 58) [0m
  [4;35;1mSQL (0.001278)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000653)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001658)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001683)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001707)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001487)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001253)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001298)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.006027)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 17, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000933)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004076)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 17 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.002136)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 60) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir2b", "dir1", "dir2a"]
Creating directory /home/ssurfer/earth/test_data/dir2b (0.03372)
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06590)
Creating directory /home/ssurfer/earth/test_data/dir2a (0.03242)
  [4;35;1mEarth::File Load (0.001356)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 60) ORDER BY name[0m
Creating file with name file1 (0.00619)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.06816)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2b -> changed less than 1 second ago (Thu Apr 10 22:41:49 +0930 2008)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2a -> changed less than 1 second ago (Thu Apr 10 22:41:49 +0930 2008)
Update cycle took 0.215166s, remaining_count is -3
  [4;36;1mEarth::Server Load (0.001656)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001544)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:49.646573', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001423)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 60) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 4
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001654)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 60) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir2b (0.01372)
Removing directory with name dir2a (0.00848)
Updating directory with name /home/ssurfer/earth/test_data (0.03615)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.064637s, remaining_count is 2
  [4;36;1mEarth::Server Load (0.001943)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002062)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:49.723619', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001352)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 60) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001837)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 62) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001634)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 60) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001459)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 60) [0m
  [4;36;1mEarth::File Load (0.002956)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 60) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 60) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002525)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 60) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 60) AND directories.server_id = 17) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002420)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 60) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 60) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.004146)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.003263)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002296)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002112)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001586)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 62) [0m
  [4;36;1mEarth::Directory Load (0.001994)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 60) [0m
  [4;35;1mSQL (0.001742)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000684)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001404)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001513)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001205)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001486)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001285)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001202)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.004002)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 18, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000922)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004066)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 18 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001864)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 64) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06596)
  [4;35;1mEarth::File Load (0.001341)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 64) ORDER BY name[0m
Creating file with name file1 (0.00603)
Creating file with name file1b (0.00615)
Creating file with name file1a (0.00746)
checking for update on file file1
checking for update on file file1b
checking for update on file file1a
Updating directory with name /home/ssurfer/earth/test_data (0.04789)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.140146s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002005)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001778)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:49.968012', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001644)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 64) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001689)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 64) ORDER BY name[0m
checking for update on file file1
Removing file with name file1a (0.00302)
Removing file with name file1b (0.00248)
Updating directory with name /home/ssurfer/earth/test_data (0.12277)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.134794s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002592)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001514)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:50.114765', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001765)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.095158)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002019)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002117)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001452)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 65) [0m
  [4;35;1mEarth::Directory Load (0.001681)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 64) [0m
  [4;36;1mSQL (0.001525)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000823)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001576)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001733)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001419)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001942)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001263)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001174)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002470)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 19, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001079)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.005494)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 19 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001697)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 66) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "dir_a"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06188)
Creating directory /home/ssurfer/earth/test_data/dir_a (0.29159)
  [4;36;1mEarth::File Load (0.001709)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 66) ORDER BY name[0m
Creating file with name file1 (0.00844)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.06016)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d -> not changed
Update cycle took 0.433624s, remaining_count is -9
  [4;35;1mEarth::Server Load (0.002002)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001931)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:50.728036', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;35;1mEarth::Directory Load (0.001789)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002991)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001770)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001893)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001784)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002707)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002351)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002588)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002207)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001759)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002063)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001706)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 66) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 10
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001702)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 66) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir_a (0.01630)
Updating directory with name /home/ssurfer/earth/test_data (0.23709)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.259752s, remaining_count is 8
  [4;36;1mEarth::Server Load (0.001664)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001711)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.056482', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;36;1mSQL (0.000940)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000689)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001584)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001575)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001262)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001504)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001280)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000956)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.003064)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 20, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000982)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003636)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 20 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002365)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 76) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06752)
  [4;36;1mEarth::File Load (0.001438)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 76) ORDER BY name[0m
Creating file with name file1 (0.00865)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03966)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.122189s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001531)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001819)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.237126', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001818)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 76) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001448)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 76) ORDER BY name[0m
Removing file with name file1 (0.00276)
Removing directory with name dir1 (0.00984)
Updating directory with name /home/ssurfer/earth/test_data (0.00724)
Update cycle took 0.025588s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.090510)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001935)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.363901', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001392)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 76) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003562)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 76) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001907)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 76) [0m
  [4;36;1mEarth::File Load (0.003345)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 76) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 76) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002542)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 76) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 76) AND directories.server_id = 20) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002492)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 76) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 76) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001595)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002100)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001227)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.001697)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001040)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.002288)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001724)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001797)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001515)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001317)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001182)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.003064)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 21, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000917)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003715)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 21 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001930)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 78) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.03624)
  [4;36;1mEarth::File Load (0.001554)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 78) ORDER BY name[0m
Creating file with name file1 (0.00616)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03226)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed less than 1 second ago (Thu Apr 10 22:41:51 +0930 2008)
Update cycle took 0.081081s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.002262)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001745)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.532124', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001589)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 78) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001839)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 78) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir1 (0.00899)
Updating directory with name /home/ssurfer/earth/test_data (0.01913)
Update cycle took 0.036747s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.001584)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001725)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.580747', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001353)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 78) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001408)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 78) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001906)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 78) [0m
  [4;36;1mEarth::File Load (0.002456)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 78) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 78) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002580)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 78) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 78) AND directories.server_id = 21) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002634)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 78) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 78) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002379)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002139)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001341)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001355)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 78) [0m
  [4;35;1mSQL (0.000905)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000713)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001536)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001547)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001189)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001512)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001252)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000983)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.002896)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 22, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000937)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005823)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 22 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001833)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 80) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06790)
  [4;35;1mEarth::File Load (0.001379)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 80) ORDER BY name[0m
Creating file with name file1 (0.00648)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03978)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120039s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001547)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.004213)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.793165', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001589)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 80) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001813)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 80) ORDER BY name[0m
Removing file with name file1 (0.00356)
Removing directory with name dir1 (0.00830)
Update cycle took 0.016933s, remaining_count is 1
  [4;36;1mEarth::Server Load (0.002202)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001483)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:11:51.824688', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001575)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 80) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001333)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 80) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002023)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 80) and rgt > (select rgt from directories where id = 80) and directories.server_id = 22) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.002106)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -2 WHERE (id in (80)) [0m
  [4;36;1mEarth::Directory Load (0.001497)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 80) [0m
  [4;35;1mEarth::File Load (0.002990)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 80) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 80) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002554)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 80) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 80) AND directories.server_id = 22) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002731)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 80) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 80) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001453)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::File Load (0.002346)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.000858)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000661)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001016)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004405)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mSQL (0.002265)[0m   [0;1mDELETE FROM servers[0m
  [4;35;1mSQL (0.001120)[0m   [0mDELETE FROM file_metadata_strings[0m
  [4;36;1mSQL (0.001008)[0m   [0;1mDELETE FROM files[0m
  [4;35;1mSQL (0.002851)[0m   [0mDELETE FROM directories[0m
  [4;36;1mSQL (0.001648)[0m   [0;1mDELETE FROM plugin_descriptors[0m
  [4;35;1mSQL (0.001390)[0m   [0mDELETE FROM metadata_strings[0m
  [4;36;1mSQL (0.001573)[0m   [0;1mDELETE FROM metadata_attributes[0m
  [4;35;1mSQL (0.001386)[0m   [0mDELETE FROM schema_info[0m
  [4;36;1mEarth::Server Create (0.002394)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'duck.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000960)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Server Create (0.001784)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'rincewind.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001182)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.001252)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000831)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000681)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000586)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000631)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000901)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000659)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000575)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000726)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000632)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000687)[0m   [0;1mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001426)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000768)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000707)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000861)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001484)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000492)[0m   [0mBEGIN[0m


Processing BrowserController#index (for 0.0.0.0 at 2008-04-10 22:41:55) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"browser"}
Redirected to http://test.host/browser/show
Completed in 0.01058 (94 reqs/sec) | DB: 0.00574 (54%) | 302 Found [http://test.host/]
  [4;36;1mSQL (0.000761)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000596)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001165)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000601)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:55) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo"]}
  [4;36;1mSQL (0.004614)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Server Indexes (0.005060)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Server Indexes (0.002391)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Server Load (0.002309)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.002755)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Directory Indexes (0.004242)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Directory Indexes (0.001970)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Directory Load (0.001830)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001666)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 1) [0m
  [4;35;1mSQL (0.003124)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::File Indexes (0.004209)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::File Indexes (0.001962)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.004346)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::File Load (0.003416)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000948)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004078)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;36;1mSQL (0.002398)[0m   [0;1m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;35;1mEarth::Directory Load (0.002685)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002307)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02769)
Completed in 0.20516 (4 reqs/sec) | Rendering: 0.10123 (49%) | DB: 0.05943 (28%) | 200 OK [http://test.host/browser/show/sboard/foo]
  [4;35;1mEarth::Directory Load (0.001517)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001557)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002698)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000965)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000704)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser"}
  [4;36;1mEarth::Server Load (0.001434)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001587)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002389)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002518)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003189)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01945)
Completed in 0.08791 (11 reqs/sec) | Rendering: 0.05669 (64%) | DB: 0.01856 (21%) | 200 OK [http://test.host/browser/show]
  [4;36;1mSQL (0.004276)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000596)[0m   [0mBEGIN[0m


Processing BrowserController#flat (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"action"=>"flat", "controller"=>"browser"}
  [4;36;1mSQL (0.001316)[0m   [0;1mSHOW max_identifier_length[0m
  [4;35;1mSQL (0.002697)[0m   [0mSELECT count(*) AS count_all FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') [0m
  [4;36;1mEarth::File Load (0.002658)[0m   [0;1mSELECT files.name as name, files.directory_id as directory_id, files.modified as modified, files.bytes as bytes, files.uid as uid FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') ORDER BY bytes desc LIMIT 25 OFFSET 0[0m
Rendering template within layouts/application
Rendering browser/flat
  [4;35;1mEarth::Directory Load (0.001466)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Server Load (0.001640)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001865)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001460)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Server Load (0.001403)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001968)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 5) and rgt > (select rgt from directories where id = 5) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001393)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001984)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Load (0.001446)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001914)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Server Load (0.001329)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mEarth::Directory Load (0.001823)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002472)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002287)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.005025)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03541)
Completed in 0.18948 (5 reqs/sec) | Rendering: 0.14899 (78%) | DB: 0.04102 (21%) | 200 OK [http://test.host/browser/flat]
  [4;36;1mSQL (0.001200)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000729)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001687)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001891)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002310)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01516)
Completed in 0.21690 (4 reqs/sec) | Rendering: 0.20344 (93%) | DB: 0.00782 (3%) | 200 OK [http://test.host/browser/show/sboard]
  [4;35;1mEarth::Server Load (0.001415)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mSQL (0.000812)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000661)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.002016)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002175)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001861)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001637)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.002717)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering browser/show
  [4;35;1mEarth::File Load (0.002346)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 2) ORDER BY name[0m
Completed in 0.03706 (26 reqs/sec) | Rendering: 0.00966 (26%) | DB: 0.01564 (42%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;36;1mEarth::Directory Load (0.001494)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.001367)[0m   [0mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001552)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002454)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000812)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000603)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.002064)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001815)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001497)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001625)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.003805)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Sending data earth_report.csv
Completed in 0.02322 (43 reqs/sec) | Rendering: 0.00015 (0%) | DB: 0.01909 (82%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;35;1mEarth::Directory Load (0.001575)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000970)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000621)[0m   [0mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph"}
Rendering template within layouts/application
Rendering graph/index
  [4;36;1mEarth::Server Load (0.001308)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001455)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002522)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002454)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002685)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03718)
Completed in 0.07314 (13 reqs/sec) | Rendering: 0.05602 (76%) | DB: 0.01359 (18%) | 200 OK [http://test.host/graph]
  [4;35;1mSQL (0.000860)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000619)[0m   [0;1mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;35;1mEarth::Server Load (0.001826)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002175)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
Rendering template within layouts/application
Rendering graph/index
  [4;35;1mEarth::Directory Load (0.002379)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 4) and rgt > (select rgt from directories where id = 4) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002602)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02359)
Completed in 0.06111 (16 reqs/sec) | Rendering: 0.04687 (76%) | DB: 0.01046 (17%) | 200 OK [http://test.host/graph/sboard/foo/bar/twiddle/frob]
  [4;35;1mSQL (0.001028)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001047)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:56) [GET]
  Session ID: 
  Parameters: {"filter_filename"=>"*.zip", "action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001636)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.003086)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002199)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003656)[0m   [0;1mSELECT * FROM files WHERE (files.name LIKE E'%.zip') AND (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
Rendering graph/directory.rxml
Completed in 0.11107 (9 reqs/sec) | Rendering: 0.08308 (74%) | DB: 0.01265 (11%) | 200 OK [http://test.host/graph/show/sboard/foo?filter_filename=%2A.zip]
  [4;35;1mSQL (0.001081)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000976)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001701)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002211)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002039)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002710)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
  [4;35;1mEarth::Directory Load (0.001553)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.13848 (7 reqs/sec) | Rendering: 0.10821 (78%) | DB: 0.01227 (8%) | 200 OK [http://test.host/graph/show/sboard/foo]
  [4;36;1mSQL (0.000823)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000605)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph"}
  [4;36;1mEarth::Server Load (0.001218)[0m   [0;1mSELECT * FROM servers [0m
Rendering graph/servers.rxml
  [4;35;1mEarth::Directory Load (0.001703)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002346)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002567)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003308)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.08449 (11 reqs/sec) | Rendering: 0.07122 (84%) | DB: 0.01257 (14%) | 200 OK [http://test.host/graph/show]
  [4;35;1mSQL (0.000810)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000616)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard"}
  [4;35;1mEarth::Server Load (0.002775)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001419)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.002017)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003731)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 1 AND lft >= 0 AND rgt <= 11)) [0m
  [4;35;1mEarth::Directory Load (0.001537)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (5)) [0m
Rendering graph/directory.rxml
Completed in 0.10717 (9 reqs/sec) | Rendering: 0.07439 (69%) | DB: 0.01290 (12%) | 200 OK [http://test.host/graph/show/sboard]
  [4;36;1mSQL (0.000801)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.003005)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;36;1mEarth::Server Load (0.001953)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001700)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001954)[0m   [0;1mSELECT * FROM directories WHERE (directories.level <= 9 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 4)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 4))) ORDER BY directories.lft[0m
  [4;35;1mEarth::File Load (0.002437)[0m   [0mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 8 AND server_id = 1 AND lft >= 4 AND rgt <= 7)) [0m
  [4;36;1mEarth::Directory Load (0.001616)[0m   [0;1mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
  [4;35;1mEarth::Directory Load (0.001634)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
Completed in 0.06407 (15 reqs/sec) | Rendering: 0.03883 (60%) | DB: 0.01510 (23%) | 200 OK [http://test.host/graph/show/sboard/foo/bar/twiddle/frob]
  [4;36;1mSQL (0.000937)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000629)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001576)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"server3"}
  [4;35;1mEarth::Server Load (0.003928)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'server3') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001427)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.002148)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 3 AND (directories.lft > (SELECT lft FROM directories WHERE id = 7)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 7))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002169)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 3 AND lft >= 0 AND rgt <= 3)) [0m
  [4;35;1mEarth::Directory Load (0.001227)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.06371 (15 reqs/sec) | Rendering: 0.03758 (58%) | DB: 0.01404 (22%) | 200 OK [http://test.host/graph/show/server3]
  [4;36;1mSQL (0.001280)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000506)[0m   [0mBEGIN[0m


Processing ServersController#edit (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"edit", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001550)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/edit
Completed in 0.04045 (24 reqs/sec) | Rendering: 0.03136 (77%) | DB: 0.00334 (8%) | 200 OK [http://test.host/servers/edit/sboard]
  [4;35;1mSQL (0.000869)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000584)[0m   [0;1mBEGIN[0m


Processing ServersController#index (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"servers"}
  [4;35;1mEarth::Server Load (0.001333)[0m   [0mSELECT * FROM servers [0m
Rendering template within layouts/servers
Rendering servers/index
  [4;36;1mEarth::Directory Load (0.001467)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.005104)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002536)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002326)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.06172 (16 reqs/sec) | Rendering: 0.04567 (73%) | DB: 0.01422 (23%) | 200 OK [http://test.host/servers]
  [4;36;1mSQL (0.000851)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000775)[0m   [0mBEGIN[0m


Processing ServersController#show (for 0.0.0.0 at 2008-04-10 22:41:57) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001688)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/show
  [4;35;1mEarth::Directory Load (0.001616)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mSQL (0.004392)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;35;1mEarth::Directory Load (0.001689)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002828)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001494)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (directories.server_id = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
Completed in 0.07144 (13 reqs/sec) | Rendering: 0.05514 (77%) | DB: 0.01533 (21%) | 200 OK [http://test.host/servers/show/sboard]
  [4;35;1mSQL (0.000854)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000606)[0m   [0;1mBEGIN[0m


Processing ServersController#update (for 0.0.0.0 at 2008-04-10 22:41:57) [PUT]
  Session ID: 
  Parameters: {"action"=>"update", "id"=>"1", "controller"=>"servers", "server"=>{}}
  [4;35;1mEarth::Server Load (0.002257)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Server Update (0.001913)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 1[0m
Redirected to http://test.host/servers/show/sboard
Completed in 0.01165 (85 reqs/sec) | DB: 0.00563 (48%) | 302 Found [http://test.host/servers/1?]
  [4;35;1mSQL (0.000752)[0m   [0mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001210)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.001747)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000774)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000685)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001720)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.002261)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.004507)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::File Indexes (0.005970)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::File Indexes (0.002292)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::File Load (0.001673)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mEarth::File Load (0.001573)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;35;1mSQL (0.002494)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Directory Indexes (0.004144)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Directory Indexes (0.002765)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001876)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002070)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mPK and serial sequence (0.004617)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'files'::regclass
[0m
  [4;35;1mEarth::File Create (0.003200)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(3, E'c', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001290)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mEarth::File Delete all (0.001948)[0m   [0mDELETE FROM files WHERE ("id" IN (2)) [0m
  [4;36;1mSQL (0.000972)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000613)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001320)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001363)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mPK and serial sequence (0.005586)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'directories'::regclass
[0m
  [4;35;1mEarth::Directory Create (0.001777)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000987)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004480)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001402)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001497)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.001099)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000693)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001336)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.003273)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001309)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001578)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001447)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'fiddle', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/fiddle', -1, 0)[0m
  [4;35;1mSQL (0.001419)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002631)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001420)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001752)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.002560)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001550)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001505)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001563)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.002602)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 2 AND 9) [0m
  [4;36;1mEarth::Directory Update (0.002365)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 9 THEN 8 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 9 THEN 8 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 9) [0m
  [4;35;1mEarth::Directory Load (0.001778)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.001058)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000627)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001437)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001526)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.004122)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.002592)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001334)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001274)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001486)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.002676)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 1 AND 10) [0m
  [4;36;1mEarth::Directory Update (0.001727)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 10 THEN 10 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 10 THEN 10 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 10) [0m
  [4;35;1mEarth::Directory Load (0.001550)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001634)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001205)[0m   [0mSELECT * FROM directories [0m
  [4;36;1mEarth::File Load (0.002010)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 5) [0m
  [4;35;1mEarth::File Load (0.001395)[0m   [0mSELECT * FROM files WHERE (files."id" = 8) [0m
  [4;36;1mEarth::File Load (0.001379)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 9) [0m
  [4;35;1mEarth::File Load (0.001379)[0m   [0mSELECT * FROM files WHERE (files."id" = 10) [0m
  [4;36;1mEarth::File Load (0.001247)[0m   [0;1mSELECT * FROM files [0m
  [4;35;1mSQL (0.000850)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000681)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001609)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001451)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001341)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001305)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;35;1mEarth::Directory Load (0.001381)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;36;1mEarth::Directory Load (0.001343)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;35;1mSQL (0.000821)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000703)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.004853)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001841)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001399)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001734)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001377)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.002293)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/twiddle') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001527)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;36;1mEarth::Directory Load (0.001647)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001811)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/boo') LIMIT 1[0m
  [4;36;1mSQL (0.000791)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000868)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001307)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001471)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001480)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.002023)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001390)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001405)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 6) [0m
  [4;36;1mSQL (0.000772)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000597)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001485)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002936)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000974)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.005993)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mEarth::Directory Load (0.001365)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002404)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001917)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002711)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001420)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::File Load (0.002390)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001643)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::File Load (0.002616)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 5) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 5) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001542)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002314)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001603)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mEarth::File Load (0.002347)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000811)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000592)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001462)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.002016)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001731)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001552)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;36;1mEarth::Directory Load (0.001404)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Directory Load (0.002212)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.001044)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000626)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001371)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001330)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001645)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mSQL (0.000819)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000615)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001338)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000747)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001527)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001435)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001631)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mEarth::File Load (0.001937)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mSQL (0.000730)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000621)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001762)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001712)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mSQL (0.000780)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001038)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001433)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001439)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001740)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;35;1mSQL (0.001050)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002833)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mSQL (0.005115)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Server Indexes (0.003895)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Server Indexes (0.003011)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Server Load (0.001846)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Create (0.001869)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/a/root/directory', 1, 'f', NULL, 1, -2, 0, NULL, E'/a/root/directory', -1, 0)[0m
  [4;36;1mSQL (0.000975)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003786)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001533)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000586)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001362)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001739)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 1, -2, 0, NULL, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000976)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003520)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001144)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000579)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001529)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002693)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001359)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002227)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001487)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002245)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002336)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002368)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mSQL (0.000760)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000639)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001478)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001349)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Server Load (0.001402)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mSQL (0.001049)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000591)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.002155)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001799)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Create (0.002624)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;36;1mSQL (0.000971)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002922)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Update (0.003606)[0m   [0;1mUPDATE directories SET "level" = 3, "modified" = NULL, "server_id" = 1, "count" = 0, "name" = E'another', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo/bar/another', "parent_id" = 2 WHERE id = 13[0m
  [4;35;1mEarth::Directory Load (0.001690)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001461)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 13) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001530)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001680)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.000854)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000621)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001591)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000772)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000589)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.001359)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001321)[0m   [0mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;36;1mEarth::File Load (0.001374)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;35;1mEarth::File Load (0.001368)[0m   [0mSELECT * FROM files WHERE (files."id" = 4) [0m
  [4;36;1mEarth::File Load (0.001442)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001370)[0m   [0mSELECT * FROM files WHERE (files."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001484)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003351)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001540)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002835)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000984)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000591)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001496)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000754)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000585)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001290)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001802)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001291)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001767)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'wibble', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/wibble', -1, 0)[0m
  [4;35;1mSQL (0.000932)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003280)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001399)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Update (0.001846)[0m   [0;1mUPDATE directories SET "level" = 1, "modified" = '1970-01-01 00:00:00.000000', "server_id" = 1, "count" = 0, "name" = E'name', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo', "parent_id" = NULL WHERE id = 1[0m
  [4;35;1mEarth::Directory Load (0.001442)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001319)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.002431)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001454)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002958)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001889)[0m   [0;1mUPDATE directories SET bytes = bytes + 3, blocks = blocks + 2, count = count + 2 WHERE (id in (1)) [0m
  [4;35;1mEarth::Directory Load (0.001636)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000879)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000605)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001028)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000573)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000884)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000692)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000776)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000732)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000809)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000696)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000820)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000702)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000805)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000671)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000834)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001146)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001221)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000752)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001908)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.000000)[0m   [0mPGError: ERROR: invalid byte sequence for encoding "UTF8": 0xa9
HINT: This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding".
: INSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'©', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001366)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000935)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001628)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.001689)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001175)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mSQL (0.001084)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000735)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.002407)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mSQL (0.001085)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000735)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000844)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000920)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000809)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000728)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000799)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000697)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000774)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000859)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001157)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000793)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000862)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000684)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000857)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001333)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000824)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000691)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000785)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000678)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000815)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000668)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000786)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000676)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001002)[0m   [0;1mROLLBACK[0m
allow_concurrency=true
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb755965c @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.064531)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000921)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.001234)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000771)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.002666)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000524)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003417)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.018932)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000993)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000921)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000720)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001992)[0m   [0;1mSELECT version()[0m
  [4;35;1mEarth::File Load (0.004485)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000852)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000545)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001419)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.016407)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.002358)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000753)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.001494)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001348)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.012384)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001393)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.002320)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000778)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000556)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001388)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.014637)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno1', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno1', -1, 0)[0m
  [4;35;1mSQL (0.001333)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.005021)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::File Load (0.003235)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000805)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000605)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001553)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.010131)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001529)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000679)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.002670)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000770)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000558)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003999)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.015576)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001866)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno2', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno2', -1, 0)[0m
  [4;36;1mSQL (0.000922)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::File Load (0.002523)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.002597)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000639)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002256)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Update (0.016138)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001900)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001568)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.002718)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000757)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000822)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001340)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.011718)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001865)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001472)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno3', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno3', -1, 0)[0m
  [4;35;1mEarth::File Load (0.003097)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000836)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000606)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001526)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.009922)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002637)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::File Load (0.002236)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000798)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000634)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001891)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.012233)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001547)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000670)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.002424)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000766)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.008818)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001479)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno4', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno4', -1, 0)[0m
  [4;36;1mSQL (0.000888)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003965)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001441)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001507)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000676)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001363)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001760)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno5', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno5', -1, 0)[0m
  [4;35;1mSQL (0.000899)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002833)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001967)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001478)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000654)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001403)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001573)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno6', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno6', -1, 0)[0m
  [4;36;1mSQL (0.001902)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002596)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001415)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001751)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000704)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001380)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001485)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno7', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno7', -1, 0)[0m
  [4;35;1mSQL (0.000903)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002546)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001524)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001567)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.001402)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001664)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001444)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno8', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno8', -1, 0)[0m
  [4;36;1mSQL (0.000888)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002903)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001399)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001684)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000651)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001616)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001621)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno9', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno9', -1, 0)[0m
  [4;35;1mSQL (0.001411)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003032)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001573)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001514)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000665)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001360)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001568)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno10', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno10', -1, 0)[0m
  [4;36;1mSQL (0.000910)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002798)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001863)[0m   [0;1mCOMMIT[0m
allow_concurrency=false
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb755965c @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001029)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000892)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.001130)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000705)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.001455)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000823)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000738)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000566)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000628)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000567)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000680)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000517)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.004909)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000753)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000572)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.002552)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001757)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Directory Load (0.001695)[0m   [0;1mSELECT * FROM directories [0m
  [4;35;1mEarth::Directory Load (0.001678)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001363)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001425)[0m   [0mSELECT * FROM files [0m
  [4;36;1mSQL (0.000832)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000609)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001342)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001589)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003475)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001323)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001701)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002944)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001341)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001176)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002786)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mSQL (0.000937)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000617)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001704)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002395)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = '2008-04-10 13:12:25.422967' WHERE "id" = 1[0m
  [4;35;1mSQL (0.000779)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000594)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001520)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.003041)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000616)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001530)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mSQL (0.000800)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000910)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001340)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001290)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002312)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.002060)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001301)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002555)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001249)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001184)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.003053)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000798)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000607)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001494)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001764)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Server Load (0.001682)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mPK and serial sequence (0.005659)[0m   [0m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'servers'::regclass
[0m
  [4;36;1mEarth::Server Create (0.001351)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001712)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.000839)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000599)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001704)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002661)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.004483)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001485)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001451)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::Directory Load (0.001866)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;36;1mEarth::Directory Load (0.002061)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) ORDER BY lft[0m
  [4;35;1mSQL (0.000808)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000753)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.002562)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001736)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001403)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001657)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001589)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.002006)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001698)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 5, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001252)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004882)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 5 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001513)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 8) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06601)
  [4;35;1mEarth::File Load (0.001342)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 8) ORDER BY name[0m
Creating file with name file1 (0.00704)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03918)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.119432s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001569)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001844)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:25.705361', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 5[0m
  [4;36;1mEarth::Directory Load (0.001485)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001822)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001655)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001316)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001394)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001434)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 8) [0m
  [4;36;1mSQL (0.001036)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001053)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001639)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001459)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001876)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001544)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001204)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001412)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001437)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 6, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001302)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003704)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 6 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001450)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06239)
  [4;36;1mEarth::File Load (0.001536)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
Creating file with name file1 (0.00825)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04072)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.118353s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001604)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001557)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:25.902659', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001582)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001541)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04904)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00602)
checking for update on file file1
checking for update on file file2
Updating directory with name dir1 (0.01367)
Update cycle took 0.076812s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001843)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001451)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:25.992426', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001381)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001380)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001412)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002809)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 10) and rgt > (select rgt from directories where id = 10) and directories.server_id = 6) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.002012)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (10)) [0m
  [4;36;1mEarth::Directory Load (0.001436)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;35;1mEarth::File Load (0.002464)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002267)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002374)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001652)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002102)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001652)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001410)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001395)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mEarth::Directory Load (0.001385)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;36;1mEarth::Directory Load (0.002318)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mSQL (0.000924)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000675)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001395)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001890)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001266)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001638)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001225)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001283)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001580)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 7, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001120)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005903)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 7 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001529)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06474)
  [4;35;1mEarth::File Load (0.001393)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
Creating file with name file1 (0.00839)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03945)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120035s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001530)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001581)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:26.233213', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001425)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001444)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03878)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00621)
checking for update on file file1
Updating file with name file1 (0.00416)
checking for update on file file2
Updating directory with name dir1 (0.01505)
Update cycle took 0.072978s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001583)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001463)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:26.318466', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001529)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 12) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001510)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001640)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002073)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 12) and rgt > (select rgt from directories where id = 12) and directories.server_id = 7) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001745)[0m   [0;1mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (12)) [0m
  [4;35;1mEarth::Directory Load (0.001483)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;36;1mEarth::File Load (0.002744)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002455)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002265)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.004081)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002518)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001873)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001542)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001412)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.003348)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;35;1mEarth::Directory Load (0.001419)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mSQL (0.000967)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000773)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001410)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001519)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.002107)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001481)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001234)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001282)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001423)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 8, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001401)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003805)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 8 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001463)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06445)
  [4;36;1mEarth::File Load (0.001358)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
Creating file with name file1 (0.00668)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04227)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.119496s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001832)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001881)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:26.552050', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001762)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 14) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002422)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 15) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.059887)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001864)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;35;1mEarth::File Load (0.002630)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002266)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002807)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002200)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001652)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 14) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.17810)
  [4;36;1mEarth::File Load (0.001399)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04898)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.23892s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001605)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001636)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:26.886958', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001951)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002275)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001480)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;36;1mSQL (0.001210)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000693)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001478)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001540)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001948)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001512)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001347)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001069)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002687)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 9, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000981)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003835)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 9 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001514)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.34253)
  [4;36;1mEarth::File Load (0.001382)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
Creating file with name file1 (0.00639)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04095)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.396072s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001806)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001553)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:27.347556', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001521)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001580)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002320)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001446)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002617)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.004633)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002832)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001444)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001969)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.05601)
  [4;36;1mEarth::File Load (0.001429)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.05324)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00858)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.179546s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001998)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001545)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:27.570781', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001720)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001588)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001492)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::Directory Load (0.001923)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001972)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001958)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001813)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001473)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.002577)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001381)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.003307)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001724)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002684)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001527)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001416)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::File Load (0.004074)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002480)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.117048)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001710)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001426)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.001539)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04970)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file1 (0.00676)
checking for update on file sub-file1
Updating directory with name subdir (0.01393)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.01122)
Update cycle took 0.103169s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.004671)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001608)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:27.900852', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::File Load (0.001763)[0m   [0;1mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002324)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;36;1mEarth::Directory Load (0.001627)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002366)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001485)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;35;1mEarth::File Load (0.001536)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001584)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002883)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001867)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001387)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001422)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002356)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002504)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002452)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002397)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001733)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001640)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.004614)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001980)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001862)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002380)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001627)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001442)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.001548)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04975)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file2 (0.00596)
Creating file with name sub-file3 (0.00671)
checking for update on file sub-file1
checking for update on file sub-file2
checking for update on file sub-file3
Updating directory with name subdir (0.01435)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00768)
Update cycle took 0.100908s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001597)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001530)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:28.113615', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::Directory Load (0.001511)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001428)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001466)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::Directory Load (0.001630)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001430)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001663)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001395)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.038408)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002514)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002374)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mSQL (0.000983)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001201)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.002015)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001612)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.254486)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001552)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001445)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000988)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001949)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 10, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001005)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004057)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 10 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001439)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 20) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04968)
  [4;36;1mEarth::File Load (0.001558)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
Creating file with name file1 (0.00944)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03264)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.097917s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001719)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001953)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:28.591811', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 10[0m
  [4;35;1mEarth::Directory Load (0.001473)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 20) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001418)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001622)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002452)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mEarth::File Load (0.002434)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.004010)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002366)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.003072)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.005890)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002241)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002853)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.003727)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mSQL (0.000859)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000728)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.005805)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.002574)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.006719)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.004513)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001229)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001067)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001642)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 11, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.004007)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.332654)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 11 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001449)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 22) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.08782)
  [4;35;1mEarth::File Load (0.001407)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
Creating file with name file1 (0.00619)
Creating file with name .an_invisible_file (0.00575)
checking for update on file file1
checking for update on file .an_invisible_file
Updating directory with name /home/ssurfer/earth/test_data (0.04439)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.152912s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001794)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001867)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.243699', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 11[0m
  [4;36;1mEarth::Directory Load (0.001712)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 22) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001346)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 23) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002965)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001535)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 22) [0m
  [4;36;1mEarth::File Load (0.002661)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002500)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002246)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001624)[0m   [0mSELECT * FROM files WHERE (files."name" = E'.an_invisible_file') LIMIT 1[0m
  [4;36;1mSQL (0.002589)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000644)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001341)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001504)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.002337)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001708)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002976)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.003570)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.003241)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 12, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000956)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.005465)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 12 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001708)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'random') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001157)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'random', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001054)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001895)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data_2', 13, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data_2', -1, 0)[0m
  [4;35;1mSQL (0.002726)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.007058)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 13 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001967)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.003298)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
Update cycle took 0.000834s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001579)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001893)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.379039', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Update (0.002174)[0m   [0mUPDATE directories SET "level" = 1, "modified" = NULL, "server_id" = 13, "count" = 0, "name" = E'/home/ssurfer/earth/test_data_2', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/home/ssurfer/earth/test_data_2', "parent_id" = NULL WHERE id = 25[0m
  [4;36;1mEarth::Directory Load (0.005684)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 25) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.003101)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.002974)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001833)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/jfcbwr
create directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
  [4;36;1mEarth::Directory Load (0.003678)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001891)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001362)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.005022s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001587)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001456)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.432556', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001832)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002143)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
delete directory /home/ssurfer/earth/test_data_2/jfcbwr
  [4;35;1mEarth::Directory Load (0.001760)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001387)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001481)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002963s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001701)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001685)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.458107', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001365)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001811)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
  [4;36;1mEarth::Directory Load (0.001338)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001363)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001514)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.006024s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001563)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001787)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.487018', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001365)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001851)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy/kmwmyjs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
  [4;35;1mEarth::Directory Load (0.001805)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001346)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001378)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003073s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001563)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001610)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.514423', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001453)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001841)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/hzfnsu/fwfj
  [4;36;1mEarth::Directory Load (0.001420)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001574)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001672)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003403s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001722)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001860)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.542510', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001526)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001865)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam
  [4;35;1mEarth::Directory Load (0.003236)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001543)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001483)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00316s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001555)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001520)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.573913', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001382)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002114)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam/hehs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn/mfrctyqjdft
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl
  [4;36;1mEarth::Directory Load (0.001504)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001368)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001315)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002831s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001524)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001598)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.601560', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001821)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001334)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001327)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001302)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003049s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002003)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001546)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.628628', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001826)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002664)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001366)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001926)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001643)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003187s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001559)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001911)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.658417', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001925)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002116)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vfqakcktrzt
create directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/mon/drmzomkci
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/qy
  [4;35;1mEarth::Directory Load (0.001367)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001508)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001271)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002755s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001833)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001547)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.688917', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001361)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002822)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
delete directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/lcifqeg
  [4;36;1mEarth::Directory Load (0.002691)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001856)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001278)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.002822s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001696)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001608)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.722637', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.004218)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002199)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/ni
  [4;35;1mEarth::Directory Load (0.001380)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001350)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001508)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003045s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002354)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002484)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.756927', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001385)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001801)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo
  [4;36;1mEarth::Directory Load (0.001588)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001364)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003426s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001673)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001745)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.785027', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001685)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001889)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
  [4;35;1mEarth::Directory Load (0.001360)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001436)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001295)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.0029s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001615)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001781)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.841195', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001360)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001797)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
delete directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/zdri
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz
create directory /home/ssurfer/earth/test_data_2/qd
create directory /home/ssurfer/earth/test_data_2/qg
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;36;1mEarth::Directory Load (0.004128)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001514)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001285)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003046s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001826)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001580)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.872538', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001827)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001862)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw
  [4;35;1mEarth::Directory Load (0.001354)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001362)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001392)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00327s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001969)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001760)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:29.900715', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001317)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001996)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt
  [4;36;1mEarth::Directory Load (0.001538)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001365)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:42:29 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001274)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00335100000000004s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.004015)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003147)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:30.006319', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001409)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002036)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh
  [4;35;1mEarth::Directory Load (0.001437)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001561)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are ["pmhklgudtco", "zdri", "qg", "qd"]
  [4;35;1mEarth::Directory Load (0.001291)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco (0.20798)
Creating directory /home/ssurfer/earth/test_data_2/zdri (0.20337)
Creating directory /home/ssurfer/earth/test_data_2/qg (0.49431)
Creating directory /home/ssurfer/earth/test_data_2/qd (0.04862)
  [4;36;1mEarth::File Load (0.001573)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.02371)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
Update cycle took 0.997584s, remaining_count is -17
  [4;35;1mEarth::Server Load (0.001698)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001701)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:31.031082', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001915)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001878)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl
  [4;35;1mEarth::Directory Load (0.001822)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002438)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.003329)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.003305)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> not changed
  [4;35;1mEarth::Directory Load (0.001891)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky -> not changed
  [4;36;1mEarth::Directory Load (0.001626)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh -> not changed
  [4;35;1mEarth::Directory Load (0.003276)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn -> not changed
  [4;36;1mEarth::Directory Load (0.005272)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt -> not changed
  [4;35;1mEarth::Directory Load (0.002085)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj -> not changed
  [4;36;1mEarth::Directory Load (0.001549)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 38) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb -> changed, subdirectories are ["mroi"]
  [4;35;1mEarth::Directory Load (0.001378)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 39) [0m
Creating directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi (0.22994)
  [4;36;1mEarth::File Load (0.001374)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 39) ORDER BY name[0m
Updating directory with name wazusb (0.01170)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed, subdirectories are ["iwnfcjzj", "tfz"]
  [4;35;1mEarth::Directory Load (0.002920)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj (0.09716)
  [4;36;1mEarth::File Load (0.001386)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Updating directory with name pmhklgudtco (0.01704)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["ojhl", "nyzmaakac"]
  [4;35;1mEarth::Directory Load (0.001617)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl (0.08894)
  [4;36;1mEarth::File Load (0.001379)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 27) ORDER BY name[0m
Updating directory with name tfz (0.01721)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001421)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.004138)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001723)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed, subdirectories are ["mvyqqkn"]
  [4;36;1mEarth::Directory Load (0.003120)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
Creating directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn (0.05416)
  [4;35;1mEarth::File Load (0.001383)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
Updating directory with name nzlhf (0.01628)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;36;1mEarth::Directory Load (0.003276)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;35;1mEarth::Directory Load (0.002630)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001465)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
Update cycle took 0.652905s, remaining_count is -24
  [4;35;1mEarth::Server Load (0.001560)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001582)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:31.718842', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001421)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002093)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy
  [4;35;1mEarth::Directory Load (0.001365)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001560)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001681)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001538)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001475)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> not changed
  [4;36;1mEarth::Directory Load (0.002460)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn -> not changed
  [4;35;1mEarth::Directory Load (0.001896)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt -> not changed
  [4;36;1mEarth::Directory Load (0.001833)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj -> not changed
  [4;35;1mEarth::Directory Load (0.001881)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 38) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb -> not changed
  [4;36;1mEarth::Directory Load (0.001988)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 39) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi -> not changed
  [4;35;1mEarth::Directory Load (0.001595)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg -> not changed
  [4;36;1mEarth::Directory Load (0.001618)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh -> not changed
  [4;35;1mEarth::Directory Load (0.001380)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky -> not changed
  [4;36;1mEarth::Directory Load (0.001375)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.002643)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002055)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;35;1mEarth::Directory Load (0.001588)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001449)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;35;1mEarth::Directory Load (0.003029)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001721)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.001532)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;35;1mEarth::Directory Load (0.001451)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;36;1mEarth::Directory Load (0.001358)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001553)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.001537)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001543)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
Update cycle took 0.110816s, remaining_count is -24
  [4;36;1mEarth::Server Load (0.002098)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001626)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:31.860313', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001664)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001857)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs
  [4;36;1mEarth::Directory Load (0.001397)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001552)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001907)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001382)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001455)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl -> not changed
  [4;35;1mEarth::Directory Load (0.001843)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 35) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn -> not changed
  [4;36;1mEarth::Directory Load (0.001459)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 36) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt -> not changed
  [4;35;1mEarth::Directory Load (0.001851)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 37) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj -> not changed
  [4;36;1mEarth::Directory Load (0.001558)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 38) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb -> not changed
  [4;35;1mEarth::Directory Load (0.001834)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 39) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi -> not changed
  [4;36;1mEarth::Directory Load (0.001571)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 43) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg -> not changed
  [4;35;1mEarth::Directory Load (0.001886)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 44) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh -> not changed
  [4;36;1mEarth::Directory Load (0.001867)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 40) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky -> not changed
  [4;35;1mEarth::Directory Load (0.001362)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 41) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;36;1mEarth::Directory Load (0.001478)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001464)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;36;1mEarth::Directory Load (0.003115)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;35;1mEarth::Directory Load (0.005890)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001404)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;35;1mEarth::Directory Load (0.003885)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001379)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001524)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;36;1mEarth::Directory Load (0.001629)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;35;1mEarth::Directory Load (0.001651)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001530)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001616)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> changed less than 1 second ago (Thu Apr 10 22:42:31 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001366)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
Update cycle took 0.108697s, remaining_count is -24
  [4;35;1mEarth::Server Load (0.001662)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001703)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:31.997690', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001509)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001801)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
delete directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;35;1mEarth::Directory Load (0.001420)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001478)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001511)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001617)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.002150)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
  [4;36;1mEarth::File Load (0.001582)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 34) ORDER BY name[0m
Removing directory with name obwqvl (0.25508)
Updating directory with name qg (0.05911)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.001889)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001727)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001798)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["sudzbs", "ojhl", "nyzmaakac"]
  [4;36;1mEarth::Directory Load (0.001612)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs (0.09697)
  [4;35;1mEarth::File Load (0.003263)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 27) ORDER BY name[0m
Updating directory with name tfz (0.01997)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001416)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
  [4;35;1mEarth::File Load (0.001582)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 28) ORDER BY name[0m
Updating directory with name nyzmaakac (0.01145)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed, subdirectories are ["rwxclpevl", "hahmrbpuujs"]
  [4;36;1mEarth::Directory Load (0.001913)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs (0.05692)
  [4;35;1mEarth::File Load (0.001430)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 47) ORDER BY name[0m
Updating directory with name ojhl (0.01451)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001667)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.001593)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.002482)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001711)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> changed, subdirectories are ["jctknnq"]
  [4;36;1mEarth::Directory Load (0.001786)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
Creating directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq (0.09501)
  [4;35;1mEarth::File Load (0.001951)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 49) ORDER BY name[0m
Updating directory with name mvyqqkn (0.01198)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;36;1mEarth::Directory Load (0.002302)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;35;1mEarth::Directory Load (0.001569)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
Update cycle took 0.720373s, remaining_count is -20
  [4;36;1mEarth::Server Load (0.001583)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001661)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:32.898375', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001418)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001889)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
  [4;36;1mEarth::Directory Load (0.001396)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002000)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001711)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001452)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001530)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;35;1mEarth::Directory Load (0.001551)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001887)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001450)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["ojhl", "nyzmaakac"]
  [4;36;1mEarth::Directory Load (0.001722)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
  [4;35;1mEarth::File Load (0.001721)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 27) ORDER BY name[0m
Removing directory with name sudzbs (0.01654)
Updating directory with name tfz (0.01352)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;36;1mEarth::Directory Load (0.001897)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;35;1mEarth::Directory Load (0.002617)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001436)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001422)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;36;1mEarth::Directory Load (0.001530)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> not changed
  [4;35;1mEarth::Directory Load (0.001811)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw -> not changed
  [4;36;1mEarth::Directory Load (0.001869)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 31) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001541)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.001519)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.001695)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001594)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001487)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
Update cycle took 0.379523s, remaining_count is -18
  [4;36;1mEarth::Server Load (0.001681)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001682)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:33.305165', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.002447)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001819)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
  [4;36;1mEarth::Directory Load (0.001407)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001405)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.003072)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.003440)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001763)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.003075)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001643)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
  [4;35;1mEarth::File Load (0.001446)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 30) ORDER BY name[0m
Removing directory with name pxijmhsw (0.02050)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.007730)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001562)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001869)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001895)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001654)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002001)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001676)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;36;1mEarth::Directory Load (0.001590)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;35;1mEarth::Directory Load (0.003658)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;36;1mEarth::Directory Load (0.001483)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001568)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001411)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
Update cycle took 0.119771s, remaining_count is -17
  [4;35;1mEarth::Server Load (0.001583)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003812)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:33.453742', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001435)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002047)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001861)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001476)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.003426)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001599)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001389)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001496)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.002550)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001563)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;35;1mEarth::Directory Load (0.003474)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;36;1mEarth::Directory Load (0.001429)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> not changed
  [4;35;1mEarth::Directory Load (0.001707)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001638)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001818)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001594)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001920)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;36;1mEarth::Directory Load (0.005176)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.004502)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001696)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001458)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001426)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
  [4;35;1mEarth::File Load (0.001382)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 30) ORDER BY name[0m
Update cycle took 0.096118s, remaining_count is -17
  [4;36;1mEarth::Server Load (0.003431)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001906)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:33.588298', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001422)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.003787)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd/zvci
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw
  [4;36;1mEarth::Directory Load (0.001439)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001371)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001843)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001432)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001366)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.006865)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001551)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.001397)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;36;1mEarth::Directory Load (0.001507)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> not changed
  [4;35;1mEarth::Directory Load (0.001431)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001663)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.001914)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001565)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001960)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001493)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001766)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001538)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001416)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001559)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
  [4;36;1mEarth::File Load (0.001370)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 30) ORDER BY name[0m
Update cycle took 0.085155s, remaining_count is -17
  [4;35;1mEarth::Server Load (0.001605)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001608)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:33.709182', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001399)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.004668)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql
  [4;35;1mEarth::Directory Load (0.001520)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001367)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.002149)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001435)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001359)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001669)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.002062)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.004261)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001551)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001648)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001590)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.003284)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001531)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002792)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;35;1mEarth::Directory Load (0.001532)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001663)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.004495)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001534)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.001473)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001411)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
  [4;35;1mEarth::File Load (0.001833)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 30) ORDER BY name[0m
Update cycle took 0.08512s, remaining_count is -17
  [4;36;1mEarth::Server Load (0.001601)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001641)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:33.825524', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001370)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001858)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
  [4;36;1mEarth::Directory Load (0.001366)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001375)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.003207)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.003436)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.003137)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002289)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;35;1mEarth::Directory Load (0.003813)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001540)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.003309)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001602)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.003303)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;36;1mEarth::Directory Load (0.002105)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001661)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001512)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed less than 1 second ago (Thu Apr 10 22:42:33 +0930 2008)
  [4;35;1mEarth::Directory Load (0.002002)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001605)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.001816)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001387)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001378)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 30) [0m
  [4;36;1mEarth::File Load (0.001436)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 30) ORDER BY name[0m
Update cycle took 0.103628s, remaining_count is -17
  [4;35;1mEarth::Server Load (0.001980)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001922)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:33.963832', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001755)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.004260)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001397)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001601)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001521)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;36;1mEarth::Directory Load (0.001435)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;35;1mEarth::Directory Load (0.001401)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> changed, subdirectories are ["nfyunk", "iwnfcjzj", "lopftqw", "tfz"]
  [4;36;1mEarth::Directory Load (0.001663)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk (0.06389)
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw (0.06147)
  [4;35;1mEarth::File Load (0.001447)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Updating directory with name pmhklgudtco (0.02158)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> changed, subdirectories are ["fplptb", "ojhl", "nyzmaakac"]
  [4;36;1mEarth::Directory Load (0.001866)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb (0.05224)
  [4;35;1mEarth::File Load (0.001440)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 27) ORDER BY name[0m
Updating directory with name tfz (0.01983)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001459)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> changed, subdirectories are ["rwxclpevl", "mbvbwuw", "hahmrbpuujs"]
  [4;35;1mEarth::Directory Load (0.003292)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw (0.11116)
  [4;36;1mEarth::File Load (0.001368)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 47) ORDER BY name[0m
Updating directory with name ojhl (0.02345)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed, subdirectories are ["mumvun"]
  [4;35;1mEarth::Directory Load (0.001541)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun (0.06495)
  [4;36;1mEarth::File Load (0.002682)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 48) ORDER BY name[0m
Updating directory with name rwxclpevl (0.01524)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed, subdirectories are ["df"]
  [4;35;1mEarth::Directory Load (0.001807)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df (0.08169)
  [4;36;1mEarth::File Load (0.001459)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 52) ORDER BY name[0m
Updating directory with name hahmrbpuujs (0.01385)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> changed, subdirectories are ["ong"]
  [4;35;1mEarth::Directory Load (0.001713)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
  [4;36;1mEarth::File Load (0.001444)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 45) ORDER BY name[0m
Updating directory with name iwnfcjzj (0.01152)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.002962)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> changed, subdirectories are ["aqzgshlcxr"]
  [4;36;1mEarth::Directory Load (0.001706)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
  [4;35;1mEarth::File Load (0.001834)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 29) ORDER BY name[0m
Removing directory with name jsrjcmsqwjd (0.02150)
Updating directory with name zdri (0.01193)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001668)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> changed, subdirectories are ["cpezt", "mvyqqkn"]
  [4;35;1mEarth::Directory Load (0.001671)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
Creating directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt (0.05657)
  [4;36;1mEarth::File Load (0.001689)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
Updating directory with name nzlhf (0.01837)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;35;1mEarth::Directory Load (0.002205)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;36;1mEarth::Directory Load (0.001922)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;35;1mEarth::Directory Load (0.002825)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
Update cycle took 1.006713s, remaining_count is -24
  [4;36;1mEarth::Server Load (0.002333)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001898)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:35.003673', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.002997)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001959)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht
  [4;36;1mEarth::Directory Load (0.001989)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.002014)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qd -> not changed
  [4;35;1mEarth::Directory Load (0.001629)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 42) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/qg -> not changed
  [4;36;1mEarth::Directory Load (0.001920)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 34) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri -> not changed
  [4;35;1mEarth::Directory Load (0.002248)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 29) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr -> not changed
  [4;36;1mEarth::Directory Load (0.001854)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 32) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf -> not changed
  [4;35;1mEarth::Directory Load (0.001619)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 33) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn -> not changed
  [4;36;1mEarth::Directory Load (0.001556)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 49) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq -> not changed
  [4;35;1mEarth::Directory Load (0.256146)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 53) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy -> not changed
  [4;36;1mEarth::Directory Load (0.001487)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 54) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt -> not changed
  [4;35;1mEarth::Directory Load (0.001805)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 62) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco -> not changed
  [4;36;1mEarth::Directory Load (0.001820)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz -> not changed
  [4;35;1mEarth::Directory Load (0.001844)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 27) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac -> not changed
  [4;36;1mEarth::Directory Load (0.001809)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 28) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb -> not changed
  [4;35;1mEarth::Directory Load (0.001546)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 57) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl -> not changed
  [4;36;1mEarth::Directory Load (0.002409)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 47) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl -> changed, subdirectories are ["bkht", "mumvun"]
  [4;35;1mEarth::Directory Load (0.001715)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 48) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht (0.05881)
  [4;36;1mEarth::File Load (0.001365)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 48) ORDER BY name[0m
Updating directory with name rwxclpevl (0.01471)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun -> changed, subdirectories are ["qgywvebuilq"]
  [4;35;1mEarth::Directory Load (0.001541)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 60) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq (0.10053)
  [4;36;1mEarth::File Load (0.001713)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 60) ORDER BY name[0m
Updating directory with name mumvun (0.01042)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw -> not changed
  [4;35;1mEarth::Directory Load (0.001971)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 58) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql -> not changed
  [4;36;1mEarth::Directory Load (0.001848)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 59) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs -> changed, subdirectories are ["df", "orajhnqhctx"]
  [4;35;1mEarth::Directory Load (0.001666)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 52) [0m
Creating directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx (0.12511)
  [4;36;1mEarth::File Load (0.002055)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 52) ORDER BY name[0m
Updating directory with name hahmrbpuujs (0.01553)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df -> not changed
  [4;35;1mEarth::Directory Load (0.001851)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 61) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk -> not changed
  [4;36;1mEarth::Directory Load (0.001610)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 55) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw -> not changed
  [4;35;1mEarth::Directory Load (0.001557)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 56) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj -> not changed
  [4;36;1mEarth::Directory Load (0.001689)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 45) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong -> not changed
  [4;35;1mEarth::Directory Load (0.001578)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 46) [0m
Update cycle took 0.701961s, remaining_count is -29
  [4;36;1mEarth::Server Load (0.001581)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001827)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:35.733332', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001868)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001905)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.002824)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001883)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001855)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.004122)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001679)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001569)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001517)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001787)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001573)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 14, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001389)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004949)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 14 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001582)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'late_cache') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002323)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'late_cache', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001210)[0m   [0mSELECT currval('servers_id_seq')[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.00218)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Update cycle took 0.004916s, remaining_count is -1
  [4;36;1mEarth::Directory Create (0.001756)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 15, 'f', NULL, 1, -4, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001432)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001561)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'dir1', 15, 'f', NULL, 2, -3, 0, 69, E'/home/ssurfer/earth/test_data/dir1', -2, 0)[0m
  [4;35;1mSQL (0.000936)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004071)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END) WHERE (directories.server_id = 15 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001456)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 69) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating file with name file1 (0.00784)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03167)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file1 (0.00639)
checking for update on file file1
Updating directory with name dir1 (0.01449)
Update cycle took 0.065774s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001667)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001703)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:35.968100', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 14[0m
  [4;36;1mEarth::Directory Load (0.001382)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 68) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001494)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 68) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001892)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 68) [0m
  [4;35;1mEarth::File Load (0.002848)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 68) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 68) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002485)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 68) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 68) AND directories.server_id = 14) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002200)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 68) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 68) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mSQL (0.000862)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001063)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001589)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001467)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001350)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001760)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001739)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001347)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001919)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 16, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001214)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003656)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 16 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001621)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 71) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04813)
  [4;36;1mEarth::File Load (0.001385)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 71) ORDER BY name[0m
Creating file with name file1 (0.00698)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03093)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.094948s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001514)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002041)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:36.137323', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 16[0m
  [4;35;1mEarth::Directory Load (0.001409)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 71) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001429)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 72) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001520)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 71) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 71) [0m
  [4;35;1mEarth::File Load (0.002388)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 71) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 71) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.004576)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 71) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 71) AND directories.server_id = 16) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002294)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 71) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 71) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001578)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.004348)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002269)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001286)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001349)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 71) [0m
  [4;35;1mSQL (0.000876)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000656)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001378)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001936)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.002616)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.002917)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001253)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001517)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001562)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 17, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000903)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003927)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 17 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001441)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 73) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir2b", "dir1", "dir2a"]
Creating directory /home/ssurfer/earth/test_data/dir2b (0.06556)
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06694)
Creating directory /home/ssurfer/earth/test_data/dir2a (0.06453)
  [4;35;1mEarth::File Load (0.001343)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 73) ORDER BY name[0m
Creating file with name file1 (0.00646)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.09641)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2a -> not changed
Update cycle took 0.30675s, remaining_count is -3
  [4;36;1mEarth::Server Load (0.001721)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001554)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:36.545034', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.002727)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 73) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 4
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001734)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 73) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir2b (0.01129)
Removing directory with name dir2a (0.01084)
Updating directory with name /home/ssurfer/earth/test_data (0.04167)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.073002s, remaining_count is 2
  [4;36;1mEarth::Server Load (0.001679)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001604)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:36.632614', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001794)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 73) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001390)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 75) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001736)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 73) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001995)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 73) [0m
  [4;36;1mEarth::File Load (0.002607)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 73) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 73) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.004168)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 73) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 73) AND directories.server_id = 17) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002837)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 73) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 73) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001737)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002004)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.006273)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001541)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001400)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 75) [0m
  [4;36;1mEarth::Directory Load (0.001417)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 73) [0m
  [4;35;1mSQL (0.000946)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000699)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001422)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.003353)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.003511)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001482)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001631)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001188)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001725)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 18, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001134)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003758)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 18 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001688)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 77) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.29006)
  [4;35;1mEarth::File Load (0.002077)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 77) ORDER BY name[0m
Creating file with name file1 (0.00693)
Creating file with name file1b (0.00808)
Creating file with name file1a (0.00696)
checking for update on file file1
checking for update on file file1b
checking for update on file file1a
Updating directory with name /home/ssurfer/earth/test_data (0.04689)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.36841s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001530)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001656)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:37.114703', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001533)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 77) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001645)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 77) ORDER BY name[0m
checking for update on file file1
Removing file with name file1a (0.00518)
Removing file with name file1b (0.00218)
Updating directory with name /home/ssurfer/earth/test_data (0.62098)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.634913s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001603)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001535)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:37.764741', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001596)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002021)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001864)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001356)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001431)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 78) [0m
  [4;35;1mEarth::Directory Load (0.001464)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 77) [0m
  [4;36;1mSQL (0.000916)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000875)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.002044)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.005411)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001530)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001652)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001351)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000940)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001533)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 19, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000978)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004596)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 19 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001899)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 79) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "dir_a"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.08186)
Creating directory /home/ssurfer/earth/test_data/dir_a (0.53494)
  [4;36;1mEarth::File Load (0.001412)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 79) ORDER BY name[0m
Creating file with name file1 (0.00626)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.09740)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d -> not changed
Update cycle took 0.730659s, remaining_count is -9
  [4;35;1mEarth::Server Load (0.002229)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.003002)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:38.583003', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;35;1mEarth::Directory Load (0.002251)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002209)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002187)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.004060)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003274)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001982)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001866)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.004747)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003480)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001872)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001834)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001654)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 79) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 10
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001988)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 79) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir_a (0.02012)
Updating directory with name /home/ssurfer/earth/test_data (0.05544)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.08211s, remaining_count is 8
  [4;36;1mEarth::Server Load (0.001711)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001678)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:38.754780', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;36;1mSQL (0.001341)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000708)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001418)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001965)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.003521)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001737)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001494)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001140)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.003447)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 20, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001005)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.006669)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 20 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001450)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 89) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06889)
  [4;36;1mEarth::File Load (0.001358)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 89) ORDER BY name[0m
Creating file with name file1 (0.00604)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04211)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.12365s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001539)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001554)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:38.946246', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001424)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 89) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001644)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 89) ORDER BY name[0m
Removing file with name file1 (0.00387)
Removing directory with name dir1 (0.00861)
Updating directory with name /home/ssurfer/earth/test_data (0.00716)
Update cycle took 0.024943s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.001668)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001715)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:38.983454', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001333)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 89) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001364)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 89) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001547)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 89) [0m
  [4;36;1mEarth::File Load (0.003238)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 89) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 89) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002566)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 89) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 89) AND directories.server_id = 20) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003563)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 89) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 89) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001551)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001779)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001211)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.000863)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000822)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001844)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001599)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.002508)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001589)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001298)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000889)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002876)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 21, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001115)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004789)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 21 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001442)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 91) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.12778)
  [4;36;1mEarth::File Load (0.001437)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 91) ORDER BY name[0m
Creating file with name file1 (0.00661)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04502)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1/dir2 -> not changed
Update cycle took 0.185756s, remaining_count is -2
  [4;35;1mEarth::Server Load (0.001736)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001616)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:39.254995', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 91) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001526)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 91) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir1 (0.00890)
Updating directory with name /home/ssurfer/earth/test_data (0.01723)
Update cycle took 0.033291s, remaining_count is 2
  [4;35;1mEarth::Server Load (0.001962)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001463)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:39.301772', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001333)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 91) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.003285)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 91) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001729)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 91) [0m
  [4;36;1mEarth::File Load (0.002640)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 91) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 91) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.004593)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 91) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 91) AND directories.server_id = 21) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002354)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 91) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 91) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001707)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001755)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001254)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001536)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 91) [0m
  [4;35;1mSQL (0.000932)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000685)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001702)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001566)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.002656)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001508)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001277)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001027)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001539)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 22, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000960)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003902)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 22 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001420)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 94) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06568)
  [4;35;1mEarth::File Load (0.001439)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 94) ORDER BY name[0m
Creating file with name file1 (0.00614)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04301)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.122874s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002216)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001968)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:39.516338', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001399)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 94) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001522)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 94) ORDER BY name[0m
Removing file with name file1 (0.00273)
Removing directory with name dir1 (0.36146)
Update cycle took 0.369163s, remaining_count is 1
  [4;36;1mEarth::Server Load (0.003244)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001535)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:12:39.899416', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001392)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 94) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002622)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 94) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001878)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 94) and rgt > (select rgt from directories where id = 94) and directories.server_id = 22) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.001883)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -2 WHERE (id in (94)) [0m
  [4;36;1mEarth::Directory Load (0.001603)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 94) [0m
  [4;35;1mEarth::File Load (0.002811)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 94) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 94) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002308)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 94) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 94) AND directories.server_id = 22) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002685)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 94) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 94) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001726)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::File Load (0.001196)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.000911)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000672)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000997)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004759)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mSQL (0.003188)[0m   [0;1mDELETE FROM servers[0m
  [4;35;1mSQL (0.001087)[0m   [0mDELETE FROM file_metadata_strings[0m
  [4;36;1mSQL (0.001201)[0m   [0;1mDELETE FROM files[0m
  [4;35;1mSQL (0.002048)[0m   [0mDELETE FROM directories[0m
  [4;36;1mSQL (0.001569)[0m   [0;1mDELETE FROM plugin_descriptors[0m
  [4;35;1mSQL (0.001645)[0m   [0mDELETE FROM metadata_strings[0m
  [4;36;1mSQL (0.001551)[0m   [0;1mDELETE FROM metadata_attributes[0m
  [4;35;1mSQL (0.001186)[0m   [0mDELETE FROM schema_info[0m
  [4;36;1mEarth::Server Create (0.001393)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'duck.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000970)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Server Create (0.001272)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'rincewind.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001373)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.000931)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000640)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000697)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000784)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000681)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000602)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000670)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000753)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001175)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000726)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000736)[0m   [0;1mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001453)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000859)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000735)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000660)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001591)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000792)[0m   [0mBEGIN[0m


Processing BrowserController#index (for 0.0.0.0 at 2008-04-10 22:42:43) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"browser"}
Redirected to http://test.host/browser/show
Completed in 0.00733 (136 reqs/sec) | DB: 0.00609 (83%) | 302 Found [http://test.host/]
  [4;36;1mSQL (0.000747)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000589)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000901)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000704)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:42:43) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo"]}
  [4;36;1mSQL (0.004055)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Server Indexes (0.005180)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Server Indexes (0.002546)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Server Load (0.002296)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.002884)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Directory Indexes (0.004455)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Directory Indexes (0.002858)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Directory Load (0.002488)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001530)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 1) [0m
  [4;35;1mSQL (0.002306)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::File Indexes (0.004050)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::File Indexes (0.001929)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001655)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::File Load (0.003291)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000873)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.005274)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;36;1mSQL (0.002268)[0m   [0;1m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;35;1mEarth::Directory Load (0.002782)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002453)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02496)
Completed in 0.20397 (4 reqs/sec) | Rendering: 0.10083 (49%) | DB: 0.05811 (28%) | 200 OK [http://test.host/browser/show/sboard/foo]
  [4;35;1mEarth::Directory Load (0.001471)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001421)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002330)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001407)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000614)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser"}
  [4;36;1mEarth::Server Load (0.001708)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001384)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003290)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002530)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002581)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02192)
Completed in 0.08693 (11 reqs/sec) | Rendering: 0.05838 (67%) | DB: 0.01874 (21%) | 200 OK [http://test.host/browser/show]
  [4;36;1mSQL (0.000994)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000646)[0m   [0mBEGIN[0m


Processing BrowserController#flat (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"action"=>"flat", "controller"=>"browser"}
  [4;36;1mSQL (0.001084)[0m   [0;1mSHOW max_identifier_length[0m
  [4;35;1mSQL (0.002380)[0m   [0mSELECT count(*) AS count_all FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') [0m
  [4;36;1mEarth::File Load (0.003991)[0m   [0;1mSELECT files.name as name, files.directory_id as directory_id, files.modified as modified, files.bytes as bytes, files.uid as uid FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') ORDER BY bytes desc LIMIT 25 OFFSET 0[0m
Rendering template within layouts/application
Rendering browser/flat
  [4;35;1mEarth::Directory Load (0.001385)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Server Load (0.001325)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001802)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001719)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Server Load (0.001501)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.002990)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 5) and rgt > (select rgt from directories where id = 5) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001541)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001982)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Load (0.001481)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001794)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Server Load (0.001351)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mEarth::Directory Load (0.001298)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002759)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002611)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002391)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03461)
Completed in 0.18688 (5 reqs/sec) | Rendering: 0.14666 (78%) | DB: 0.03702 (19%) | 200 OK [http://test.host/browser/flat]
  [4;36;1mSQL (0.000893)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000632)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001559)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002559)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002674)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01838)
Completed in 0.21886 (4 reqs/sec) | Rendering: 0.20443 (93%) | DB: 0.00832 (3%) | 200 OK [http://test.host/browser/show/sboard]
  [4;35;1mEarth::Server Load (0.001450)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mSQL (0.000810)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000618)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001589)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001925)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001568)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001803)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.003995)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering browser/show
  [4;35;1mEarth::File Load (0.001824)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 2) ORDER BY name[0m
Completed in 0.03616 (27 reqs/sec) | Rendering: 0.00978 (27%) | DB: 0.01558 (43%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;36;1mEarth::Directory Load (0.001375)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.001398)[0m   [0mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001714)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002287)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000958)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000629)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001697)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002912)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001341)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001485)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.002547)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Sending data earth_report.csv
Completed in 0.02358 (42 reqs/sec) | Rendering: 0.00019 (0%) | DB: 0.01834 (77%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;35;1mEarth::Directory Load (0.001311)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000794)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000625)[0m   [0mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph"}
Rendering template within layouts/application
Rendering graph/index
  [4;36;1mEarth::Server Load (0.001164)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001505)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003307)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002791)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002398)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03317)
Completed in 0.07234 (13 reqs/sec) | Rendering: 0.05438 (75%) | DB: 0.01389 (19%) | 200 OK [http://test.host/graph]
  [4;35;1mSQL (0.000885)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001090)[0m   [0;1mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;35;1mEarth::Server Load (0.001786)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001889)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
Rendering template within layouts/application
Rendering graph/index
  [4;35;1mEarth::Directory Load (0.002027)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 4) and rgt > (select rgt from directories where id = 4) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.003023)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02638)
Completed in 0.06183 (16 reqs/sec) | Rendering: 0.04641 (75%) | DB: 0.01070 (17%) | 200 OK [http://test.host/graph/sboard/foo/bar/twiddle/frob]
  [4;35;1mSQL (0.000963)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000636)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:42:44) [GET]
  Session ID: 
  Parameters: {"filter_filename"=>"*.zip", "action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001803)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.004317)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002677)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003440)[0m   [0;1mSELECT * FROM files WHERE (files.name LIKE E'%.zip') AND (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
Rendering graph/directory.rxml
Completed in 0.10483 (9 reqs/sec) | Rendering: 0.07605 (72%) | DB: 0.01384 (13%) | 200 OK [http://test.host/graph/show/sboard/foo?filter_filename=%2A.zip]
  [4;35;1mSQL (0.000966)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000593)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001624)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001656)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002302)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002078)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
  [4;35;1mEarth::Directory Load (0.001799)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.13725 (7 reqs/sec) | Rendering: 0.10647 (77%) | DB: 0.01102 (8%) | 200 OK [http://test.host/graph/show/sboard/foo]
  [4;36;1mSQL (0.000853)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000624)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph"}
  [4;36;1mEarth::Server Load (0.001362)[0m   [0;1mSELECT * FROM servers [0m
Rendering graph/servers.rxml
  [4;35;1mEarth::Directory Load (0.002492)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002372)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002320)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.005548)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.08355 (11 reqs/sec) | Rendering: 0.06778 (81%) | DB: 0.01557 (18%) | 200 OK [http://test.host/graph/show]
  [4;35;1mSQL (0.000807)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000605)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard"}
  [4;35;1mEarth::Server Load (0.001976)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001254)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.002193)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002007)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 1 AND lft >= 0 AND rgt <= 11)) [0m
  [4;35;1mEarth::Directory Load (0.001726)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (5)) [0m
Rendering graph/directory.rxml
Completed in 0.10342 (9 reqs/sec) | Rendering: 0.07100 (68%) | DB: 0.01057 (10%) | 200 OK [http://test.host/graph/show/sboard]
  [4;36;1mSQL (0.000800)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000587)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;36;1mEarth::Server Load (0.002082)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002682)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002541)[0m   [0;1mSELECT * FROM directories WHERE (directories.level <= 9 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 4)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 4))) ORDER BY directories.lft[0m
  [4;35;1mEarth::File Load (0.002317)[0m   [0mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 8 AND server_id = 1 AND lft >= 4 AND rgt <= 7)) [0m
  [4;36;1mEarth::Directory Load (0.002102)[0m   [0;1mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
  [4;35;1mEarth::Directory Load (0.001385)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
Completed in 0.06251 (15 reqs/sec) | Rendering: 0.03533 (56%) | DB: 0.01450 (23%) | 200 OK [http://test.host/graph/show/sboard/foo/bar/twiddle/frob]
  [4;36;1mSQL (0.000847)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000592)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001382)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"server3"}
  [4;35;1mEarth::Server Load (0.001642)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'server3') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001284)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.001905)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 3 AND (directories.lft > (SELECT lft FROM directories WHERE id = 7)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 7))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003483)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 3 AND lft >= 0 AND rgt <= 3)) [0m
  [4;35;1mEarth::Directory Load (0.001214)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.06187 (16 reqs/sec) | Rendering: 0.03403 (55%) | DB: 0.01235 (19%) | 200 OK [http://test.host/graph/show/server3]
  [4;36;1mSQL (0.000987)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000519)[0m   [0mBEGIN[0m


Processing ServersController#edit (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"edit", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001531)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/edit
Completed in 0.04455 (22 reqs/sec) | Rendering: 0.03386 (75%) | DB: 0.00304 (6%) | 200 OK [http://test.host/servers/edit/sboard]
  [4;35;1mSQL (0.000845)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001197)[0m   [0;1mBEGIN[0m


Processing ServersController#index (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"servers"}
  [4;35;1mEarth::Server Load (0.001291)[0m   [0mSELECT * FROM servers [0m
Rendering template within layouts/servers
Rendering servers/index
  [4;36;1mEarth::Directory Load (0.001659)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002396)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002951)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002770)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.05760 (17 reqs/sec) | Rendering: 0.04377 (76%) | DB: 0.01311 (22%) | 200 OK [http://test.host/servers]
  [4;36;1mSQL (0.000847)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000848)[0m   [0mBEGIN[0m


Processing ServersController#show (for 0.0.0.0 at 2008-04-10 22:42:45) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.002698)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/show
  [4;35;1mEarth::Directory Load (0.002769)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mSQL (0.002000)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;35;1mEarth::Directory Load (0.001543)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002400)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001695)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (directories.server_id = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
Completed in 0.07084 (14 reqs/sec) | Rendering: 0.05516 (77%) | DB: 0.01480 (20%) | 200 OK [http://test.host/servers/show/sboard]
  [4;35;1mSQL (0.000864)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000605)[0m   [0;1mBEGIN[0m


Processing ServersController#update (for 0.0.0.0 at 2008-04-10 22:42:45) [PUT]
  Session ID: 
  Parameters: {"action"=>"update", "id"=>"1", "controller"=>"servers", "server"=>{}}
  [4;35;1mEarth::Server Load (0.003840)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Server Update (0.003106)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 1[0m
Redirected to http://test.host/servers/show/sboard
Completed in 0.01288 (77 reqs/sec) | DB: 0.00841 (65%) | 302 Found [http://test.host/servers/1?]
  [4;35;1mSQL (0.000966)[0m   [0mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001363)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000801)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000803)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000670)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001892)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.001238)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.004208)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::File Indexes (0.005162)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::File Indexes (0.002972)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::File Load (0.001686)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mEarth::File Load (0.001311)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;35;1mSQL (0.002553)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Directory Indexes (0.004299)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Directory Indexes (0.002446)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001840)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003457)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mPK and serial sequence (0.004941)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'files'::regclass
[0m
  [4;35;1mEarth::File Create (0.001471)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(3, E'c', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001263)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mEarth::File Delete all (0.002123)[0m   [0mDELETE FROM files WHERE ("id" IN (2)) [0m
  [4;36;1mSQL (0.001383)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000606)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001613)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001324)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mPK and serial sequence (0.005163)[0m   [0;1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'directories'::regclass
[0m
  [4;35;1mEarth::Directory Create (0.002881)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000919)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004564)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001487)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.003904)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.001085)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000596)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001359)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001346)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.002409)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001596)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001494)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'fiddle', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/fiddle', -1, 0)[0m
  [4;35;1mSQL (0.001151)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003154)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001409)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001726)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001668)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001643)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001881)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001597)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.004835)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 2 AND 9) [0m
  [4;36;1mEarth::Directory Update (0.001987)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 9 THEN 8 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 9 THEN 8 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 9) [0m
  [4;35;1mEarth::Directory Load (0.001788)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mSQL (0.000868)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000849)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001823)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001481)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;36;1mEarth::Directory Load (0.001664)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001855)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;35;1mEarth::Directory Load (0.001356)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;36;1mEarth::Directory Load (0.001459)[0m   [0;1mSELECT lft, rgt FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;35;1mEarth::Directory Delete all (0.002016)[0m   [0mDELETE FROM directories WHERE (directories.server_id = 1 AND lft BETWEEN 1 AND 10) [0m
  [4;36;1mEarth::Directory Update (0.002028)[0m   [0;1mUPDATE directories SET lft = lft - (CASE WHEN lft > 10 THEN 10 ELSE 0 END), rgt = rgt - (CASE WHEN rgt > 10 THEN 10 ELSE 0 END) WHERE (directories.server_id = 1 AND rgt > 10) [0m
  [4;35;1mEarth::Directory Load (0.001521)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.002572)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001370)[0m   [0mSELECT * FROM directories [0m
  [4;36;1mEarth::File Load (0.001460)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 5) [0m
  [4;35;1mEarth::File Load (0.001539)[0m   [0mSELECT * FROM files WHERE (files."id" = 8) [0m
  [4;36;1mEarth::File Load (0.001397)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 9) [0m
  [4;35;1mEarth::File Load (0.001323)[0m   [0mSELECT * FROM files WHERE (files."id" = 10) [0m
  [4;36;1mEarth::File Load (0.001211)[0m   [0;1mSELECT * FROM files [0m
  [4;35;1mSQL (0.000796)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000623)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001361)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001303)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001303)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001316)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 3) [0m
  [4;35;1mEarth::Directory Load (0.001401)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 4) [0m
  [4;36;1mEarth::Directory Load (0.001281)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 5) [0m
  [4;35;1mSQL (0.000822)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000571)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003350)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001877)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001438)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001853)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001361)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001689)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/twiddle') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001553)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;36;1mEarth::Directory Load (0.001591)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/bar') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001936)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/foo/bar/boo') LIMIT 1[0m
  [4;36;1mSQL (0.000748)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000799)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001362)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001395)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001292)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001295)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::Directory Load (0.001715)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::Directory Load (0.001302)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 6) [0m
  [4;36;1mSQL (0.002000)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001059)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001414)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002951)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001411)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.007233)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mEarth::Directory Load (0.001385)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002661)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001344)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002550)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001449)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::File Load (0.002467)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::File Load (0.002236)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 5) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 5) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001416)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002245)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001402)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mEarth::File Load (0.002359)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000899)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000612)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001593)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001764)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001325)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.002207)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;36;1mEarth::Directory Load (0.001456)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Directory Load (0.002360)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.000814)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000580)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001445)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001318)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001399)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mSQL (0.000757)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000689)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001499)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000785)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000572)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002689)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003147)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;36;1mEarth::File Load (0.001526)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mSQL (0.000788)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000558)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001308)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001726)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001538)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mSQL (0.001400)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000660)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001302)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001325)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001571)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;35;1mSQL (0.001141)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003715)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mSQL (0.002589)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::Server Indexes (0.004131)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::Server Indexes (0.002631)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Server Load (0.001917)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Create (0.001483)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/a/root/directory', 1, 'f', NULL, 1, -2, 0, NULL, E'/a/root/directory', -1, 0)[0m
  [4;36;1mSQL (0.001050)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003907)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.000880)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000591)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001402)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001544)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'blah', 1, 'f', NULL, 1, -2, 0, NULL, E'/foo/blah', -1, 0)[0m
  [4;36;1mSQL (0.000938)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.005162)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 1 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mSQL (0.000974)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000755)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001312)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002553)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001347)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.005451)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001314)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002422)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001714)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.002269)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mSQL (0.000745)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000705)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001314)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.002443)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Server Load (0.001795)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mSQL (0.000774)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000603)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001362)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001568)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;35;1mEarth::Directory Create (0.001481)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'another', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/another', -1, 0)[0m
  [4;36;1mSQL (0.000916)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003378)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Update (0.002034)[0m   [0;1mUPDATE directories SET "level" = 3, "modified" = NULL, "server_id" = 1, "count" = 0, "name" = E'another', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo/bar/another', "parent_id" = 2 WHERE id = 13[0m
  [4;35;1mEarth::Directory Load (0.001678)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001397)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 13) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002270)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001953)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.000909)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000609)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001332)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.000964)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000584)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Load (0.001800)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;35;1mEarth::File Load (0.001711)[0m   [0mSELECT * FROM files WHERE (files."id" = 2) [0m
  [4;36;1mEarth::File Load (0.001380)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;35;1mEarth::File Load (0.001578)[0m   [0mSELECT * FROM files WHERE (files."id" = 4) [0m
  [4;36;1mEarth::File Load (0.001461)[0m   [0;1mSELECT * FROM files WHERE (files."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001381)[0m   [0mSELECT * FROM files WHERE (files."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.002458)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.002452)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001401)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002749)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000977)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000588)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001654)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000901)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000638)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001698)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001341)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001357)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.001645)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'wibble', 1, 'f', NULL, 3, -2, 0, 2, E'/foo/bar/wibble', -1, 0)[0m
  [4;35;1mSQL (0.001000)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002741)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 2) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 2) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 2) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001607)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Update (0.003110)[0m   [0;1mUPDATE directories SET "level" = 1, "modified" = '1970-01-01 00:00:00.000000', "server_id" = 1, "count" = 0, "name" = E'name', "bytes" = 0, "cache_valid" = 'f', "blocks" = 0, "path" = E'/foo', "parent_id" = NULL WHERE id = 1[0m
  [4;35;1mEarth::Directory Load (0.002782)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001331)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::Directory Load (0.001566)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 2) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002029)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 1) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002081)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001843)[0m   [0;1mUPDATE directories SET bytes = bytes + 3, blocks = blocks + 2, count = count + 2 WHERE (id in (1)) [0m
  [4;35;1mEarth::Directory Load (0.001506)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000906)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000643)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000736)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000949)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001247)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000710)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001794)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000684)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000828)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000718)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000773)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000701)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000744)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000691)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000794)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000676)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001077)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000838)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001725)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.000000)[0m   [0mPGError: ERROR: invalid byte sequence for encoding "UTF8": 0xa9
HINT: This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding".
: INSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'©', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.000949)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000887)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001575)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Create (0.003242)[0m   [0mINSERT INTO files ("bytes", "name", "gid", "modified", "uid", "directory_id", "blocks") VALUES(NULL, E'ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°', NULL, NULL, NULL, 1, 0)[0m
  [4;36;1mSQL (0.001152)[0m   [0;1mSELECT currval('files_id_seq')[0m
  [4;35;1mSQL (0.000893)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000693)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.001871)[0m   [0mSELECT * FROM files WHERE (files."id" = 1) [0m
  [4;36;1mSQL (0.001241)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001310)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000877)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000824)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001114)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000692)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000801)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000661)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000858)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000684)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000827)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000744)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.003441)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000726)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000789)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000700)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000859)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000838)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000790)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000696)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000868)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000697)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001394)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000707)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000727)[0m   [0;1mROLLBACK[0m
allow_concurrency=true
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74013cc @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.004096)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000859)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.000820)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000704)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.002254)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000511)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.003312)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.019108)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000861)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000974)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000752)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001593)[0m   [0;1mSELECT version()[0m
  [4;35;1mEarth::File Load (0.004514)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000847)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000538)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.016570)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000886)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Load (0.002242)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000736)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000590)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001328)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.015540)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.002288)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000737)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000532)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001671)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.014659)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno1', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno1', -1, 0)[0m
  [4;35;1mSQL (0.001352)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.007790)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mEarth::File Load (0.005888)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000759)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000718)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001459)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mSQL (0.022951)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::File Load (0.004883)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000766)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000542)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001790)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.011323)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000803)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001392)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003611)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000735)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000538)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001517)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Create (0.013906)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno2', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno2', -1, 0)[0m
  [4;36;1mSQL (0.000949)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002925)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.003575)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::File Load (0.004610)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000817)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.000681)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001677)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.010950)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000662)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001373)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::File Load (0.002421)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000756)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.000539)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001329)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Create (0.013947)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno3', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno3', -1, 0)[0m
  [4;35;1mSQL (0.000965)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002505)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001434)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::File Load (0.004442)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mSQL (0.000763)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.003554)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001377)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.013582)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000673)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001384)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::File Load (0.003267)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000781)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Create (0.009509)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno4', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno4', -1, 0)[0m
  [4;36;1mSQL (0.001147)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004203)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001487)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.003409)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000927)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001417)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001446)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno5', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno5', -1, 0)[0m
  [4;35;1mSQL (0.000880)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002607)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001602)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001593)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000637)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002469)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001562)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno6', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno6', -1, 0)[0m
  [4;36;1mSQL (0.004090)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002550)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001459)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001738)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000900)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001380)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001433)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno7', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno7', -1, 0)[0m
  [4;35;1mSQL (0.000889)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002545)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001628)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001513)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000891)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.002732)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001477)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno8', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno8', -1, 0)[0m
  [4;36;1mSQL (0.001161)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002545)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.001418)[0m   [0;1mCOMMIT[0m
  [4;35;1mEarth::Directory Load (0.001993)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mSQL (0.000651)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Directory Load (0.001488)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Create (0.001601)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno9', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno9', -1, 0)[0m
  [4;35;1mSQL (0.000925)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.002685)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;35;1mSQL (0.001503)[0m   [0mCOMMIT[0m
  [4;36;1mEarth::Directory Load (0.001686)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mSQL (0.000654)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Directory Load (0.001572)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mEarth::Directory Create (0.001930)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'bruno10', 1, 'f', NULL, 2, -2, 0, 1, E'/foo/bruno10', -1, 0)[0m
  [4;36;1mSQL (0.000887)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.002968)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN lft < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT rgt FROM directories WHERE id = 1) THEN 2 WHEN rgt < 0 THEN ((SELECT rgt FROM directories WHERE id = 1) + 2) ELSE 0 END) WHERE (directories.server_id = 1 AND (rgt >= (SELECT rgt FROM directories WHERE id = 1) OR rgt < 0)) [0m
  [4;36;1mSQL (0.002962)[0m   [0;1mCOMMIT[0m
allow_concurrency=false
Defined connections: {"ActiveRecord::Base"=>#<ActiveRecord::Base::ConnectionSpecification:0xb74013cc @adapter_method="postgresql_connection", @config={:database=>"earth_test", :adapter=>"postgresql", :encoding=>"utf8", :allow_concurrency=>true, :password=>"earth", :host=>"localhost", :username=>"earth"}>}
Active connections: {}
Active connection name: ActiveRecord::Base
  [4;35;1mSQL (0.001043)[0m   [0mSHOW client_min_messages[0m
  [4;36;1mSQL (0.000752)[0m   [0;1mSET client_min_messages TO 'panic'[0m
  [4;35;1mSQL (0.000737)[0m   [0mSHOW standard_conforming_strings[0m
  [4;36;1mSQL (0.000763)[0m   [0;1mSET client_min_messages TO 'notice'[0m
  [4;35;1mSQL (0.001536)[0m   [0mSELECT version()[0m
  [4;36;1mSQL (0.000662)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000804)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000563)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000596)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000544)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.000697)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000495)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.002968)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000747)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000627)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001466)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001761)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Directory Load (0.001297)[0m   [0;1mSELECT * FROM directories [0m
  [4;35;1mEarth::Directory Load (0.004015)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Directory Load (0.001336)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 6) [0m
  [4;35;1mEarth::File Load (0.001334)[0m   [0mSELECT * FROM files [0m
  [4;36;1mSQL (0.000802)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000590)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.002396)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.001501)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.003688)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001306)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002591)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001531)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.002060)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002634)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mSQL (0.000791)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000593)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001622)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002295)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = '2008-04-10 13:13:05.234367' WHERE "id" = 1[0m
  [4;35;1mSQL (0.000778)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.002327)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.002676)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.000677)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000569)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001639)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mSQL (0.000696)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000553)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::Server Load (0.001682)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001258)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002328)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001277)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001389)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002184)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mEarth::Server Load (0.001231)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001230)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002501)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mSQL (0.000813)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000739)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001699)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Destroy (0.001644)[0m   [0m DELETE FROM servers
 WHERE "id" = 1
[0m
  [4;36;1mEarth::Server Load (0.001454)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mPK and serial sequence (0.005795)[0m   [0m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = 'servers'::regclass
[0m
  [4;36;1mEarth::Server Create (0.001484)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001266)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.002156)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001442)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001670)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001381)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001384)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::Directory Load (0.001429)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001913)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 4) [0m
  [4;35;1mEarth::Directory Load (0.002804)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;36;1mEarth::Directory Load (0.004323)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) ORDER BY lft[0m
  [4;35;1mSQL (0.000811)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000601)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001396)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001583)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001232)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001454)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001199)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001972)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001543)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 5, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000939)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004971)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 5 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 5 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.002971)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 8) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06511)
  [4;35;1mEarth::File Load (0.001328)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 8) ORDER BY name[0m
Creating file with name file1 (0.00710)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03735)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.115923s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001500)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001689)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:05.518977', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 5[0m
  [4;36;1mEarth::Directory Load (0.001703)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001678)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001870)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001594)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.002525)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001409)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 8) [0m
  [4;36;1mSQL (0.000990)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000638)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001849)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001372)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001186)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001747)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.002527)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000981)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001455)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 6, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001157)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003681)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 6 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 6 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001445)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06584)
  [4;36;1mEarth::File Load (0.001336)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
Creating file with name file1 (0.00773)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04272)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.122284s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001877)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001586)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:05.721034', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001535)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 10) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;36;1mEarth::File Load (0.001437)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03842)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00708)
checking for update on file file1
checking for update on file file2
Updating directory with name dir1 (0.01374)
Update cycle took 0.066952s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002109)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001636)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:05.801333', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 6[0m
  [4;35;1mEarth::Directory Load (0.001521)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001734)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001388)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 10) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001829)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 10) and rgt > (select rgt from directories where id = 10) and directories.server_id = 6) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.002139)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (10)) [0m
  [4;36;1mEarth::Directory Load (0.001592)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;35;1mEarth::File Load (0.002412)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002321)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002241)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 10) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 10) AND directories.server_id = 6) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001437)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.005034)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001658)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001411)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001719)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mEarth::Directory Load (0.001370)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 10) [0m
  [4;36;1mEarth::Directory Load (0.001666)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 11) [0m
  [4;35;1mSQL (0.001090)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000713)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001465)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001747)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001231)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001507)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001214)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001388)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001608)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 7, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001236)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003688)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 7 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 7 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001422)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06649)
  [4;35;1mEarth::File Load (0.001376)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
Creating file with name file1 (0.00633)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04166)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.120558s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001689)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001788)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:06.038836', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001435)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 12) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001842)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03784)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file2 (0.00853)
checking for update on file file1
Updating file with name file1 (0.00387)
checking for update on file file2
Updating directory with name dir1 (0.01355)
Update cycle took 0.073239s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001573)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001447)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:06.125078', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 7[0m
  [4;36;1mEarth::Directory Load (0.001657)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 12) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001880)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 13) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001491)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 12) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002200)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 12) and rgt > (select rgt from directories where id = 12) and directories.server_id = 7) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Update (0.001700)[0m   [0;1mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -1 WHERE (id in (12)) [0m
  [4;35;1mEarth::Directory Load (0.001416)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;36;1mEarth::File Load (0.003955)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002316)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002704)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 12) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 12) AND directories.server_id = 7) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001471)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001637)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001700)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001628)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.004125)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mEarth::Directory Load (0.001412)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 12) [0m
  [4;35;1mEarth::Directory Load (0.001364)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 13) [0m
  [4;36;1mSQL (0.000915)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000724)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001670)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001903)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001247)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001870)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001329)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000956)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001688)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 8, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000961)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003797)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 8 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 8 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001625)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06964)
  [4;36;1mEarth::File Load (0.001446)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
Creating file with name file1 (0.00862)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04085)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.125871s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.002582)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001464)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:06.374097', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.001472)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 14) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001726)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 15) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001435)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001478)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;35;1mEarth::File Load (0.006036)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002314)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002649)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 14) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 14) AND directories.server_id = 8) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001412)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 14) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001571)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 14) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.37373)
  [4;36;1mEarth::File Load (0.001430)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 14) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04672)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.431206s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001694)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001719)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:06.882867', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 8[0m
  [4;35;1mEarth::Directory Load (0.002187)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001986)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001566)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 14) [0m
  [4;36;1mSQL (0.000924)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000657)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.003273)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001478)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001283)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001700)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001263)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000982)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001535)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 9, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000942)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003929)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 9 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 9 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001466)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06433)
  [4;36;1mEarth::File Load (0.001398)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
Creating file with name file1 (0.00986)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04057)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.12231s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001643)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001772)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:07.075232', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001400)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001496)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001499)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002587)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002687)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.004684)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001653)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;35;1mEarth::Directory Load (0.001615)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
Creating directory /home/ssurfer/earth/test_data/subdir (0.04729)
  [4;36;1mEarth::File Load (0.001526)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.07879)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00729)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> not changed
Update cycle took 0.146081s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001901)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001527)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:07.261611', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;35;1mEarth::Directory Load (0.001786)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001598)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001748)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::Directory Load (0.002047)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002122)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001773)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001695)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001523)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001590)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Server Load (0.001351)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 9) [0m
  [4;35;1mEarth::Directory Load (0.001354)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001621)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001545)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001460)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.002611)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;36;1mEarth::File Load (0.002434)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002639)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002358)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001398)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001970)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.001502)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04700)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file1 (0.00774)
checking for update on file sub-file1
Updating directory with name subdir (0.01622)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00736)
Update cycle took 0.094958s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.089146)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001758)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:07.543091', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::File Load (0.002041)[0m   [0;1mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001425)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;36;1mEarth::Directory Load (0.001588)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002145)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 19) [0m
  [4;35;1mEarth::File Load (0.001661)[0m   [0mSELECT * FROM files WHERE (files."name" = E'sub-file1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002341)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001457)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001530)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001423)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001419)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002432)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002421)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002276)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002010)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001991)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'subdir') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001597)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002543)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001676)[0m   [0;1mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001674)[0m   [0mSELECT * FROM directories WHERE (directories."name" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002526)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001425)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 17) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 3
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "subdir"]
  [4;36;1mEarth::Directory Load (0.001799)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::File Load (0.002192)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.05155)
update_non_recursive for directory /home/ssurfer/earth/test_data/subdir -> changed, subdirectories are []
Creating file with name sub-file2 (0.00763)
Creating file with name sub-file3 (0.00584)
checking for update on file sub-file1
checking for update on file sub-file2
checking for update on file sub-file3
Updating directory with name subdir (0.01400)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
checking for update on file file1
Updating directory with name dir1 (0.00733)
Update cycle took 0.102764s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001704)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001529)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:07.757960', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 9[0m
  [4;36;1mEarth::Directory Load (0.001567)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::Directory Load (0.001554)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 17) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001462)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 17) [0m
  [4;35;1mEarth::Directory Load (0.003872)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 19) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001377)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 18) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001468)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 17) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001507)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 17) [0m
  [4;35;1mEarth::File Load (0.002352)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002347)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002755)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 17) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 17) AND directories.server_id = 9) LIMIT 1[0m
  [4;36;1mSQL (0.000986)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001029)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001706)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001502)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001612)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.003621)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001277)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001501)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002611)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 10, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001093)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004326)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 10 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 10 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001524)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 20) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04867)
  [4;36;1mEarth::File Load (0.001660)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
Creating file with name file1 (0.00661)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03324)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.097266s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001547)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001497)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:07.948792', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 10[0m
  [4;35;1mEarth::Directory Load (0.001464)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 20) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001413)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001602)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 20) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001533)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mEarth::File Load (0.004223)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002292)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002267)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 20) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 20) AND directories.server_id = 10) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001566)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001987)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001919)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001662)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001377)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 20) [0m
  [4;35;1mSQL (0.000918)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000746)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001364)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001381)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001281)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001780)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001484)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001915)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001463)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 11, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.000956)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004021)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 11 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 11 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001567)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 22) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06655)
  [4;35;1mEarth::File Load (0.001546)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
Creating file with name file1 (0.00790)
Creating file with name .an_invisible_file (0.00571)
checking for update on file file1
checking for update on file .an_invisible_file
Updating directory with name /home/ssurfer/earth/test_data (0.04290)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.130087s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001544)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001645)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.178752', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 11[0m
  [4;36;1mEarth::Directory Load (0.001689)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 22) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001339)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 23) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001587)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 22) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001480)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 22) [0m
  [4;36;1mEarth::File Load (0.002540)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002482)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002223)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 22) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 22) AND directories.server_id = 11) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001640)[0m   [0mSELECT * FROM files WHERE (files."name" = E'.an_invisible_file') LIMIT 1[0m
  [4;36;1mSQL (0.000903)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000732)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001589)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002095)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001235)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001681)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001495)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001187)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001459)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 12, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000948)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003778)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 12 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 12 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001625)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'random') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001573)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'random', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001008)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001493)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data_2', 13, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data_2', -1, 0)[0m
  [4;35;1mSQL (0.000931)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.006451)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 13 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 13 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001867)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001623)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001407)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.00755)
Update cycle took 0.012229s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001774)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002060)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.304285', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::File Load (0.001331)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
  [4;35;1mEarth::Directory Update (0.001777)[0m   [0mUPDATE directories SET "level" = 1, "modified" = '2008-04-10 13:13:07.000000', "server_id" = 13, "count" = 0, "name" = E'/home/ssurfer/earth/test_data_2', "bytes" = 0, "cache_valid" = 't', "blocks" = 0, "path" = E'/home/ssurfer/earth/test_data_2', "parent_id" = NULL WHERE id = 25[0m
  [4;36;1mEarth::Directory Load (0.002603)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 25) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001629)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001847)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/jfcbwr
create directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
  [4;35;1mEarth::Directory Load (0.001391)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001337)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001887)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003761s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001685)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001472)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.345240', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001751)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002026)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/jfcbwr/xwqsjlnkrsg
delete directory /home/ssurfer/earth/test_data_2/jfcbwr
  [4;36;1mEarth::Directory Load (0.001752)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001326)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001287)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003011s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.002541)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001513)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.374500', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001712)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002120)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
  [4;35;1mEarth::Directory Load (0.001377)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001523)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001298)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003063s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001843)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001595)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.400436', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001579)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002089)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
create directory /home/ssurfer/earth/test_data_2/fcmftmoqgy/kmwmyjs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
  [4;36;1mEarth::Directory Load (0.001347)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001393)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;36;1mEarth::Directory Load (0.002734)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.005514s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001551)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001539)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.429178', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001339)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001896)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/fcmftmoqgy
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/amz
create directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/hzfnsu/fwfj
  [4;35;1mEarth::Directory Load (0.003583)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001557)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001736)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003549s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001827)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001813)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.459333', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001463)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001851)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/hzfnsu
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam
  [4;36;1mEarth::Directory Load (0.001384)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001346)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001368)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003495s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001991)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001574)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.488100', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001721)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001798)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/adagc/ilwvbaf
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/lvaniisppam/hehs
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vn/mfrctyqjdft
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl
  [4;35;1mEarth::Directory Load (0.001539)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001352)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001292)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003259s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001702)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001896)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.515708', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001490)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002062)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001357)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001322)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001294)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003403s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001540)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001522)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.544961', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001855)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.103127)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;35;1mEarth::Directory Load (0.001357)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001329)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001463)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003242s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002168)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001540)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.861213', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001601)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002878)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/vfqakcktrzt
create directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/mon/drmzomkci
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/qy
  [4;36;1mEarth::Directory Load (0.001512)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001570)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001460)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.00314s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001748)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001736)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.890845', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001350)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002164)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox/wsanfxim/bzaymxwn
delete directory /home/ssurfer/earth/test_data_2/mon
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc/njotkoymzl/mo/lcifqeg
  [4;35;1mEarth::Directory Load (0.001380)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001470)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001280)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003414s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.002655)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001560)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.922040', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001627)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001846)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/szox
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo/lfc
create directory /home/ssurfer/earth/test_data_2/eapdfpxlo/ni
  [4;36;1mEarth::Directory Load (0.001716)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001386)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;36;1mEarth::Directory Load (0.001544)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003565s, remaining_count is 0
  [4;35;1mEarth::Server Load (0.001531)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001546)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.954271', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001774)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001796)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/eapdfpxlo
  [4;35;1mEarth::Directory Load (0.002373)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001518)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed less than 1 second ago (Thu Apr 10 22:43:08 +0930 2008)
  [4;35;1mEarth::Directory Load (0.001297)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Update cycle took 0.003001s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001894)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001516)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:08.981194', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001417)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002113)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
  [4;36;1mEarth::Directory Load (0.001536)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001377)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> changed, subdirectories are ["ncspnyp"]
  [4;36;1mEarth::Directory Load (0.001899)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
Creating directory /home/ssurfer/earth/test_data_2/ncspnyp (0.08726)
  [4;35;1mEarth::File Load (0.003996)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 25) ORDER BY name[0m
Updating directory with name /home/ssurfer/earth/test_data_2 (0.01041)
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs -> not changed
Update cycle took 0.109375s, remaining_count is -2
  [4;36;1mEarth::Server Load (0.001728)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001950)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.112198', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001596)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001871)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/ncspnyp/ovymvs
delete directory /home/ssurfer/earth/test_data_2/ncspnyp
create directory /home/ssurfer/earth/test_data_2/zdri
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz
create directory /home/ssurfer/earth/test_data_2/qd
create directory /home/ssurfer/earth/test_data_2/qg
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;36;1mEarth::Directory Load (0.001342)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001346)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001670)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.002037)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001311)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Removing directory with name ovymvs (0.01116)
Update cycle took 0.023058s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001936)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001814)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.160952', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001373)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001856)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/cphtotfvky
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/pxijmhsw
  [4;35;1mEarth::Directory Load (0.001396)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001405)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001684)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001337)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.001301)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.010332s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.002037)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001569)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.201999', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001521)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001792)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt
  [4;36;1mEarth::Directory Load (0.001438)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001576)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001707)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001583)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001293)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.010556s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001554)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002052)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.237467', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001631)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001817)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd/gs
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/ijypcsh
  [4;35;1mEarth::Directory Load (0.001427)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001406)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001403)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001505)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.001317)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.013946s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001542)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.002164)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.277045', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001627)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001897)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi
create directory /home/ssurfer/earth/test_data_2/qg/obwqvl/giwyfoumn/ugokjartt/jafj/wazusb/mroi/nywtplfg
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ong
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl
  [4;36;1mEarth::Directory Load (0.001458)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001321)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001670)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001371)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001303)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.011385s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001516)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001552)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.313460', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002611)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001987)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs/ndyzxpku
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/mvyqqkn/jctknnq/vsndgy
  [4;35;1mEarth::Directory Load (0.001431)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001358)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001905)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.003566)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.001585)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.013098s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001749)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001700)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.355059', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001912)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001824)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs
  [4;36;1mEarth::Directory Load (0.001369)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001325)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001728)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001327)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001376)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.010893s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001774)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001607)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.391798', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001556)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002811)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/nyzmaakac/avki
delete directory /home/ssurfer/earth/test_data_2/qg/obwqvl
  [4;35;1mEarth::Directory Load (0.001345)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001367)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.002462)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001313)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.003810)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.013995s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001621)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.003153)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.435467', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001604)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001875)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/sudzbs
  [4;36;1mEarth::Directory Load (0.001435)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001364)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001356)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001326)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001338)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.010625s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001750)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.002793)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.473881', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001430)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001936)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/zdri/jsrjcmsqwjd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/nfyunk
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/fplptb
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
  [4;35;1mEarth::Directory Load (0.001638)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001532)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001366)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001554)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.002229)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.012093s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001598)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001897)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.726846', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001397)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002021)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001422)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001414)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001681)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001401)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001347)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.010812s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.004348)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001798)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.764399', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.002308)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001843)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/iwnfcjzj/ztbugyeahps
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd/zvci
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/df
create directory /home/ssurfer/earth/test_data_2/zdri/aqzgshlcxr/nzlhf/cpezt
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/lopftqw
  [4;35;1mEarth::Directory Load (0.001475)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001544)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001376)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001304)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.001711)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.011057s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001686)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001768)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.805803', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001386)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001856)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/rfwvd
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/mbvbwuw/fzsql
  [4;36;1mEarth::Directory Load (0.002172)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001392)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001489)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001631)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001371)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.01351s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001810)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001635)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.849442', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001404)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002384)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/zwvglrwnp
delete directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/dotzlmrvuy
  [4;35;1mEarth::Directory Load (0.001775)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001454)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001587)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001456)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.001426)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.011255s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001575)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001610)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.890650', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001361)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002609)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mEarth::Directory Load (0.001420)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.001569)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;36;1mEarth::Directory Load (0.001786)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;35;1mEarth::Directory Load (0.001695)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;36;1mEarth::File Load (0.001368)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.012345s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001559)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001696)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.929890', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;35;1mEarth::Directory Load (0.001383)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.002126)[0m   [0;1mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/hahmrbpuujs/orajhnqhctx/rpo
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/mumvun/qgywvebuilq/nxzaxi
create directory /home/ssurfer/earth/test_data_2/pmhklgudtco/tfz/ojhl/rwxclpevl/bkht
  [4;35;1mEarth::Directory Load (0.001654)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;36;1mEarth::Directory Load (0.001519)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 25) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data_2 -> not changed
  [4;35;1mEarth::Directory Load (0.001422)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 25) [0m
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data_2/ncspnyp -> changed, subdirectories are []
  [4;36;1mEarth::Directory Load (0.001496)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 26) [0m
  [4;35;1mEarth::File Load (0.001470)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 26) ORDER BY name[0m
Update cycle took 0.011957s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001565)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001818)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:09.970065', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 12[0m
  [4;36;1mEarth::Directory Load (0.001370)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 25) [0m
  [4;35;1mEarth::Directory Load (0.002479)[0m   [0mSELECT * FROM directories WHERE (1=1 AND directories.server_id = 13 AND (directories.lft > (SELECT lft FROM directories WHERE id = 25)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 25))) ORDER BY directories.lft[0m
  [4;36;1mSQL (0.001580)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000720)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001460)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001685)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001830)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001925)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001413)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001222)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001664)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 14, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000961)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004474)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 14 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 14 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Server Load (0.001765)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'late_cache') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001556)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'late_cache', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001281)[0m   [0mSELECT currval('servers_id_seq')[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.00267)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Update cycle took 0.005683s, remaining_count is -1
  [4;36;1mEarth::Directory Create (0.001425)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 15, 'f', NULL, 1, -4, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000891)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001635)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'dir1', 15, 'f', NULL, 2, -3, 0, 29, E'/home/ssurfer/earth/test_data/dir1', -2, 0)[0m
  [4;35;1mSQL (0.000999)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004963)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) THEN 4 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) + 4) ELSE 0 END) WHERE (directories.server_id = 15 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 15 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001427)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 29) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating file with name file1 (0.00882)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03299)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed, subdirectories are []
Creating file with name file1 (0.00638)
checking for update on file file1
Updating directory with name dir1 (0.01351)
Update cycle took 0.067462s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001629)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001971)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:10.148370', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 14[0m
  [4;36;1mEarth::Directory Load (0.001526)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 28) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001421)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 28) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001897)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 28) [0m
  [4;35;1mEarth::File Load (0.002818)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 28) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 28) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002466)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 28) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 28) AND directories.server_id = 14) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.004717)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 28) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 28) AND directories.server_id = 14) LIMIT 1[0m
  [4;36;1mSQL (0.000851)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000611)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001710)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001369)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001521)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001478)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001488)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000945)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001410)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 16, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000882)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003686)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 16 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 16 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001705)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 31) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.04617)
  [4;36;1mEarth::File Load (0.001317)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 31) ORDER BY name[0m
Creating file with name file1 (0.00610)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03134)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.091313s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001595)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001558)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:10.315297', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 16[0m
  [4;35;1mEarth::Directory Load (0.002631)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 31) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001332)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 32) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001724)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 31) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001514)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 31) [0m
  [4;35;1mEarth::File Load (0.002385)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 31) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 31) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.004869)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 31) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 31) AND directories.server_id = 16) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002460)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 31) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 31) AND directories.server_id = 16) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001521)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.001922)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001882)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001544)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001374)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 31) [0m
  [4;35;1mSQL (0.000864)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000645)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001363)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001650)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001628)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.002872)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001215)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001331)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001473)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 17, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001420)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.004016)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 17 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 17 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001785)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 33) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir2b", "dir1", "dir2a"]
Creating directory /home/ssurfer/earth/test_data/dir2b (0.03619)
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06545)
Creating directory /home/ssurfer/earth/test_data/dir2a (0.03350)
  [4;35;1mEarth::File Load (0.001382)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
Creating file with name file1 (0.00620)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.06934)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2b -> changed less than 1 second ago (Thu Apr 10 22:43:10 +0930 2008)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir2a -> changed less than 1 second ago (Thu Apr 10 22:43:10 +0930 2008)
Update cycle took 0.218744s, remaining_count is -3
  [4;36;1mEarth::Server Load (0.001547)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001636)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:10.634412', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001432)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 33) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 4
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001621)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir2b (0.00971)
Removing directory with name dir2a (0.00920)
Updating directory with name /home/ssurfer/earth/test_data (0.03915)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.064781s, remaining_count is 2
  [4;36;1mEarth::Server Load (0.001636)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001493)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:10.712614', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 17[0m
  [4;36;1mEarth::Directory Load (0.001665)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 33) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001372)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 35) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001420)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 33) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001685)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 33) [0m
  [4;36;1mEarth::File Load (0.002468)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 33) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 33) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002336)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 33) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 33) AND directories.server_id = 17) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002649)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 33) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 33) AND directories.server_id = 17) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001502)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001672)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001951)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001308)[0m   [0;1mSELECT * FROM files ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.004167)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 35) [0m
  [4;36;1mEarth::Directory Load (0.001414)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 33) [0m
  [4;35;1mSQL (0.000952)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000683)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001406)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001817)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001920)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001502)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001245)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.001433)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001489)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 18, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.001426)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003687)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 18 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 18 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001886)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 37) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06716)
  [4;35;1mEarth::File Load (0.001432)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 37) ORDER BY name[0m
Creating file with name file1 (0.00652)
Creating file with name file1b (0.00585)
Creating file with name file1a (0.00619)
checking for update on file file1
checking for update on file file1b
checking for update on file file1a
Updating directory with name /home/ssurfer/earth/test_data (0.04819)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.140572s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001549)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001542)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:10.955952', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001467)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 37) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001853)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 37) ORDER BY name[0m
checking for update on file file1
Removing file with name file1a (0.00356)
Removing file with name file1b (0.00213)
Updating directory with name /home/ssurfer/earth/test_data (0.12899)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.141864s, remaining_count is 0
  [4;36;1mEarth::Server Load (0.001704)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001802)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:11.109370', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 18[0m
  [4;36;1mEarth::Directory Load (0.001567)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::Directory Load (0.002031)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001839)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002505)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001468)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 38) [0m
  [4;35;1mEarth::Directory Load (0.001675)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 37) [0m
  [4;36;1mSQL (0.000862)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000625)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001364)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.002099)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001272)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001679)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001223)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.003152)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.002975)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 19, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.001140)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.004051)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 19 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 19 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001424)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 39) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1", "dir_a"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06524)
Creating directory /home/ssurfer/earth/test_data/dir_a (0.29212)
  [4;36;1mEarth::File Load (0.001393)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 39) ORDER BY name[0m
Creating file with name file1 (0.00669)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.05884)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c -> not changed
update_non_recursive for directory /home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d -> not changed
Update cycle took 0.435409s, remaining_count is -9
  [4;35;1mEarth::Server Load (0.001575)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001526)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:11.733699', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;35;1mEarth::Directory Load (0.001684)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001656)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001707)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir1') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002245)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001978)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001866)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_a/dir_a_a_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002655)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001805)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_a') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002092)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_b') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001866)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_c') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001723)[0m   [0mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data/dir_a/dir_a_b/dir_a_b_d') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001684)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 39) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 10
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
  [4;35;1mEarth::File Load (0.001858)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 39) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir_a (0.21605)
Updating directory with name /home/ssurfer/earth/test_data (0.04637)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.270287s, remaining_count is 8
  [4;36;1mEarth::Server Load (0.003108)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001657)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.072609', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 19[0m
  [4;36;1mSQL (0.001612)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000698)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001430)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001496)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.001326)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001809)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001568)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000948)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001538)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 20, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000972)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003786)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 20 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 20 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.002789)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 49) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06793)
  [4;36;1mEarth::File Load (0.001453)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 49) ORDER BY name[0m
Creating file with name file1 (0.00815)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04067)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.122942s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.001838)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001674)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.249576', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001412)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 49) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001844)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 49) ORDER BY name[0m
Removing file with name file1 (0.00241)
Removing directory with name dir1 (0.10231)
Updating directory with name /home/ssurfer/earth/test_data (0.10771)
Update cycle took 0.21811s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.001827)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001619)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.479804', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 20[0m
  [4;35;1mEarth::Directory Load (0.001562)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 49) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001361)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 49) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.001489)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 49) [0m
  [4;36;1mEarth::File Load (0.004098)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 49) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 49) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002292)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 49) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 49) AND directories.server_id = 20) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002455)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 49) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 49) AND directories.server_id = 20) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001394)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001645)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001217)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.000875)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000885)[0m   [0mBEGIN[0m
  [4;36;1mEarth::File Delete all (0.001432)[0m   [0;1mDELETE FROM files [0m
  [4;35;1mEarth::Directory Delete all (0.001406)[0m   [0mDELETE FROM directories [0m
  [4;36;1mEarth::Server Delete all (0.002227)[0m   [0;1mDELETE FROM servers [0m
  [4;35;1mEarth::Server Load (0.001518)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Create (0.001454)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000960)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Directory Create (0.001526)[0m   [0;1mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 21, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;35;1mSQL (0.000952)[0m   [0mSELECT currval('directories_id_seq')[0m
  [4;36;1mEarth::Directory Update (0.003905)[0m   [0;1mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 21 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 21 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;35;1mEarth::Directory Load (0.001803)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 51) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.03442)
  [4;36;1mEarth::File Load (0.001434)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 51) ORDER BY name[0m
Creating file with name file1 (0.00640)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.03346)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> changed less than 1 second ago (Thu Apr 10 22:43:12 +0930 2008)
Update cycle took 0.080941s, remaining_count is -1
  [4;35;1mEarth::Server Load (0.003193)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001578)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.651166', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.001586)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 51) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;36;1mEarth::File Load (0.001515)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 51) ORDER BY name[0m
checking for update on file file1
Removing directory with name dir1 (0.00970)
Updating directory with name /home/ssurfer/earth/test_data (0.01659)
Update cycle took 0.032233s, remaining_count is 1
  [4;35;1mEarth::Server Load (0.001602)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Server Update (0.001523)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.695082', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 21[0m
  [4;35;1mEarth::Directory Load (0.002015)[0m   [0mSELECT bytes, blocks, count FROM directories WHERE (id = 51) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001423)[0m   [0;1mSELECT * FROM files WHERE (files.directory_id = 51) ORDER BY name[0m
  [4;35;1mEarth::Directory Load (0.004049)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 51) [0m
  [4;36;1mEarth::File Load (0.002423)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 51) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 51) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002800)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 51) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 51) AND directories.server_id = 21) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002304)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 51) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 51) AND directories.server_id = 21) LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001442)[0m   [0mSELECT * FROM directories ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001642)[0m   [0;1mSELECT * FROM directories WHERE (directories."path" = E'/home/ssurfer/earth/test_data') LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001258)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mEarth::Directory Load (0.001536)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 51) [0m
  [4;35;1mSQL (0.001336)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000627)[0m   [0;1mBEGIN[0m
  [4;35;1mEarth::File Delete all (0.001706)[0m   [0mDELETE FROM files [0m
  [4;36;1mEarth::Directory Delete all (0.001443)[0m   [0;1mDELETE FROM directories [0m
  [4;35;1mEarth::Server Delete all (0.001872)[0m   [0mDELETE FROM servers [0m
  [4;36;1mEarth::Server Load (0.001805)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Create (0.001298)[0m   [0mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'sboard', NULL, NULL, 300, NULL, 300)[0m
  [4;36;1mSQL (0.000877)[0m   [0;1mSELECT currval('servers_id_seq')[0m
  [4;35;1mEarth::Directory Create (0.001836)[0m   [0mINSERT INTO directories ("bytes", "name", "server_id", "cache_valid", "modified", "level", "lft", "count", "parent_id", "path", "rgt", "blocks") VALUES(0, E'/home/ssurfer/earth/test_data', 22, 'f', NULL, 1, -2, 0, NULL, E'/home/ssurfer/earth/test_data', -1, 0)[0m
  [4;36;1mSQL (0.002850)[0m   [0;1mSELECT currval('directories_id_seq')[0m
  [4;35;1mEarth::Directory Update (0.003963)[0m   [0mUPDATE directories SET lft = lft + (CASE WHEN lft >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN lft < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END), rgt = rgt + (CASE WHEN rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) THEN 2 WHEN rgt < 0 THEN ((SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) + 2) ELSE 0 END) WHERE (directories.server_id = 22 AND (rgt >= (SELECT CASE WHEN MAX(rgt) IS NOT NULL THEN MAX(rgt) + 1 ELSE 1 END FROM directories WHERE directories.server_id = 22 AND parent_id IS NULL AND rgt > 0) OR rgt < 0)) [0m
  [4;36;1mEarth::Directory Load (0.001776)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 53) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 1
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are ["dir1"]
Creating directory /home/ssurfer/earth/test_data/dir1 (0.06765)
  [4;35;1mEarth::File Load (0.001382)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 53) ORDER BY name[0m
Creating file with name file1 (0.00609)
checking for update on file file1
Updating directory with name /home/ssurfer/earth/test_data (0.04036)
update_non_recursive for directory /home/ssurfer/earth/test_data/dir1 -> not changed
Update cycle took 0.121397s, remaining_count is -1
  [4;36;1mEarth::Server Load (0.001556)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001655)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.906673', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001368)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 53) LIMIT 1[0m
starting update cycle, directories.size is 1 remaining count is 2
update_non_recursive for directory /home/ssurfer/earth/test_data -> removed
update_non_recursive for directory /home/ssurfer/earth/test_data -> changed, subdirectories are []
  [4;35;1mEarth::File Load (0.001585)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 53) ORDER BY name[0m
Removing file with name file1 (0.00274)
Removing directory with name dir1 (0.00858)
Update cycle took 0.017513s, remaining_count is 1
  [4;36;1mEarth::Server Load (0.001675)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Server Update (0.001654)[0m   [0mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = '2008-04-10 13:13:12.935615', "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 22[0m
  [4;36;1mEarth::Directory Load (0.001987)[0m   [0;1mSELECT bytes, blocks, count FROM directories WHERE (id = 53) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.001319)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 53) ORDER BY name[0m
  [4;36;1mEarth::Directory Load (0.001795)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 53) and rgt > (select rgt from directories where id = 53) and directories.server_id = 22) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Update (0.003459)[0m   [0mUPDATE directories SET bytes = bytes + 0, blocks = blocks + 0, count = count + -2 WHERE (id in (53)) [0m
  [4;36;1mEarth::Directory Load (0.001662)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 53) [0m
  [4;35;1mEarth::File Load (0.005506)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 53) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 53) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002251)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 53) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 53) AND directories.server_id = 22) LIMIT 1[0m
  [4;35;1mEarth::File Load (0.002220)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 53) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 53) AND directories.server_id = 22) LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001595)[0m   [0;1mSELECT * FROM directories ORDER BY id[0m
  [4;35;1mEarth::File Load (0.001180)[0m   [0mSELECT * FROM files ORDER BY id[0m
  [4;36;1mSQL (0.001017)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001378)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001129)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.004626)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;36;1mSQL (0.002376)[0m   [0;1mDELETE FROM servers[0m
  [4;35;1mSQL (0.000993)[0m   [0mDELETE FROM file_metadata_strings[0m
  [4;36;1mSQL (0.001011)[0m   [0;1mDELETE FROM files[0m
  [4;35;1mSQL (0.001135)[0m   [0mDELETE FROM directories[0m
  [4;36;1mSQL (0.001491)[0m   [0;1mDELETE FROM plugin_descriptors[0m
  [4;35;1mSQL (0.001390)[0m   [0mDELETE FROM metadata_strings[0m
  [4;36;1mSQL (0.001967)[0m   [0;1mDELETE FROM metadata_attributes[0m
  [4;35;1mSQL (0.001402)[0m   [0mDELETE FROM schema_info[0m
  [4;36;1mEarth::Server Create (0.001283)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'duck.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.001086)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mEarth::Server Create (0.001629)[0m   [0;1mINSERT INTO servers ("name", "heartbeat_time", "last_update_finish_time", "update_interval", "daemon_version", "heartbeat_interval") VALUES(E'rincewind.local', NULL, NULL, 300, NULL, 300)[0m
  [4;35;1mSQL (0.000895)[0m   [0mSELECT currval('servers_id_seq')[0m
  [4;36;1mSQL (0.000922)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000878)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000846)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000898)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000663)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000551)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000663)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000551)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000706)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000886)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.001113)[0m   [0;1mROLLBACK[0m
StubController: missing default helper path stub_helper
  [4;36;1mSQL (0.001501)[0m   [0;1mSHOW client_min_messages[0m
  [4;35;1mSQL (0.000812)[0m   [0mSET client_min_messages TO 'panic'[0m
  [4;36;1mSQL (0.000757)[0m   [0;1mSHOW standard_conforming_strings[0m
  [4;35;1mSQL (0.000950)[0m   [0mSET client_min_messages TO 'notice'[0m
  [4;36;1mSQL (0.001556)[0m   [0;1mSELECT version()[0m
  [4;35;1mSQL (0.000541)[0m   [0mBEGIN[0m


Processing BrowserController#index (for 0.0.0.0 at 2008-04-10 22:43:16) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"browser"}
Redirected to http://test.host/browser/show
Completed in 0.00737 (135 reqs/sec) | DB: 0.00612 (83%) | 302 Found [http://test.host/]
  [4;36;1mSQL (0.001135)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000621)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.000774)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000633)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:43:16) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo"]}
  [4;36;1mSQL (0.004446)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'servers'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Server Indexes (0.005598)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'servers'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Server Indexes (0.002189)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'servers'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Server Load (0.003384)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mSQL (0.002473)[0m   [0;1m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'directories'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;35;1mEarth::Directory Indexes (0.007656)[0m   [0m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'directories'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;36;1mEarth::Directory Indexes (0.002021)[0m   [0;1m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'directories'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;35;1mEarth::Directory Load (0.001837)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001480)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 1) [0m
  [4;35;1mSQL (0.002556)[0m   [0m SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
 FROM pg_attribute a LEFT JOIN pg_attrdef d
 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
 WHERE a.attrelid = 'files'::regclass
 AND a.attnum > 0 AND NOT a.attisdropped
 ORDER BY a.attnum
[0m
  [4;36;1mEarth::File Indexes (0.004045)[0m   [0;1m SELECT i.relname, d.indisunique, a.attname
 FROM pg_class t, pg_class i, pg_index d, pg_attribute a
 WHERE i.relkind = 'i'
 AND d.indexrelid = i.oid
 AND d.indisprimary = 'f'
 AND t.oid = d.indrelid
 AND t.relname = 'files'
 AND a.attrelid = t.oid
 AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum
 OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum
 OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum
 OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum
 OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )
 ORDER BY i.relname
[0m
  [4;35;1mEarth::File Indexes (0.002236)[0m   [0m SELECT c2.relname, i.indisunique, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true)
 FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
 WHERE c.relname = 'files'
 AND c.oid = i.indrelid AND i.indexrelid = c2.oid
 AND i.indisprimary = 'f'
 AND i.indexprs IS NOT NULL
 ORDER BY 1
[0m
  [4;36;1mEarth::Directory Load (0.001941)[0m   [0;1mSELECT * FROM directories WHERE (directories.parent_id = 1) [0m
  [4;35;1mEarth::File Load (0.003391)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000986)[0m   [0;1mSHOW search_path[0m
  [4;35;1mSQL (0.003822)[0m   [0m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;36;1mSQL (0.004605)[0m   [0;1m SELECT tablename
 FROM pg_tables
 WHERE schemaname IN (E'"$user"',E'public')
[0m
  [4;35;1mEarth::Directory Load (0.002825)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002886)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02493)
Completed in 0.19785 (5 reqs/sec) | Rendering: 0.09368 (47%) | DB: 0.06354 (32%) | 200 OK [http://test.host/browser/show/sboard/foo]
  [4;35;1mEarth::Directory Load (0.003900)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001935)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.002442)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 2) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 2) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000981)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000785)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser"}
  [4;36;1mEarth::Server Load (0.001332)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.002184)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002405)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002684)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002640)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01839)
Completed in 0.08475 (11 reqs/sec) | Rendering: 0.05660 (66%) | DB: 0.02129 (25%) | 200 OK [http://test.host/browser/show]
  [4;36;1mSQL (0.000883)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000633)[0m   [0mBEGIN[0m


Processing BrowserController#flat (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"action"=>"flat", "controller"=>"browser"}
  [4;36;1mSQL (0.000993)[0m   [0;1mSHOW max_identifier_length[0m
  [4;35;1mSQL (0.002757)[0m   [0mSELECT count(*) AS count_all FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') [0m
  [4;36;1mEarth::File Load (0.002584)[0m   [0;1mSELECT files.name as name, files.directory_id as directory_id, files.modified as modified, files.bytes as bytes, files.uid as uid FROM files JOIN directories ON files.directory_id = directories.id WHERE (not files.name like '.%') ORDER BY bytes desc LIMIT 25 OFFSET 0[0m
Rendering template within layouts/application
Rendering browser/flat
  [4;35;1mEarth::Directory Load (0.001406)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mEarth::Server Load (0.001365)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mEarth::Directory Load (0.001828)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001774)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 5) [0m
  [4;35;1mEarth::Server Load (0.001408)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.003378)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 5) and rgt > (select rgt from directories where id = 5) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 7) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 7) and rgt > (select rgt from directories where id = 7) and directories.server_id = 3) ORDER BY lft desc[0m
  [4;36;1mEarth::Directory Load (0.001420)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Directory Load (0.001919)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 2) and rgt > (select rgt from directories where id = 2) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Directory Load (0.001364)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;35;1mEarth::Directory Load (0.002201)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 1) and rgt > (select rgt from directories where id = 1) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;35;1mEarth::Server Load (0.001114)[0m   [0mSELECT * FROM servers [0m
  [4;36;1mEarth::Directory Load (0.003928)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.003349)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002217)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002513)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03551)
Completed in 0.18688 (5 reqs/sec) | Rendering: 0.14512 (77%) | DB: 0.03903 (20%) | 200 OK [http://test.host/browser/flat]
  [4;36;1mSQL (0.000918)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000798)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"browser", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001656)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001350)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002361)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering template within layouts/application
Rendering browser/show
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.01715)
Completed in 0.21465 (4 reqs/sec) | Rendering: 0.20112 (93%) | DB: 0.00708 (3%) | 200 OK [http://test.host/browser/show/sboard]
  [4;35;1mEarth::Server Load (0.001729)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mSQL (0.000816)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000616)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.001598)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001851)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.002534)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001621)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.003970)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Rendering browser/show
  [4;35;1mEarth::File Load (0.001813)[0m   [0mSELECT * FROM files WHERE (files.directory_id = 2) ORDER BY name[0m
Completed in 0.03671 (27 reqs/sec) | Rendering: 0.01019 (27%) | DB: 0.01655 (45%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;36;1mEarth::Directory Load (0.001578)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;35;1mEarth::File Load (0.001898)[0m   [0mSELECT * FROM files WHERE (files."id" = 3) [0m
  [4;36;1mEarth::Directory Load (0.001695)[0m   [0;1mSELECT * FROM directories WHERE (directories."id" = 3) [0m
  [4;35;1mEarth::File Load (0.002385)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.000807)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000618)[0m   [0mBEGIN[0m


Processing BrowserController#show (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"show_empty"=>"1", "action"=>"show", "controller"=>"browser", "server"=>"sboard", "path"=>["", "foo", "bar"]}
  [4;36;1mEarth::Server Load (0.002476)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.001968)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar') LIMIT 1[0m
  [4;36;1mEarth::File Load (0.001396)[0m   [0;1mSELECT * FROM files WHERE (directory_id = 2) [0m
  [4;35;1mEarth::Directory Load (0.001620)[0m   [0mSELECT * FROM directories WHERE (directories.parent_id = 2) [0m
  [4;36;1mEarth::File Load (0.002303)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 3) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 3) AND directories.server_id = 1) LIMIT 1[0m
end of controller
Sending data earth_report.csv
Completed in 0.02146 (46 reqs/sec) | Rendering: 0.00014 (0%) | DB: 0.01874 (87%) | 200 OK [http://test.host/browser/show/sboard/foo/bar?show_empty=1]
  [4;35;1mEarth::Directory Load (0.001347)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 2) [0m
  [4;36;1mSQL (0.001148)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000881)[0m   [0mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph"}
Rendering template within layouts/application
Rendering graph/index
  [4;36;1mEarth::Server Load (0.001353)[0m   [0;1mSELECT * FROM servers [0m
  [4;35;1mEarth::Directory Load (0.001461)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002441)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002358)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002367)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.03680)
Completed in 0.07205 (13 reqs/sec) | Rendering: 0.05515 (76%) | DB: 0.01336 (18%) | 200 OK [http://test.host/graph]
  [4;35;1mSQL (0.000869)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000596)[0m   [0;1mBEGIN[0m


Processing GraphController#index (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;35;1mEarth::Server Load (0.001645)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001859)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
Rendering template within layouts/application
Rendering graph/index
  [4;35;1mEarth::Directory Load (0.003058)[0m   [0mSELECT * FROM directories WHERE (lft < (select lft from directories where id = 4) and rgt > (select rgt from directories where id = 4) and directories.server_id = 1) ORDER BY lft desc[0m
  [4;36;1mEarth::File Load (0.002567)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 4) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 4) AND directories.server_id = 1) LIMIT 1[0m
Rendered browser/_breadcrumb_and_filter (0.02850)
Completed in 0.06335 (15 reqs/sec) | Rendering: 0.04824 (76%) | DB: 0.01059 (16%) | 200 OK [http://test.host/graph/sboard/foo/bar/twiddle/frob]
  [4;35;1mSQL (0.000890)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001163)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"filter_filename"=>"*.zip", "action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001759)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001754)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.003396)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.003634)[0m   [0;1mSELECT * FROM files WHERE (files.name LIKE E'%.zip') AND (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
Rendering graph/directory.rxml
Completed in 0.10881 (9 reqs/sec) | Rendering: 0.08086 (74%) | DB: 0.01260 (11%) | 200 OK [http://test.host/graph/show/sboard/foo?filter_filename=%2A.zip]
  [4;35;1mSQL (0.000842)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000648)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:43:17) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo"}
  [4;35;1mEarth::Server Load (0.001528)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001633)[0m   [0;1mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.004503)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 6 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002578)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 5 AND server_id = 1 AND lft >= 1 AND rgt <= 10)) [0m
  [4;35;1mEarth::Directory Load (0.001488)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.13097 (7 reqs/sec) | Rendering: 0.10300 (78%) | DB: 0.01322 (10%) | 200 OK [http://test.host/graph/show/sboard/foo]
  [4;36;1mSQL (0.000895)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000689)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph"}
  [4;36;1mEarth::Server Load (0.001155)[0m   [0;1mSELECT * FROM servers [0m
Rendering graph/servers.rxml
  [4;35;1mEarth::Directory Load (0.001538)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002594)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002182)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mEarth::File Load (0.002696)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.08085 (12 reqs/sec) | Rendering: 0.06849 (84%) | DB: 0.01175 (14%) | 200 OK [http://test.host/graph/show]
  [4;35;1mSQL (0.001034)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000605)[0m   [0;1mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard"}
  [4;35;1mEarth::Server Load (0.001728)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001348)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.003265)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 1)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 1))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002366)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 1 AND lft >= 0 AND rgt <= 11)) [0m
  [4;35;1mEarth::Directory Load (0.001541)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (5)) [0m
Rendering graph/directory.rxml
Completed in 0.10512 (9 reqs/sec) | Rendering: 0.07280 (69%) | DB: 0.01189 (11%) | 200 OK [http://test.host/graph/show/sboard]
  [4;36;1mSQL (0.000787)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.001042)[0m   [0mBEGIN[0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"sboard", "path"=>"/foo/bar/twiddle/frob"}
  [4;36;1mEarth::Server Load (0.001871)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
  [4;35;1mEarth::Directory Load (0.002610)[0m   [0mSELECT * FROM directories WHERE (directories.server_id = 1) AND (directories."path" = E'/foo/bar/twiddle/frob') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.002193)[0m   [0;1mSELECT * FROM directories WHERE (directories.level <= 9 AND directories.server_id = 1 AND (directories.lft > (SELECT lft FROM directories WHERE id = 4)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 4))) ORDER BY directories.lft[0m
  [4;35;1mEarth::File Load (0.002061)[0m   [0mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 8 AND server_id = 1 AND lft >= 4 AND rgt <= 7)) [0m
  [4;36;1mEarth::Directory Load (0.001255)[0m   [0;1mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
  [4;35;1mEarth::Directory Load (0.001393)[0m   [0mSELECT * FROM directories WHERE (directories."id" = 3) [0m
Completed in 0.06098 (16 reqs/sec) | Rendering: 0.03689 (60%) | DB: 0.01321 (21%) | 200 OK [http://test.host/graph/show/sboard/foo/bar/twiddle/frob]
  [4;36;1mSQL (0.000801)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000604)[0m   [0mBEGIN[0m
  [4;36;1mEarth::Server Load (0.001366)[0m   [0;1mSELECT * FROM servers WHERE (servers."id" = 3) [0m


Processing GraphController#show (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"graph", "server"=>"server3"}
  [4;35;1mEarth::Server Load (0.001984)[0m   [0mSELECT * FROM servers WHERE (servers."name" = E'server3') LIMIT 1[0m
  [4;36;1mEarth::Directory Load (0.001361)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::Directory Load (0.001945)[0m   [0mSELECT * FROM directories WHERE (directories.level <= 5 AND directories.server_id = 3 AND (directories.lft > (SELECT lft FROM directories WHERE id = 7)) AND (directories.rgt < (SELECT rgt FROM directories WHERE id = 7))) ORDER BY directories.lft[0m
  [4;36;1mEarth::File Load (0.002254)[0m   [0;1mSELECT * FROM files WHERE (directory_id IN (SELECT id FROM directories WHERE level <= 4 AND server_id = 3 AND lft >= 0 AND rgt <= 3)) [0m
  [4;35;1mEarth::Directory Load (0.001318)[0m   [0mSELECT id, bytes, blocks, count FROM directories WHERE (directories."id" IN (NULL)) [0m
Rendering graph/directory.rxml
Completed in 0.06203 (16 reqs/sec) | Rendering: 0.03488 (56%) | DB: 0.01163 (18%) | 200 OK [http://test.host/graph/show/server3]
  [4;36;1mSQL (0.000790)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000576)[0m   [0mBEGIN[0m


Processing ServersController#edit (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"edit", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001559)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/edit
Completed in 0.04098 (24 reqs/sec) | Rendering: 0.03193 (77%) | DB: 0.00292 (7%) | 200 OK [http://test.host/servers/edit/sboard]
  [4;35;1mSQL (0.000823)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.000602)[0m   [0;1mBEGIN[0m


Processing ServersController#index (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"servers"}
  [4;35;1mEarth::Server Load (0.001342)[0m   [0mSELECT * FROM servers [0m
Rendering template within layouts/servers
Rendering servers/index
  [4;36;1mEarth::Directory Load (0.001871)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002618)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 7) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 7) AND directories.server_id = 3) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002718)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 6) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 6) AND directories.server_id = 2) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002366)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
Completed in 0.05803 (17 reqs/sec) | Rendering: 0.04490 (77%) | DB: 0.01234 (21%) | 200 OK [http://test.host/servers]
  [4;36;1mSQL (0.000861)[0m   [0;1mROLLBACK[0m
  [4;35;1mSQL (0.000611)[0m   [0mBEGIN[0m


Processing ServersController#show (for 0.0.0.0 at 2008-04-10 22:43:18) [GET]
  Session ID: 
  Parameters: {"action"=>"show", "controller"=>"servers", "server"=>"sboard"}
  [4;36;1mEarth::Server Load (0.001643)[0m   [0;1mSELECT * FROM servers WHERE (servers."name" = E'sboard') LIMIT 1[0m
Rendering template within layouts/servers
Rendering servers/show
  [4;35;1mEarth::Directory Load (0.001394)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mSQL (0.002024)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;35;1mEarth::Directory Load (0.003851)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;35;1mEarth::File Load (0.002354)[0m   [0mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.001595)[0m   [0;1mSELECT count(*) AS count_all FROM directories WHERE (directories.server_id = 1) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM directories WHERE (parent_id IS NULL) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT SUM(files.bytes) AS sum_bytes, SUM(files.blocks) AS sum_blocks, COUNT(*) AS count FROM files JOIN directories ON files.directory_id = directories.id WHERE (directories.lft >= (SELECT lft FROM directories WHERE id = 1) AND directories.lft <= (SELECT rgt FROM directories WHERE id = 1) AND directories.server_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT count(*) AS count_all FROM directories WHERE (lft >= (SELECT lft FROM directories WHERE id = 1) AND lft <= (SELECT rgt FROM directories WHERE id = 1) AND server_id = 1 AND cache_valid) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT lft AS left, rgt AS right FROM directories WHERE (id = 1) LIMIT 1[0m
Completed in 0.07232 (13 reqs/sec) | Rendering: 0.05674 (78%) | DB: 0.01433 (19%) | 200 OK [http://test.host/servers/show/sboard]
  [4;35;1mSQL (0.000857)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.001415)[0m   [0;1mBEGIN[0m


Processing ServersController#update (for 0.0.0.0 at 2008-04-10 22:43:18) [PUT]
  Session ID: 
  Parameters: {"action"=>"update", "id"=>"1", "controller"=>"servers", "server"=>{}}
  [4;35;1mEarth::Server Load (0.001375)[0m   [0mSELECT * FROM servers WHERE (servers."id" = 1) [0m
  [4;36;1mEarth::Server Update (0.002357)[0m   [0;1mUPDATE servers SET "daemon_version" = NULL, "name" = E'sboard', "heartbeat_interval" = 300, "last_update_finish_time" = NULL, "update_interval" = 300, "heartbeat_time" = NULL WHERE "id" = 1[0m
Redirected to http://test.host/servers/show/sboard
Completed in 0.00976 (102 reqs/sec) | DB: 0.00600 (61%) | 302 Found [http://test.host/servers/1?]
  [4;35;1mSQL (0.000844)[0m   [0mROLLBACK[0m
